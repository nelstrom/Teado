/*
    Copyright(c) 2011 Sencha Inc.
    licensing@sencha.com
    http://www.sencha.com/touchlicense
*/
typeof Ext=="undefined"&&(Ext={}),Ext.apply=function(){for(var a in{valueOf:1})return function(a,b,c){c&&Ext.apply(a,c);if(a&&b&&typeof b=="object")for(var d in b)a[d]=b[d];return a};return function(a,b,c){c&&Ext.apply(a,c);if(a&&b&&typeof b=="object"){for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString),b.valueOf!==Object.prototype.valueOf&&(a.valueOf=b.valueOf)}return a}}(),Ext.apply(Ext,{platformVersion:"1.0",platformVersionDetail:{major:1,minor:0,patch:3},userAgent:navigator.userAgent.toLowerCase(),cache:{},idSeed:1e3,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",isStrict:document.compatMode=="CSS1Compat",windowId:"ext-window",documentId:"ext-document",emptyFn:function(){},isSecure:/^https/i.test(window.location.protocol),isReady:!1,enableGarbageCollector:!0,enableListenerCollection:!0,applyIf:function(a,b){var c,d;if(a)for(c in b)a[c]===d&&(a[c]=b[c]);return a},repaint:function(){var a=Ext.getBody().createChild({cls:"x-mask x-mask-transparent"});setTimeout(function(){a.remove()},0)},id:function(a,b){return a=Ext.getDom(a)||{},a===document?a.id=this.documentId:a===window&&(a.id=this.windowId),a.id=a.id||(b||"ext-gen")+ ++Ext.idSeed,a.id},extend:function(){var a=function(a){for(var b in a){if(!a.hasOwnProperty(b))continue;this[b]=a[b]}},b=Object.prototype.constructor;return function(c,d,e){Ext.isObject(d)&&(e=d,d=c,c=e.constructor!=b?e.constructor:function(){d.apply(this,arguments)});if(!d)throw"Attempting to extend from a class which has not been loaded on the page.";var f=function(){},g,h=d.prototype;return f.prototype=h,g=c.prototype=new f,g.constructor=c,c.superclass=h,h.constructor==b&&(h.constructor=d),c.override=function(a){Ext.override(c,a)},g.superclass=g.supr=function(){return h},g.override=a,g.proto=g,c.override(e),c.extend=function(a){return Ext.extend(c,a)},c}}(),override:function(a,b){Ext.apply(a.prototype,b)},namespace:function(){var a=arguments.length,b,c,d,e,f,g,h;for(b=0;b<a;b++){c=arguments[b],g=c.split("."),window.Ext?h=window[g[0]]=Object(window[g[0]]):h=arguments.callee.caller.arguments[0];for(e=1,f=g.length;e<f;e++)h=h[g[e]]=Object(h[g[e]])}return h},urlEncode:function(a,b){var c,d=[],e=encodeURIComponent;return Ext.iterate(a,function(a,b){c=Ext.isEmpty(b),Ext.each(c?a:b,function(b){d.push("&",e(a),"=",!Ext.isEmpty(b)&&(b!=a||!c)?Ext.isDate(b)?Ext.encode(b).replace(/"/g,""):e(b):"")})}),b||(d.shift(),b=""),b+d.join("")},urlDecode:function(a,b){if(Ext.isEmpty(a))return{};var c={},d=a.split("&"),e=decodeURIComponent,f,g;return Ext.each(d,function(a){a=a.split("="),f=e(a[0]),g=e(a[1]),c[f]=b||!c[f]?g:[].concat(c[f]).concat(g)}),c},htmlEncode:function(a){return Ext.util.Format.htmlEncode(a)},htmlDecode:function(a){return Ext.util.Format.htmlDecode(a)},urlAppend:function(a,b){return Ext.isEmpty(b)?a:a+(a.indexOf("?")===-1?"?":"&")+b},toArray:function(a,b,c){return Array.prototype.slice.call(a,b||0,c||a.length)},each:function(a,b,c){if(Ext.isEmpty(a,!0))return 0;if(!Ext.isIterable(a)||Ext.isPrimitive(a))a=[a];for(var d=0,e=a.length;d<e;d++)if(b.call(c||a[d],a[d],d,a)===!1)return d;return!0},iterate:function(a,b,c){if(Ext.isEmpty(a))return;if(Ext.isIterable(a)){Ext.each(a,b,c);return}if(Ext.isObject(a))for(var d in a)if(a.hasOwnProperty(d)&&b.call(c||a,d,a[d],a)===!1)return},pluck:function(a,b){var c=[];return Ext.each(a,function(a){c.push(a[b])}),c},getBody:function(){return Ext.get(document.body||!1)},getHead:function(){var a;return function(){return a==undefined&&(a=Ext.get(DOC.getElementsByTagName("head")[0])),a}}(),getDoc:function(){return Ext.get(document)},getCmp:function(a){return Ext.ComponentMgr.get(a)},getOrientation:function(){return window.innerHeight>window.innerWidth?"portrait":"landscape"},isIterable:function(a){return a?Ext.isArray(a)||a.callee?!0:/NodeList|HTMLCollection/.test(Object.prototype.toString.call(a))?!0:(typeof a.nextNode!="undefined"||a.item)&&Ext.isNumber(a.length)||!1:!1},num:function(a,b){return a=Number(Ext.isEmpty(a)||Ext.isArray(a)||typeof a=="boolean"||typeof a=="string"&&Ext.util.Format.trim(a).length==0?NaN:a),isNaN(a)?b:a},isEmpty:function(a,b){var c=a==null,d=Ext.isArray(a)&&!a.length,e=b?!1:a==="";return c||d||e},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},isDate:function(a){return Object.prototype.toString.apply(a)==="[object Date]"},isObject:function(a){return!!a&&!a.tagName&&Object.prototype.toString.call(a)==="[object Object]"},isPrimitive:function(a){return Ext.isString(a)||Ext.isNumber(a)||Ext.isBoolean(a)},isFunction:function(a){return Object.prototype.toString.apply(a)==="[object Function]"},isNumber:function(a){return Object.prototype.toString.apply(a)==="[object Number]"&&isFinite(a)},isString:function(a){return typeof a=="string"},isBoolean:function(a){return Object.prototype.toString.apply(a)==="[object Boolean]"},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return typeof a!="undefined"},destroy:function(){var a=arguments.length,b,c;for(b=0;b<a;b++)c=arguments[b],c&&(Ext.isArray(c)?this.destroy.apply(this,c):Ext.isFunction(c.destroy)?c.destroy():c.dom&&c.remove())}}),Ext.SSL_SECURE_URL=Ext.isSecure&&"about:blank",Ext.ns=Ext.namespace,Ext.ns("Ext.util","Ext.data","Ext.list","Ext.form","Ext.menu","Ext.state","Ext.layout","Ext.app","Ext.ux","Ext.plugins","Ext.direct","Ext.lib","Ext.gesture"),Ext.util.Observable=Ext.extend(Object,{isObservable:!0,constructor:function(a){var b=this;Ext.apply(b,a),b.listeners&&(b.on(b.listeners),delete b.listeners),b.events=b.events||{},this.bubbleEvents&&this.enableBubble(this.bubbleEvents)},eventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|vertical|horizontal)$/,addManagedListener:function(a,b,c,d,e){var f=this,g=f.managedListeners=f.managedListeners||[],h;if(Ext.isObject(b)){e=b;for(b in e){if(!e.hasOwnProperty(b))continue;h=e[b],f.eventOptionsRe.test(b)||f.addManagedListener(a,b,h.fn||h,h.scope||e.scope,h.fn?h:e)}}else g.push({item:a,ename:b,fn:c,scope:d,options:e}),a.on(b,c,d,e)},removeManagedListener:function(a,b,c,d){var e=this,f,g,h,i,j,k;if(Ext.isObject(b)){f=b;for(b in f){if(!f.hasOwnProperty(b))continue;g=f[b],e.eventOptionsRe.test(b)||e.removeManagedListener(a,b,g.fn||g,g.scope||f.scope)}}h=this.managedListeners?this.managedListeners.slice():[],j=h.length;for(k=0;k<j;k++)i=h[k],i.item===a&&i.ename===b&&(!c||i.fn===c)&&(!d||i.scope===d)&&(this.managedListeners.remove(i),a.un(i.ename,i.fn,i.scope))},fireEvent:function(){var a=this,b=Ext.toArray(arguments),c=b[0].toLowerCase(),d=!0,e=a.events[c],f=a.eventQueue,g;if(a.eventsSuspended===!0)return f&&f.push(b),!1;if(e&&Ext.isObject(e)&&e.bubble){if(e.fire.apply(e,b.slice(1))===!1)return!1;g=a.getBubbleTarget&&a.getBubbleTarget();if(g&&g.isObservable)return(!g.events[c]||!Ext.isObject(g.events[c])||!g.events[c].bubble)&&g.enableBubble(c),g.fireEvent.apply(g,b)}else e&&Ext.isObject(e)&&(b.shift(),d=e.fire.apply(e,b));return d},addListener:function(a,b,c,d){var e=this,f,g;if(Ext.isObject(a)){d=a;for(a in d){if(!d.hasOwnProperty(a))continue;f=d[a],e.eventOptionsRe.test(a)||e.addListener(a,f.fn||f,f.scope||d.scope,f.fn?f:d)}}else a=a.toLowerCase(),e.events[a]=e.events[a]||!0,g=e.events[a]||!0,Ext.isBoolean(g)&&(e.events[a]=g=new Ext.util.Event(e,a)),g.addListener(b,c,Ext.isObject(d)?d:{})},removeListener:function(a,b,c){var d=this,e,f;if(Ext.isObject(a)){var g=a;for(a in g){if(!g.hasOwnProperty(a))continue;e=g[a],d.eventOptionsRe.test(a)||d.removeListener(a,e.fn||e,e.scope||g.scope)}}else a=a.toLowerCase(),f=d.events[a],f.isEvent&&f.removeListener(b,c)},clearListeners:function(){var a=this.events,b,c;for(c in a){if(!a.hasOwnProperty(c))continue;b=a[c],b.isEvent&&b.clearListeners()}this.clearManagedListeners()},purgeListeners:function(){return console.warn("MixedCollection: purgeListeners has been deprecated. Please use clearListeners."),this.clearListeners.apply(this,arguments)},clearManagedListeners:function(){var a=this.managedListeners||[],b=a.length,c,d;for(c=0;c<b;c++)d=a[c],d.item.un(d.ename,d.fn,d.scope);this.managedListener=[]},purgeManagedListeners:function(){return console.warn("MixedCollection: purgeManagedListeners has been deprecated. Please use clearManagedListeners."),this.clearManagedListeners.apply(this,arguments)},addEvents:function(a){var b=this;b.events=b.events||{};if(Ext.isString(a)){var c=arguments,d=c.length;while(d--)b.events[c[d]]=b.events[c[d]]||!0}else Ext.applyIf(b.events,a)},hasListener:function(a){var b=this.events[a];return b.isEvent===!0&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=!0,a&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var a=this,b=a.eventQueue||[];a.eventsSuspended=!1,delete a.eventQueue,Ext.each(b,function(b){a.fireEvent.apply(a,b)})},relayEvents:function(a,b,c){function h(a){return function(){return d.fireEvent.apply(d,[c+a].concat(Array.prototype.slice.call(arguments,0,-1)))}}c=c||"";var d=this,e=b.length,f,g;for(f=0,e=b.length;f<e;f++)g=b[f].substr(c.length),d.events[g]=d.events[g]||!0,a.on(g,h(g),d)},enableBubble:function(a){var b=this;Ext.isEmpty(a)||(a=Ext.isArray(a)?a:Ext.toArray(arguments),Ext.each(a,function(a){a=a.toLowerCase();var c=b.events[a]||!0;Ext.isBoolean(c)&&(c=new Ext.util.Event(b,a),b.events[a]=c),c.bubble=!0}))}}),Ext.override(Ext.util.Observable,{on:Ext.util.Observable.prototype.addListener,un:Ext.util.Observable.prototype.removeListener,mon:Ext.util.Observable.prototype.addManagedListener,mun:Ext.util.Observable.prototype.removeManagedListener}),Ext.util.Observable.releaseCapture=function(a){a.fireEvent=Ext.util.Observable.prototype.fireEvent},Ext.util.Observable.capture=function(a,b,c){a.fireEvent=Ext.createInterceptor(a.fireEvent,b,c)},Ext.util.Observable.observe=function(a,b){if(a)return a.isObservable||(Ext.applyIf(a,new Ext.util.Observable),Ext.util.Observable.capture(a.prototype,a.fireEvent,a)),typeof b=="object"&&a.on(b),a},Ext.util.Observable.observeClass=Ext.util.Observable.observe,Ext.util.Event=Ext.extend(Object,function(){function a(a,b,c,d){return b.task=new Ext.util.DelayedTask,function(){b.task.delay(c.buffer,a,d,Ext.toArray(arguments))}}function b(a,b,c,d){return function(){var h=new Ext.util.DelayedTask;b.tasks||(b.tasks=[]),b.tasks.push(h),h.delay(c.delay||10,a,d,Ext.toArray(arguments))}}function c(a,b,c,d){return function(){return b.ev.removeListener(b.fn,d),a.apply(d,arguments)}}return{isEvent:!0,constructor:function(a,b){this.name=b,this.observable=a,this.listeners=[]},addListener:function(a,b,c){var d=this,e;b=b||d.observable,d.isListening(a,b)||(e=d.createListener(a,b,c),d.firing&&(d.listeners=d.listeners.slice(0)),d.listeners.push(e))},createListener:function(d,e,f){f=f||{},e=e||this.observable;var g={fn:d,scope:e,o:f,ev:this},h=d;return f.delay&&(h=b(h,g,f,e)),f.buffer&&(h=a(h,g,f,e)),f.single&&(h=c(h,g,f,e)),g.fireFn=h,g},findListener:function(a,b){var c=this.listeners,d=c.length,e,f;while(d--){e=c[d];if(e){f=e.scope;if(e.fn==a&&(f==b||f==this.observable))return d}}return-1},isListening:function(a,b){return this.findListener(a,b)!==-1},removeListener:function(a,b){var c=this,d,e,f;d=c.findListener(a,b);if(d!=-1){e=c.listeners[d],c.firing&&(c.listeners=c.listeners.slice(0)),e.task&&(e.task.cancel(),delete e.task),f=e.tasks&&e.tasks.length;if(f){while(f--)e.tasks[f].cancel();delete e.tasks}return c.listeners.splice(d,1),!0}return!1},clearListeners:function(){var a=this.listeners,b=a.length;while(b--)this.removeListener(a[b].fn,a[b].scope)},fire:function(){var a=this,b=a.listeners,c=b.length,d,e,f;if(c>0){a.firing=!0;for(d=0;d<c;d++){f=b[d],e=arguments.length?Array.prototype.slice.call(arguments,0):[],f.o&&e.push(f.o);if(f&&f.fireFn.apply(f.scope||a.observable,e)===!1)return a.firing=!1}}return a.firing=!1,!0}}}()),Ext.util.Stateful=Ext.extend(Ext.util.Observable,{editing:!1,dirty:!1,persistanceProperty:"data",constructor:function(a){Ext.applyIf(this,{data:{}}),this.modified={},this[this.persistanceProperty]={},Ext.util.Stateful.superclass.constructor.call(this,a)},get:function(a){return this[this.persistanceProperty][a]},set:function(a,b){var c=this,d=c.fields,e=c.modified,f=[],g,h,i;if(arguments.length==1&&Ext.isObject(a)){for(h in a){if(!a.hasOwnProperty(h))continue;g=d.get(h);if(g&&g.convert!==g.type.convert){f.push(h);continue}c.set(h,a[h])}for(i=0;i<f.length;i++)g=f[i],c.set(g,a[g])}else{d&&(g=d.get(a),g&&g.convert&&(b=g.convert(b,c))),c[c.persistanceProperty][a]=b;if(g&&g.persist&&!c.isEqual(currentValue,b))if(c.isModified(a)){if(c.isEqual(e[a],b)){delete e[a],c.dirty=!1;for(h in e)if(e.hasOwnProperty(h)){c.dirty=!0;break}}}else c.dirty=!0,e[a]=currentValue;c.editing||c.afterEdit()}},getChanges:function(){var a=this.modified,b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=this[this.persistanceProperty][c]);return b},isModified:function(a){return!!this.modified&&!!this.modified.hasOwnProperty(a)},setDirty:function(){this.dirty=!0,this.modified||(this.modified={}),this.fields.each(function(a){this.modified[a.name]=this[this.persistanceProperty][a.name]},this)},markDirty:function(){throw new Error("Stateful: markDirty has been deprecated. Please use setDirty.")},reject:function(a){var b=this.modified,c;for(c in b){if(!b.hasOwnProperty(c))continue;typeof b[c]!="function"&&(this[this.persistanceProperty][c]=b[c])}this.dirty=!1,this.editing=!1,delete this.modified,a!==!0&&this.afterReject()},commit:function(a){this.dirty=!1,this.editing=!1,delete this.modified,a!==!0&&this.afterCommit()},copy:function(a){return new this.constructor(Ext.apply({},this[this.persistanceProperty]),a||this.internalId)}}),Ext.util.HashMap=Ext.extend(Ext.util.Observable,{constructor:function(a){this.addEvents("add","clear","remove","replace"),Ext.util.HashMap.superclass.constructor.call(this,a),this.clear(!0)},getCount:function(){return this.length},getData:function(a,b){return b===undefined&&(b=a,a=this.getKey(b)),[a,b]},getKey:function(a){return a.id},add:function(a,b){var c=this,d;if(c.containsKey(a))throw new Error("This key already exists in the HashMap");return d=this.getData(a,b),a=d[0],b=d[1],c.map[a]=b,++c.length,c.fireEvent("add",c,a,b),b},replace:function(a,b){var c=this,d=c.map,e;return c.containsKey(a)||c.add(a,b),e=d[a],d[a]=b,c.fireEvent("replace",c,a,b,e),b},remove:function(a){var b=this.findKey(a);return b!==undefined?this.removeByKey(b):!1},removeByKey:function(a){var b=this,c;return b.containsKey(a)?(c=b.map[a],delete b.map[a],--b.length,b.fireEvent("remove",b,a,c),!0):!1},get:function(a){return this.map[a]},clear:function(a){var b=this;return b.map={},b.length=0,a!==!0&&b.fireEvent("clear",b),b},containsKey:function(a){return this.map[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(a){var b=[],c,d=this.map;for(c in d)d.hasOwnProperty(c)&&b.push(a?c:d[c]);return b},each:function(a,b){var c=Ext.apply({},this.map),d,e=this.length;b=b||this;for(d in c)if(c.hasOwnProperty(d)&&a.call(b,d,c[d],e)===!1)break;return this},clone:function(){var a=new Ext.util.HashMap,b=this.map,c;a.suspendEvents();for(c in b)b.hasOwnProperty(c)&&a.add(c,b[c]);return a.resumeEvents(),a},findKey:function(a){var b,c=this.map;for(b in c)if(c.hasOwnProperty(b)&&c[b]===a)return b;return undefined}}),Ext.util.MixedCollection=function(a,b){this.items=[],this.map={},this.keys=[],this.length=0,this.addEvents("clear","add","replace","remove","sort"),this.allowFunctions=a===!0,b&&(this.getKey=b),Ext.util.MixedCollection.superclass.constructor.call(this)},Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:!1,add:function(a,b){var c=b,d=a;arguments.length==1&&(c=d,d=this.getKey(c));if(typeof d!="undefined"&&d!==null){var e=this.map[d];if(typeof e!="undefined")return this.replace(d,c);this.map[d]=c}return this.length++,this.items.push(c),this.keys.push(d),this.fireEvent("add",this.length-1,c,d),c},getKey:function(a){return a.id},replace:function(a,b){arguments.length==1&&(b=arguments[0],a=this.getKey(b));var c=this.map[a];if(typeof a=="undefined"||a===null||typeof c=="undefined")return this.add(a,b);var d=this.indexOfKey(a);return this.items[d]=b,this.map[a]=b,this.fireEvent("replace",a,c,b),b},addAll:function(a){if(arguments.length>1||Ext.isArray(a)){var b=arguments.length>1?arguments:a;for(var c=0,d=b.length;c<d;c++)this.add(b[c])}else for(var e in a){if(!a.hasOwnProperty(e))continue;(this.allowFunctions||typeof a[e]!="function")&&this.add(e,a[e])}},each:function(a,b){var c=[].concat(this.items);for(var d=0,e=c.length;d<e;d++)if(a.call(b||c[d],c[d],d,e)===!1)break},eachKey:function(a,b){for(var c=0,d=this.keys.length;c<d;c++)a.call(b||window,this.keys[c],this.items[c],c,d)},findBy:function(a,b){for(var c=0,d=this.items.length;c<d;c++)if(a.call(b||window,this.items[c],this.keys[c]))return this.items[c];return null},insert:function(a,b,c){var d=b,e=c;return arguments.length==2&&(e=d,d=this.getKey(e)),this.containsKey(d)&&(this.suspendEvents(),this.removeByKey(d),this.resumeEvents()),a>=this.length?this.add(d,e):(this.length++,this.items.splice(a,0,e),typeof d!="undefined"&&d!==null&&(this.map[d]=e),this.keys.splice(a,0,d),this.fireEvent("add",a,e,d),e)},remove:function(a){return this.removeAt(this.indexOf(a))},removeAll:function(a){return Ext.each(a||[],function(a){this.remove(a)},this),this},removeAt:function(a){if(a<this.length&&a>=0){this.length--;var b=this.items[a];this.items.splice(a,1);var c=this.keys[a];return typeof c!="undefined"&&delete this.map[c],this.keys.splice(a,1),this.fireEvent("remove",b,c),b}return!1},removeByKey:function(a){return this.removeAt(this.indexOfKey(a))},removeKey:function(){return console.warn("MixedCollection: removeKey has been deprecated. Please use removeByKey."),this.removeByKey.apply(this,arguments)},getCount:function(){return this.length},indexOf:function(a){return this.items.indexOf(a)},indexOfKey:function(a){return this.keys.indexOf(a)},get:function(a){var b=this.map[a],c=b!==undefined?b:typeof a=="number"?this.items[a]:undefined;return typeof c!="function"||this.allowFunctions?c:null},item:function(){return console.warn("MixedCollection: item has been deprecated. Please use get."),this.get.apply(this,arguments)},getAt:function(a){return this.items[a]},itemAt:function(){return console.warn("MixedCollection: itemAt has been deprecated. Please use getAt."),this.getAt.apply(this,arguments)},getByKey:function(a){return this.map[a]},key:function(){return console.warn("MixedCollection: key has been deprecated. Please use getByKey."),this.getByKey.apply(this,arguments)},contains:function(a){return this.indexOf(a)!=-1},containsKey:function(a){return typeof this.map[a]!="undefined"},clear:function(){this.length=0,this.items=[],this.keys=[],this.map={},this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(a,b,c){var d,e,f=String(b).toUpperCase()=="DESC"?-1:1,g=[],h=this.keys,i=this.items;c=c||function(a,b){return a-b};for(d=0,e=i.length;d<e;d++)g[g.length]={key:h[d],value:i[d],index:d};g.sort(function(b,d){var e=c(b[a],d[a])*f;return e===0&&(e=b.index<d.index?-1:1),e});for(d=0,e=g.length;d<e;d++)i[d]=g[d].value,h[d]=g[d].key;this.fireEvent("sort",this)},sort:function(a,b){var c=a;Ext.isString(a)?c=[new Ext.util.Sorter({property:a,direction:b||"ASC"})]:a instanceof Ext.util.Sorter?c=[a]:Ext.isObject(a)&&(c=[new Ext.util.Sorter(a)]);var d=c.length;if(d==0)return;var e=function(a,b){var d=c[0].sort(a,b),e=c.length,f;for(f=1;f<e;f++)d=d||c[f].sort.call(this,a,b);return d};this.sortBy(e)},sortBy:function(a){var b=this.items,c=this.keys,d=b.length,e=[],f;for(f=0;f<d;f++)e[f]={key:c[f],value:b[f],index:f};e.sort(function(b,c){var d=a(b.value,c.value);return d===0&&(d=b.index<c.index?-1:1),d});for(f=0;f<d;f++)b[f]=e[f].value,c[f]=e[f].key;this.fireEvent("sort",this)},reorder:function(a){this.suspendEvents();var b=this.items,c=0,d=b.length,e=[],f=[],g;for(g in a)e[a[g]]=b[g];for(c=0;c<d;c++)a[c]==undefined&&f.push(b[c]);for(c=0;c<d;c++)e[c]==undefined&&(e[c]=f.shift());this.clear(),this.addAll(e),this.resumeEvents(),this.fireEvent("sort",this)},sortByKey:function(a,b){this._sort("key",a,b||function(a,b){var c=String(a).toUpperCase(),d=String(b).toUpperCase();return c>d?1:c<d?-1:0})},keySort:function(){return console.warn("MixedCollection: keySort has been deprecated. Please use sortByKey."),this.sortByKey.apply(this,arguments)},getRange:function(a,b){var c=this.items;if(c.length<1)return[];a=a||0,b=Math.min(typeof b=="undefined"?this.length-1:b,this.length-1);var d,e=[];if(a<=b)for(d=a;d<=b;d++)e[e.length]=c[d];else for(d=a;d>=b;d--)e[e.length]=c[d];return e},filter:function(a,b,c,d){var e=[];if(Ext.isString(a))e.push(new Ext.util.Filter({property:a,value:b,anyMatch:c,caseSensitive:d}));else if(Ext.isArray(a)||a instanceof Ext.util.Filter)e=e.concat(a);var f=function(a){var b=!0,c=e.length,d;for(d=0;d<c;d++){var f=e[d],g=f.filterFn,h=f.scope;b=b&&g.call(h,a)}return b};return this.filterBy(f)},filterBy:function(a,b){var c=new Ext.util.MixedCollection,d=this.keys,e=this.items,f=e.length,g;c.getKey=this.getKey;for(g=0;g<f;g++)a.call(b||this,e[g],d[g])&&c.add(d[g],e[g]);return c},findIndex:function(a,b,c,d,e){return Ext.isEmpty(b,!1)?-1:(b=this.createValueMatcher(b,d,e),this.findIndexBy(function(c){return c&&b.test(c[a])},null,c))},findIndexBy:function(a,b,c){var d=this.keys,e=this.items;for(var f=c||0,g=e.length;f<g;f++)if(a.call(b||this,e[f],d[f]))return f;return-1},createValueMatcher:function(a,b,c,d){if(!a.exec){var e=Ext.util.Format.escapeRegex;a=String(a),b===!0?a=e(a):(a="^"+e(a),d===!0&&(a+="$")),a=new RegExp(a,c?"":"i")}return a},clone:function(){var a=new Ext.util.MixedCollection,b=this.keys,c=this.items;for(var d=0,e=c.length;d<e;d++)a.add(b[d],c[d]);return a.getKey=this.getKey,a}}),Ext.AbstractManager=Ext.extend(Object,{typeName:"type",constructor:function(a){Ext.apply(this,a||{}),this.all=new Ext.util.HashMap,this.types={}},get:function(a){return this.all.get(a)},register:function(a){this.all.add(a)},unregister:function(a){this.all.remove(a)},registerType:function(a,b){this.types[a]=b,b[this.typeName]=a},isRegistered:function(a){return this.types[a]!==undefined},create:function(a,b){var c=a[this.typeName]||a.type||b,d=this.types[c];if(d==undefined)throw new Error(Ext.util.Format.format("The '{0}' type has not been registered with this manager",c));return new d(a)},onAvailable:function(a,b,c){var d=this.all;d.on("add",function(e,f){f.id==a&&(b.call(c||f,f),d.un("add",b,c))})},each:function(a,b){this.all.each(a,b||this)},getCount:function(){return this.all.getCount()}}),Ext.util.DelayedTask=function(a,b,c){var d=this,e,f=function(){clearInterval(e),e=null,a.apply(b,c||[])};this.delay=function(g,h,i,j){d.cancel(),a=h||a,b=i||b,c=j||c,e=setInterval(f,g)},this.cancel=function(){e&&(clearInterval(e),e=null)}},Ext.util.GeoLocation=Ext.extend(Ext.util.Observable,{autoUpdate:!0,latitude:null,longitude:null,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,speed:null,timestamp:null,allowHighAccuracy:!1,timeout:Infinity,maximumAge:0,setMaximumAge:function(a){this.maximumAge=a,this.setAutoUpdate(this.autoUpdate)},setTimeout:function(a){this.timeout=a,this.setAutoUpdate(this.autoUpdate)},setAllowHighAccuracy:function(a){this.allowHighAccuracy=a,this.setAutoUpdate(this.autoUpdate)},provider:null,watchOperation:null,constructor:function(a){Ext.apply(this,a),this.coords=this,Ext.supports.GeoLocation&&(this.provider=this.provider||(navigator.geolocation?navigator.geolocation:(window.google||{}).gears?google.gears.factory.create("beta.geolocation"):null)),this.addEvents("update","locationerror","locationupdate"),Ext.util.GeoLocation.superclass.constructor.call(this);if(this.autoUpdate){var b=this;setTimeout(function(){b.setAutoUpdate(b.autoUpdate)},0)}},setAutoUpdate:function(a){this.watchOperation!==null&&(this.provider.clearWatch(this.watchOperation),this.watchOperation=null);if(!a)return!0;if(!Ext.supports.GeoLocation)return this.fireEvent("locationerror",this,!1,!1,!0,null),!1;try{this.watchOperation=this.provider.watchPosition(Ext.createDelegate(this.fireUpdate,this),Ext.createDelegate(this.fireError,this),this.parseOptions())}catch(b){return this.autoUpdate=!1,this.fireEvent("locationerror",this,!1,!1,!0,b.message),!1}return!0},updateLocation:function(a,b,c){var d=this,e=function(c,e){e?d.fireError(e):d.fireEvent("locationerror",d,!1,!1,!0,c),a&&a.call(b||d,null,d),d.fireEvent("update",!1,d)};if(!Ext.supports.GeoLocation){setTimeout(function(){e(null)},0);return}try{this.provider.getCurrentPosition(function(c){d.fireUpdate(c),a&&a.call(b||d,d,d),d.fireEvent("update",d,d)},function(a){e(null,a)},c?c:this.parseOptions())}catch(f){setTimeout(function(){e(f.message)},0)}},fireUpdate:function(a){this.timestamp=a.timestamp,this.latitude=a.coords.latitude,this.longitude=a.coords.longitude,this.accuracy=a.coords.accuracy,this.altitude=a.coords.altitude,this.altitudeAccuracy=a.coords.altitudeAccuracy,this.heading=typeof a.coords.heading=="undefined"?null:a.coords.heading,this.speed=typeof a.coords.speed=="undefined"?null:a.coords.speed,this.fireEvent("locationupdate",this)},fireError:function(a){this.fireEvent("locationerror",this,a.code==a.TIMEOUT,a.code==a.PERMISSION_DENIED,a.code==a.POSITION_UNAVAILABLE,a.message==undefined?null:a.message)},parseOptions:function(){var a={maximumAge:this.maximumAge,allowHighAccuracy:this.allowHighAccuracy};return this.timeout!==Infinity&&(a.timeout=this.timeout),a},getLocation:function(a,b){var c=this;this.latitude!==null?a.call(b||c,c,c):c.updateLocation(a,b)}}),Ext.util.Region=Ext.extend(Object,{constructor:function(a,b,c,d){var e=this;e.top=a,e[1]=a,e.right=b,e.bottom=c,e.left=d,e[0]=d},contains:function(a){var b=this;return a.left>=b.left&&a.right<=b.right&&a.top>=b.top&&a.bottom<=b.bottom},intersect:function(a){var b=this,c=Math.max(b.top,a.top),d=Math.min(b.right,a.right),e=Math.min(b.bottom,a.bottom),f=Math.max(b.left,a.left);return e>c&&d>f?new Ext.util.Region(c,d,e,f):!1},union:function(a){var b=this,c=Math.min(b.top,a.top),d=Math.max(b.right,a.right),e=Math.max(b.bottom,a.bottom),f=Math.min(b.left,a.left);return new Ext.util.Region(c,d,e,f)},constrainTo:function(a){var b=this,c=Ext.util.Numbers.constrain;return b.top=c(b.top,a.top,a.bottom),b.bottom=c(b.bottom,a.top,a.bottom),b.left=c(b.left,a.left,a.right),b.right=c(b.right,a.left,a.right),b},adjust:function(a,b,c,d){var e=this;return e.top+=a,e.left+=d,e.right+=b,e.bottom+=c,e},getOutOfBoundOffset:function(a,b){if(!Ext.isObject(a))return a=="x"?this.getOutOfBoundOffsetX(b):this.getOutOfBoundOffsetY(b);b=a;var c=new Ext.util.Offset;return c.x=this.getOutOfBoundOffsetX(b.x),c.y=this.getOutOfBoundOffsetY(b.y),c},getOutOfBoundOffsetX:function(a){return a<=this.left?this.left-a:a>=this.right?this.right-a:0},getOutOfBoundOffsetY:function(a){return a<=this.top?this.top-a:a>=this.bottom?this.bottom-a:0},isOutOfBound:function(a,b){return Ext.isObject(a)?(b=a,this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y)):a=="x"?this.isOutOfBoundX(b):this.isOutOfBoundY(b)},isOutOfBoundX:function(a){return a<this.left||a>this.right},isOutOfBoundY:function(a){return a<this.top||a>this.bottom},restrict:function(a,b,c){if(Ext.isObject(a)){var d;return c=b,b=a,b.copy?d=b.copy():d={x:b.x,y:b.y},d.x=this.restrictX(b.x,c),d.y=this.restrictY(b.y,c),d}return a=="x"?this.restrictX(b,c):this.restrictY(b,c)},restrictX:function(a,b){return b||(b=1),a<=this.left?a-=(a-this.left)*b:a>=this.right&&(a-=(a-this.right)*b),a},restrictY:function(a,b){return b||(b=1),a<=this.top?a-=(a-this.top)*b:a>=this.bottom&&(a-=(a-this.bottom)*b),a},getSize:function(){return{width:this.right-this.left,height:this.bottom-this.top}},copy:function(){return new Ext.util.Region(this.top,this.right,this.bottom,this.left)},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(a){return this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y,this},round:function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this},equals:function(a){return this.top==a.top&&this.right==a.right&&this.bottom==a.bottom&&this.left==a.left}}),Ext.util.Region.getRegion=function(a){return Ext.fly(a).getPageBox(!0)},Ext.util.Region.from=function(a){return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},Ext.util.Point=Ext.extend(Object,{constructor:function(a,b){return this.x=a!=null&&!isNaN(a)?a:0,this.y=b!=null&&!isNaN(b)?b:0,this},copy:function(){return new Ext.util.Point(this.x,this.y)},copyFrom:function(a){return this.x=a.x,this.y=a.y,this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(a){return this.x==a.x&&this.y==a.y},isWithin:function(a,b){return Ext.isObject(b)||(b={x:b},b.y=b.x),this.x<=a.x+b.x&&this.x>=a.x-b.x&&this.y<=a.y+b.y&&this.y>=a.y-b.y},translate:function(a,b){a!=null&&!isNaN(a)&&(this.x+=a),b!=null&&!isNaN(b)&&(this.y+=b)},roundedEquals:function(a){return Math.round(this.x)==Math.round(a.x)&&Math.round(this.y)==Math.round(a.y)}}),Ext.util.Point.fromEvent=function(a){var b=a.changedTouches&&a.changedTouches.length>0?a.changedTouches[0]:a;return new Ext.util.Point(b.pageX,b.pageY)},Ext.util.Offset=Ext.extend(Object,{constructor:function(a,b){return this.x=a!=null&&!isNaN(a)?a:0,this.y=b!=null&&!isNaN(b)?b:0,this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x,this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){if(a instanceof Ext.util.Offset)return this.x==a.x&&this.y==a.y;throw new Error("offset must be an instance of Ext.util.Offset")},round:function(a){if(!isNaN(a)){var b=Math.pow(10,a);this.x=Math.round(this.x*b)/b,this.y=Math.round(this.y*b)/b}else this.x=Math.round(this.x),this.y=Math.round(this.y)},isZero:function(){return this.x==0&&this.y==0}}),Ext.util.Offset.fromObject=function(a){return new Ext.util.Offset(a.x,a.y)},Ext.Template=Ext.extend(Object,{constructor:function(a){var b=this,c=arguments,d=[],e,f,g;b.initialConfig={};if(Ext.isArray(a))a=a.join("");else if(c.length>1){for(f=0,g=c.length;f<g;f++)e=c[f],typeof e=="object"?(Ext.apply(b.initialConfig,e),Ext.apply(b,e)):d.push(e);a=d.join("")}b.html=a,b.compiled&&b.compile()},isTemplate:!0,disableFormats:!1,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,applyTemplate:function(a){function f(b,f,g,h){return g&&c?(h?h=[a[f]].concat((new Function("return ["+h+"];"))()):h=[a[f]],g.substr(0,5)=="this."?e[g.substr(5)].apply(e,h):d[g].apply(d,h)):a[f]!==undefined?a[f]:""}var b=this,c=b.disableFormats!==!0,d=Ext.util.Format,e=b;return b.compiled?b.compiled(a):b.html.replace(b.re,f)},set:function(a,b){var c=this;return c.html=a,c.compiled=null,b?c.compile():c},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){function fn(a,b,c,d){return c&&useFormat?(d=d?","+d:"",c.substr(0,5)!="this."?c="fm."+c+"(":c="this."+c.substr(5)+"("):(d="",c="(values['"+b+"'] == undefined ? '' : "),"',"+c+"values['"+b+"']"+d+") ,'"}var me=this,fm=Ext.util.Format,useFormat=me.disableFormats!==!0,body,bodyReturn;return bodyReturn=me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn),body="this.compiled = function(values){ return ['"+bodyReturn+"'].join('');};",eval(body),me},insertFirst:function(a,b,c){return this.doInsert("afterBegin",a,b,c)},insertBefore:function(a,b,c){return this.doInsert("beforeBegin",a,b,c)},insertAfter:function(a,b,c){return this.doInsert("afterEnd",a,b,c)},append:function(a,b,c){return this.doInsert("beforeEnd",a,b,c)},doInsert:function(a,b,c,d){b=Ext.getDom(b);var e=Ext.DomHelper.insertHtml(a,b,this.applyTemplate(c));return d?Ext.get(e,!0):e},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=this.applyTemplate(b),c?Ext.get(a.firstChild,!0):a.firstChild}}),Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.Template.from=function(a,b){return a=Ext.getDom(a),new Ext.Template(a.value||a.innerHTML,b||"")},Ext.XTemplate=Ext.extend(Ext.Template,{argsRe:/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,nameRe:/^<tpl\b[^>]*?for="(.*?)"/,ifRe:/^<tpl\b[^>]*?if="(.*?)"/,execRe:/^<tpl\b[^>]*?exec="(.*?)"/,constructor:function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var a=this,b=a.html,c=a.argsRe,d=a.nameRe,e=a.ifRe,f=a.execRe,g=0,h=[],i="values",j="parent",k="xindex",l="xcount",m="return ",n="with(values){ ",o,p,q,r,s,t,u,v,w;b=["<tpl>",b
,"</tpl>"].join("");while(o=b.match(c))s=null,t=null,u=null,p=o[0].match(d),q=o[0].match(e),r=o[0].match(f),s=q?q[1]:null,s&&(t=new Function(i,j,k,l,n+"try{"+m+Ext.util.Format.htmlDecode(s)+";}catch(e){return;}}")),s=r?r[1]:null,s&&(u=new Function(i,j,k,l,n+Ext.util.Format.htmlDecode(s)+";}")),v=p?p[1]:null,v&&(v==="."?v=i:v===".."&&(v=j),v=new Function(i,j,"try{"+n+m+v+";}}catch(e){return;}")),h.push({id:g,target:v,exec:u,test:t,body:o[1]||""}),b=b.replace(o[0],"{xtpl"+g+"}"),g=g+1;for(w=h.length-1;w>=0;--w)a.compileTpl(h[w]);a.master=h[h.length-1],a.tpls=h},applySubTemplate:function(a,b,c,d,e){var f=this,g=f.tpls[a];return g.compiled.call(f,b,c,d,e)},codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?\}/g,compileTpl:function(tpl){function fn(a,b,c,d,e){var f;return b.substr(0,4)=="xtpl"?"',this.applySubTemplate("+b.substr(4)+", values, parent, xindex, xcount),'":(b=="."?f='typeof values == "string" ? values : ""':b=="#"?f="xindex":b.substr(0,7)=="parent."?f=b:b.indexOf(".")!=-1?f="values."+b:f="values['"+b+"']",e&&(f="("+f+e+")"),c&&useFormat?(d=d?","+d:"",c.substr(0,5)!="this."?c="fm."+c+"(":c="this."+c.substr(5)+"("):(d="",c="("+f+" === undefined ? '' : "),"',"+c+f+d+"),'")}function codeFn(a,b){return"',("+b.replace(me.compileARe,"'")+"),'"}var fm=Ext.util.Format,me=this,useFormat=me.disableFormats!==!0,body,bodyReturn,evaluatedFn;return bodyReturn=tpl.body.replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn).replace(me.codeRe,codeFn),body="evaluatedFn = function(values, parent, xindex, xcount){return ['"+bodyReturn+"'].join('');};",eval(body),tpl.compiled=function(a,b,c,d){var e,f,g,h;if(tpl.test&&!tpl.test.call(me,a,b,c,d))return"";e=tpl.target?tpl.target.call(me,a,b):a;if(!e)return"";b=tpl.target?a:b;if(tpl.target&&Ext.isArray(e)){g=[],f=e.length;if(tpl.exec)for(h=0;h<f;h++)g[g.length]=evaluatedFn.call(me,e[h],b,h+1,f),tpl.exec.call(me,e[h],b,h+1,f);else for(h=0;h<f;h++)g[g.length]=evaluatedFn.call(me,e[h],b,h+1,f);return g.join("")}return tpl.exec&&tpl.exec.call(me,e,b,c,d),evaluatedFn.call(me,e,b,c,d)},this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}}),Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate,Ext.XTemplate.from=function(a,b){return a=Ext.getDom(a),new Ext.XTemplate(a.value||a.innerHTML,b||{})},Ext.util.Sorter=Ext.extend(Object,{direction:"ASC",constructor:function(a){Ext.apply(this,a);if(this.property==undefined&&this.sorterFn==undefined)throw"A Sorter requires either a property or a sorter function";this.sort=this.createSortFunction(this.sorterFn||this.defaultSorterFn)},createSortFunction:function(a){var b=this,c=b.property,d=b.direction,e=d.toUpperCase()=="DESC"?-1:1;return function(c,d){return e*a.call(b,c,d)}},defaultSorterFn:function(a,b){var c=this.getRoot(a)[this.property],d=this.getRoot(b)[this.property];return c>d?1:c<d?-1:0},getRoot:function(a){return this.root==undefined?a:a[this.root]}}),Ext.util.Filter=Ext.extend(Object,{anyMatch:!1,exactMatch:!1,caseSensitive:!1,constructor:function(a){Ext.apply(this,a),this.filter=this.filter||this.filterFn,this.filter==undefined&&(this.property!=undefined&&this.value!=undefined&&(this.filter=this.createFilterFn()),this.filterFn=this.filter)},createFilterFn:function(){var a=this,b=a.createValueMatcher(),c=a.property;return function(d){return b.test(a.getRoot.call(a,d)[c])}},getRoot:function(a){return this.root==undefined?a:a[this.root]},createValueMatcher:function(){var a=this,b=a.value,c=a.anyMatch,d=a.exactMatch,e=a.caseSensitive,f=Ext.util.Format.escapeRegex;return b.exec||(b=String(b),c===!0?b=f(b):(b="^"+f(b),d===!0&&(b+="$")),b=new RegExp(b,e?"":"i")),b}}),Ext.util.Functions={createInterceptor:function(a,b,c,d){var e=a;return Ext.isFunction(b)?function(){var e=this,f=arguments;return b.target=e,b.method=a,b.apply(c||e||window,f)!==!1?a.apply(e||window,f):d||null}:a},createDelegate:function(a,b,c,d){return Ext.isFunction(a)?function(){var e=c||arguments;if(d===!0)e=Array.prototype.slice.call(arguments,0),e=e.concat(c);else if(Ext.isNumber(d)){e=Array.prototype.slice.call(arguments,0);var f=[d,0].concat(c);Array.prototype.splice.apply(e,f)}return a.apply(b||window,e)}:a},defer:function(a,b,c,d,e){return a=Ext.util.Functions.createDelegate(a,c,d,e),b>0?setTimeout(a,b):(a(),0)},createSequence:function(a,b,c){return Ext.isFunction(b)?function(){var d=a.apply(this||window,arguments);return b.apply(c||this||window,arguments),d}:a}},Ext.defer=Ext.util.Functions.defer,Ext.createInterceptor=Ext.util.Functions.createInterceptor,Ext.createSequence=Ext.util.Functions.createSequence,Ext.createDelegate=Ext.util.Functions.createDelegate,Ext.util.Date={getElapsed:function(a,b){return Math.abs(a-(b||new Date))}},Ext.util.Numbers={toFixedBroken:.9.toFixed()!=1,constrain:function(a,b,c){return a=parseFloat(a),isNaN(b)||(a=Math.max(a,b)),isNaN(c)||(a=Math.min(a,c)),a},toFixed:function(a,b){if(Ext.util.Numbers.toFixedBroken){b=b||0;var c=Math.pow(10,b);return Math.round(a*c)/c}return a.toFixed(b)}},Ext.util.Format={defaultDateFormat:"m/d/Y",escapeRe:/('|\\)/g,trimRe:/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,formatRe:/\{(\d+)\}/g,escapeRegexRe:/([-.*+?^${}()|[\]\/\\])/g,ellipsis:function(a,b,c){if(a&&a.length>b){if(c){var d=a.substr(0,b-2),e=Math.max(d.lastIndexOf(" "),d.lastIndexOf("."),d.lastIndexOf("!"),d.lastIndexOf("?"));if(e!=-1&&e>=b-15)return d.substr(0,e)+"..."}return a.substr(0,b-3)+"..."}return a},escapeRegex:function(a){return a.replace(Ext.util.Format.escapeRegexRe,"\\$1")},escape:function(a){return a.replace(Ext.util.Format.escapeRe,"\\$1")},toggle:function(a,b,c){return a==b?c:b},trim:function(a){return a.replace(Ext.util.Format.trimRe,"")},leftPad:function(a,b,c){var d=String(a);c=c||" ";while(d.length<b)d=c+d;return d},format:function(a){var b=Ext.toArray(arguments,1);return a.replace(Ext.util.Format.formatRe,function(a,c){return b[c]})},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):a},htmlDecode:function(a){return a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},date:function(a,b){return a?(Ext.isDate(a)||(a=new Date(Date.parse(a))),a.dateFormat(b||Ext.util.Format.defaultDateFormat)):""}},Ext.LoadMask=Ext.extend(Ext.util.Observable,{msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,constructor:function(a,b){this.el=Ext.get(a),Ext.apply(this,b),this.addEvents("show","hide"),this.store&&this.bindStore(this.store,!0),Ext.LoadMask.superclass.constructor.call(this)},bindStore:function(a,b){!b&&this.store&&(this.mun(this.store,{scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad}),a||(this.store=null)),a&&(a=Ext.StoreMgr.lookup(a),this.mon(a,{scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad})),this.store=a,a&&a.isLoading()&&this.onBeforeLoad()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},isDisabled:function(){return this.disabled},onLoad:function(){this.el.unmask(),this.fireEvent("hide",this,this.el,this.store)},onBeforeLoad:function(){this.disabled||(this.el.mask(Ext.LoadingSpinner+'<div class="x-loading-msg">'+this.msg+"</div>",this.msgCls,!1),this.fireEvent("show",this,this.el,this.store))},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide(),this.clearListeners()}}),Ext.LoadingSpinner='<div class="x-loading-spinner"><span class="x-loading-top"></span><span class="x-loading-right"></span><span class="x-loading-bottom"></span><span class="x-loading-left"></span></div>',Ext.applyIf(Array.prototype,{indexOf:function(a,b){var c=this.length;b=b||0,b+=b<0?c:0;for(;b<c;++b)if(this[b]===a)return b;return-1},remove:function(a){var b=this.indexOf(a);return b!=-1&&this.splice(b,1),this},contains:function(a){return this.indexOf(a)!==-1}}),Ext.ComponentMgr=new Ext.AbstractManager({typeName:"xtype",create:function(a,b){if(a.isComponent)return a;var c=a.xtype||b,d=this.types[c];if(!d)throw"Attempting to create a component with an xtype that has not been registered: "+c;return new d(a)},registerType:function(a,b){this.types[a]=b,b[this.typeName]=a,b.prototype[this.typeName]=a}}),Ext.reg=function(){return Ext.ComponentMgr.registerType.apply(Ext.ComponentMgr,arguments)},Ext.create=function(){return Ext.ComponentMgr.create.apply(Ext.ComponentMgr,arguments)},Ext.ComponentQuery=new function(){var a=this,b=["var r = [],","i = 0,","it = arguments[0],","l = it.length,","c;","for (; i < l; i++) {","c = it[i].{0};","if (c) {","r.push(c);","}","}","return r;"].join(""),c=function(a,b){return b.method.apply(this,[a].concat(b.args))},d=function(a,b){var c=[],d,e=a.length,f,g=b!=">";for(d=0;d<e;d++)f=a[d],f.getRefItems&&(c=c.concat(f.getRefItems(g)));return c},e=function(a){var b=[],c,d=a.length,e;for(c=0;c<d;c++){e=a[c];while(!!(e=e.ownerCt))b.push(e)}return b},f=function(a,b,c){if(b=="*")return a.slice();var d=[],e,f=a.length,g;for(e=0;e<f;e++)g=a[e],g.isXType(b,c)&&d.push(g);return d},g=function(a,b){var c=[],d,e=a.length,f;for(d=0;d<e;d++)f=a[d],(f.el?f.el.hasCls(b):f.initCls().contains(b))&&c.push(f);return c},h=function(a,b,c,d){var e=[],f,g=a.length,h;for(f=0;f<g;f++)h=a[f],(d===undefined?!!h[b]:h[b]==d)&&e.push(h);return e},i=function(a,b){var c=[],d,e=a.length,f;for(d=0;d<e;d++)f=a[d],f.getItemId()==b&&c.push(f);return c},j=function(b,c,d){return a.pseudos[c](b,d)},k=/^(\s?([>\^])\s?|\s|$)/,l=/^(?:(#)?([\w-]+|\*)(?:\((true|false)\))?)|(?:\{([^\}]+)\})/,m=[{re:/^\.([\w-]+)(?:\((true|false)\))?/,method:f},{re:/^(?:[\[\{](?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,method:h},{re:/^#([\w-]+)/,method:i},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,method:j}];a.Query=Ext.extend(Object,{constructor:function(a){a=a||{},Ext.apply(this,a)},execute:function(a){var b=this.operations,f=b.length,g,h,i;a||(i=Ext.ComponentMgr.all.getArray());for(h=0;h<f;h++){g=b[h],g.mode=="^"?i=e(i||[a]):g.mode?i=d(i||[a],g.mode):i=c(i||d([a]),g);if(h==f-1)return i}return[]},is:function(a){var b=this.operations,d=b.length,e,f=Ext.isArray(a)?a:[a];for(e=0;e<d&&f.length;e++)f=c(f,b[e]);return f.length!=0}}),Ext.apply(this,{cache:{},pseudos:{},query:function(a,b){var c=a.split(","),d=c.length,e,f,g=[],h=[],i={},j,k;for(e=0;e<d;e++)a=Ext.util.Format.trim(c[e]),f=this.cache[a],f||(this.cache[a]=f=this.parse(a)),g=g.concat(f.execute(b));if(d>1){j=g.length;for(e=0;e<j;e++)k=g[e],i[k.id]||(h.push(k),i[k.id]=!0);g=h}return g},is:function(a,b){if(!b)return!0;var c=this.cache[b];return c||(this.cache[b]=c=this.parse(b)),c.is(a)},parse:function(c){var d=[],e=m.length,h,j,n,o,p,q,r,s;while(c&&h!=c){h=c,j=c.match(l),j&&(n=j[1],n=="#"?d.push({method:i,args:[Ext.util.Format.trim(j[2])]}):n=="."?d.push({method:g,args:[Ext.util.Format.trim(j[2])]}):j[4]?d.push({method:new Function(Ext.util.Format.format(b,j[4])),args:[]}):d.push({method:f,args:[Ext.util.Format.trim(j[2]),Boolean(j[3])]}),c=c.replace(j[0],""));while(!(o=c.match(k)))for(r=0;c&&r<e;r++){s=m[r],p=c.match(s.re);if(p){d.push({method:s.method,args:p.splice(1)}),c=c.replace(p[0],"");break}if(r==e-1)throw'Invalid ComponentQuery selector: "'+arguments[0]+'"'}o[1]&&(d.push({mode:o[2]||o[1]}),c=c.replace(o[0],""))}return new a.Query({operations:d})}})},Ext.PluginMgr=new Ext.AbstractManager({typeName:"ptype",create:function(a,b){var c=this.types[a.ptype||b];return c.init?c:new c(a)},findByType:function(a,b){var c=[],d=this.types;for(var e in d){if(!d.hasOwnProperty(e))continue;var f=d[e];f.type==a&&(!b||b===!0&&f.isDefault)&&c.push(f)}return c}}),Ext.preg=function(){return Ext.PluginMgr.registerType.apply(Ext.PluginMgr,arguments)},Ext.EventManager={optionsRe:/^(?:capture|scope|delay|buffer|single|stopEvent|disableLocking|preventDefault|stopPropagation|normalized|args|delegate|horizontal|vertical|dragThreshold|holdThreshold|doubleTapThreshold|cancelThreshold|singleTapThreshold|fireClickEvent)$/,touchRe:/^(?:pinch|pinchstart|pinchend|tap|singletap|doubletap|swipe|swipeleft|swiperight|drag|dragstart|dragend|touchdown|touchstart|touchmove|touchend|taphold|tapstart|tapcancel)$/i,addListener:function(a,b,c,d,e){if(Ext.isObject(b)){this.handleListenerConfig(a,b);return}var f=Ext.getDom(a);if(!f)throw'Error listening for "'+b+'". Element "'+a+"\" doesn't exist.";if(!c)throw'Error listening for "'+b+'". No handler function specified';var g=this.touchRe.test(b),h=this.createListenerWrap(f,b,c,d,e,g);this.getEventListenerCache(f,b).push({fn:c,wrap:h,scope:d}),g?Ext.gesture.Manager.addEventListener(f,b,h,e):(e=e||{},f.addEventListener(b,h,e.capture||!1))},removeListener:function(a,b,c,d){if(Ext.isObject(b)){this.handleListenerConfig(a,b,!0);return}var e=Ext.getDom(a),f=this.getEventListenerCache(e,b),g=f.length,h,i,j,k;while(g--){i=f[g];if(i&&(!c||i.fn==c)&&(!d||i.scope===d)){j=i.wrap,j.task&&(clearTimeout(j.task),delete j.task),h=j.tasks&&j.tasks.length;if(h){while(h--)clearTimeout(j.tasks[h]);delete j.tasks}this.touchRe.test(b)?Ext.gesture.Manager.removeEventListener(e,b,j):e.removeEventListener(b,j,!1),f.splice(g,1)}}},removeAll:function(a){var b=Ext.getDom(a),c=this.getElementEventCache(b),d;for(d in c){if(!c.hasOwnProperty(d))continue;this.removeListener(b,d)}Ext.cache[b.id].events={}},purgeElement:function(a,b,c){var d=Ext.getDom(a),e=0,f;c?this.removeListener(d,c):this.removeAll(d);if(b&&d&&d.childNodes)for(f=a.childNodes.length;e<f;e++)this.purgeElement(a.childNodes[e],b,c)},handleListenerConfig:function(a,b,c){var d,e;for(d in b){if(!b.hasOwnProperty(d))continue;this.optionsRe.test(d)||(e=b[d],Ext.isFunction(e)?this[(c?"remove":"add")+"Listener"](a,d,e,b.scope,b):this[(c?"remove":"add")+"Listener"](a,d,b.fn,b.scope,b))}},getId:function(a){var b=!1,c;a=Ext.getDom(a);if(a===document||a===window)b=!0;return c=Ext.id(a),Ext.cache[c]||(Ext.Element.addToCache(new Ext.Element(a),c),b&&(Ext.cache[c].skipGarbageCollection=!0)),c},createListenerWrap:function(a,b,c,d,e,f){e=Ext.isObject(e)?e:{};var g=["if(!window.Ext) {return;}"];f?g.push("e = new Ext.TouchEventObjectImpl(e, args);"):e.buffer||e.delay?g.push("e = new Ext.EventObjectImpl(e);"):g.push("e = Ext.EventObject.setEvent(e);"),e.delegate?(g.push('var t = e.getTarget("'+e.delegate+'", this);'),g.push("if(!t) {return;}")):g.push("var t = e.target;"),e.target&&g.push("if(e.target !== o.target) {return;}"),e.stopEvent?g.push("e.stopEvent();"):(e.preventDefault&&g.push("e.preventDefault();"),e.stopPropagation&&g.push("e.stopPropagation();")),e.normalized===!1&&g.push("e = e.browserEvent;"),e.buffer&&(g.push("(wrap.task && clearTimeout(wrap.task));"),g.push("wrap.task = setTimeout(function(){")),e.delay&&(g.push("wrap.tasks = wrap.tasks || [];"),g.push("wrap.tasks.push(setTimeout(function(){")),g.push("fn.call(scope || dom, e, t, o);"),e.single&&g.push("Ext.EventManager.removeListener(dom, ename, fn, scope);"),e.delay&&g.push("}, "+e.delay+"));"),e.buffer&&g.push("}, "+e.buffer+");");var h=new Function("e","o","fn","scope","ename","dom","wrap","args",g.join("\n"));return function(f,g){h.call(a,f,e,c,d,b,a,arguments.callee,g)}},getEventListenerCache:function(a,b){var c=this.getElementEventCache(a);return c[b]||(c[b]=[])},getElementEventCache:function(a){var b=Ext.cache[this.getId(a)];return b.events||(b.events={})},onDocumentReady:function(a,b,c){var d=this,e=d.readyEvent,f;if(Ext.isReady)e||(e=new Ext.util.Event),e.addListener(a,b,c),e.fire(),e.listeners=[];else{if(!e){e=d.readyEvent=new Ext.util.Event;var g=function(){Ext.isReady=!0,window.removeEventListener("load",arguments.callee,!1),f&&clearInterval(f),setTimeout(function(){Ext.supports.init(),Ext.gesture.Manager.init(),Ext.orientation=Ext.Element.getOrientation(),e.fire({orientation:Ext.orientation,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}),e.listeners=[]},50)};f=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(f),f=null,g())},10),window.addEventListener("load",g,!1)}c=c||{},c.delay=c.delay||1,e.addListener(a,b,c)}},onWindowResize:function(a,b,c){var d=this,e=d.resizeEvent;if(!e){d.resizeEvent=e=new Ext.util.Event;var f=function(){e.fire(Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight())};this.addListener(window,"resize",f,this)}e.addListener(a,b,c)},onOrientationChange:function(a,b,c){var d=this,e=d.orientationEvent;if(!e){d.orientationEvent=e=new Ext.util.Event;var f=function(a,b){Ext.orientation=Ext.Viewport.getOrientation(),e.fire(Ext.orientation,b.width,b.height)};Ext.Viewport.on("resize",f,this)}e.addListener(a,b,c)},unOrientationChange:function(a,b,c){var d=this,e=d.orientationEvent;e&&e.removeListener(a,b,c)}},Ext.EventManager.on=Ext.EventManager.addListener,Ext.EventManager.un=Ext.EventManager.removeListener,Ext.onReady=Ext.EventManager.onDocumentReady,Ext.EventObjectImpl=Ext.extend(Object,{constructor:function(a){a&&this.setEvent(a.browserEvent||a)},setEvent:function(a){var b=this;if(a==b||a&&a.browserEvent)return a;b.browserEvent=a;if(a){b.type=a.type;var c=a.target;b.target=c&&c.nodeType==3?c.parentNode:c,b.xy=[a.pageX,a.pageY],b.timestamp=a.timeStamp}else b.target=null,b.xy=[0,0];return b},stopEvent:function(){this.stopPropagation(),this.preventDefault()},preventDefault:function(){this.browserEvent&&this.browserEvent.preventDefault()},stopPropagation:function(){this.browserEvent&&this.browserEvent.stopPropagation()},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(a,b,c){return a?Ext.fly(this.target).findParent(a,b,c):c?Ext.get(this.target):this.target},getTime:function(){return this.timestamp}}),Ext.EventObject=new Ext.EventObjectImpl,Ext.is={init:function(a){var b=this,c=b.platforms,d=c.length,e,f;a=a||window.navigator;for(e=0;e<d;e++)f=c[e],b[f.identity]=f.regex.test(a[f.property]);b.Desktop=b.Mac||b.Windows||b.Linux&&!b.Android,b.iOS=b.iPhone||b.iPad||b.iPod,b.Standalone=!!a.standalone,e=b.Android&&/Android\s(\d+\.\d+)/.exec(a.userAgent),e&&(b.AndroidVersion=e[1],b.AndroidMajorVersion=parseInt(e[1],10)),b.Tablet=b.iPad||b.Android&&b.AndroidMajorVersion===3,b.Phone=!b.Desktop&&!b.Tablet,b.MultiTouch=!b.Blackberry&&!b.Desktop&&!(b.Android&&b.AndroidVersion<3)},platforms:[{property:"platform",regex:/iPhone/i,identity:"iPhone"},{property:"platform",regex:/iPod/i,identity:"iPod"},{property:"userAgent",regex:/iPad/i,identity:"iPad"},{property:"userAgent",regex:/Blackberry/i,identity:"Blackberry"},{property:"userAgent",regex:/Android/i,identity:"Android"},{property:"platform",regex:/Mac/i,identity:"Mac"},{property:"platform",regex:/Win/i,identity:"Windows"},{property:"platform",regex:/Linux/i,identity:"Linux"}]},Ext.is.init(),Ext.supports={init:function(){var a=document,b=a.createElement("div"),c=this.tests,d=c.length,e,f;b.innerHTML=['<div style="height:30px;width:50px;">','<div style="height:20px;width:20px;"></div>',"</div>",'<div style="float:left; background-color:transparent;"></div>'].join(""),a.body.appendChild(b);for(e=0;e<d;e++)f=c[e],this[f.identity]=f.fn.call(this,a,b);a.body.removeChild(b)},OrientationChange:typeof window.orientation!="undefined"&&"onorientationchange"in window,DeviceMotion:"ondevicemotion"in window,Touch:"ontouchstart"in window&&!Ext.is.Desktop,tests:[{identity:"Transitions",fn:function(a,b){var c=["webkit","Moz","o","ms","khtml"],d="TransitionEnd",e=[c[0]+d,"transitionend",c[2]+d,c[3]+d,c[4]+d],f=c.length,g=0,h=!1;b=Ext.get(b);for(;g<f;g++)if(b.getStyle(c[g]+"TransitionProperty")){Ext.supports.CSS3Prefix=c[g],Ext.supports.CSS3TransitionEnd=e[g],h=!0;break}return h}},{identity:"RightMargin",fn:function(a,b,c){return c=a.defaultView,!c||c.getComputedStyle(b.firstChild.firstChild,null).marginRight=="0px"}},{identity:"TransparentColor",fn:function(a,b,c){return c=a.defaultView,!c||c.getComputedStyle(b.lastChild,null).backgroundColor=="transparent"}},{identity:"SVG",fn:function(a){return!!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}},{identity:"Canvas",fn:function(a){return!!a.createElement("canvas").getContext}},{identity:"VML",fn:function(a){var b=a.createElement("div");return b.innerHTML="<!--[if vml]><br><br><![endif]-->",b.childNodes.length==2}},{identity:"Float",fn:function(a,b){return!!b.lastChild.style.cssFloat}},{identity:"AudioTag",fn:function(a){return!!a.createElement("audio").canPlayType}},{identity:"History",fn:function(){return!!window.history&&!!history.pushState}},{identity:"CSS3DTransform",fn:function(){return typeof WebKitCSSMatrix!="undefined"&&(new WebKitCSSMatrix).hasOwnProperty("m41")}},{identity:"CSS3LinearGradient",fn:function(a,b){var c="background-image:",d="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",e="linear-gradient(left top, black, white)",f="-moz-"+e,g=[c+d,c+e,c+f];return b.style.cssText=g.join(";"),(""+b.style.backgroundImage).indexOf("gradient")!==-1}},{identity:"CSS3BorderRadius",fn:function(a,b){var c=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],d=!1,e;for(e=0;e<c.length;e++)if(document.body.style[c[e]]!==undefined)return d=!0;return d}},{identity:"GeoLocation",fn:function(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"||typeof google!="undefined"&&typeof google.gears!="undefined"}}]},Ext.data.Batch=Ext.extend(Ext.util.Observable,{autoStart:!1,current:-1,total:0,isRunning:!1,isComplete:!1,hasException:!1,pauseOnException:!0,constructor:function(a){this.addEvents("complete","exception","operationcomplete","operation-complete"),Ext.data.Batch.superclass.constructor.call(this,a),this.operations=[]},add:function(a){this.total++,a.setBatch(this),this.operations.push(a)},start:function(){this.hasException=!1,this.isRunning=!0,this.runNextOperation()},runNextOperation:function(){this.runOperation(this.current+1)},pause:function(){this.isRunning=!1},runOperation:function(a){var b=this.operations,c=b[a];if(c==undefined)this.isRunning=!1,this.isComplete=!0,this.fireEvent("complete",this,b[b.length-1]);else{this.current=a;var d=function(a){var b=a.hasException();b?(this.hasException=!0,this.fireEvent("exception",this,a)):(this.fireEvent("operation-complete",this,a),this.fireEvent("operationcomplete",this,a)),b&&this.pauseOnException?this.pause():(a.setCompleted(),this.runNextOperation())};c.setStarted(),this.proxy[c.action](c,d,this)}}}),Ext.data.Model=Ext.extend(Ext.util.Stateful,{evented:!1,isModel:!0,phantom:!1,idProperty:"id",constructor:function(a,b){a=a||{},this.internalId=b||b===0?b:Ext.data.Model.id(this),Ext.data.Model.superclass.constructor.apply(this);var c=this.fields.items,d=c.length,e,f,g;for(g=0;g<d;g++)e=c[g],f=e.name,a[f]==undefined&&(a[f]=e.defaultValue);this.set(a),this.dirty=!1,this.getId()&&(this.phantom=!1),typeof this.init=="function"&&this.init()},validate:function(){var a=new Ext.data.Errors,b=this.validations,c=Ext.data.validations,d,e,f,g,h,i;if(b){d=b.length;for(i=0;i<d;i++)e=b[i],f=e.field||e.name,h=e.type,g=c[h](e,this.get(f)),g||a.add({field:f,message:e.message||c[h+"Message"]})}return a},getProxy:function(){return this.constructor.proxy},save:function(a){var b=this,c=b.phantom?"create":"update";a=a||{},Ext.apply(a,{records:[b],action:c});var d=new Ext.data.Operation(a),e=a.success,f=a.failure,g=a.callback,h=a.scope,i,j=function(a){i=a.getRecords()[0],a.wasSuccessful()?(b.set(i.data),i.dirty=!1,typeof e=="function"&&e.call(h,i,a)):typeof f=="function"&&f.call(h,i,a),typeof g=="function"&&g.call(h,i,a)};return b.getProxy()[c](d,j,b),b},getId:function(){return this.get(this.idProperty)},setId:function(a){this.set(this.idProperty,a)},join:function(a){this.store=a},unjoin:function(a){delete this.store},afterEdit:function(){this.callStore("afterEdit")},afterReject:function(){this.callStore("afterReject")},afterCommit:function(){this.callStore("afterCommit")},callStore:function(a){var b=this.store;b!=undefined&&typeof b[a]=="function"&&b[a](this)}}),Ext.apply(Ext.data.Model,{setProxy:function(a){return a=Ext.data.ProxyMgr.create(a),a.setModel(this),this.proxy=a,a},load:function(a,b){b=Ext.applyIf(b||{},{action:"read",id:a});var c=new Ext.data.Operation(b),d=b.callback,e=b.success,f=b.failure,g=b.scope,h,i;i=function(a){h=a.getRecords()[0],a.wasSuccessful()?typeof e=="function"&&e.call(g,h,a):typeof f=="function"&&f.call(g,h,a),typeof d=="function"&&d.call(g,h,a)},this.proxy.read(c,i,this)}}),Ext.data.Model.id=function(a){return a.phantom=!0,[Ext.data.Model.PREFIX,"-",Ext.data.Model.AUTO_ID++].join("")},Ext.ns("Ext.data.Record"),Ext.data.Record.id=Ext.data.Model.id,Ext.data.Model.PREFIX="ext-record",Ext.data.Model.AUTO_ID=1,Ext.data.Model.EDIT="edit",Ext.data.Model.REJECT="reject",Ext.data.Model.COMMIT="commit",Ext.data.Association=Ext.extend(Object,{primaryKey:"id",constructor:function(a){Ext.apply(this,a);var b=Ext.ModelMgr.types,c=a.ownerModel,d=a.associatedModel,e=b[c],f=b[d],g;if(e==undefined)throw new Error("The configured ownerModel was not valid (you tried "+c+")");if(f==undefined)throw new Error("The configured associatedModel was not valid (you tried "+d+")");this.ownerModel=e,this.associatedModel=f,Ext.applyIf(this,{ownerName:c,associatedName:d})}}),Ext.data.HasManyAssociation=Ext.extend(Ext.data.Association,{constructor:function(a){Ext.data.HasManyAssociation.superclass.constructor.apply(this,arguments);var b=this.ownerModel.prototype,c=this.name;Ext.applyIf(this,{storeName:c+"Store",foreignKey:this.ownerName.toLowerCase()+"_id"}),b[c]=this.createStore()},createStore:function(){var a=this.associatedModel,b=this.storeName,c=this.foreignKey,d=this.primaryKey,e=this.filterProperty,f=this.storeConfig||{};return function(){var g=this,h,i,j={};return g[b]==undefined&&(e?i={property:e,value:g.get(e),exactMatch:!0}:i={property:c,value:g.get(d),exactMatch:!0},j[c]=g.get(d),h=Ext.apply({},f,{model:a,filters:[i],remoteFilter:!1,modelDefaults:j}),g[b]=new Ext.data.Store(h)),g[b]}}}),Ext.data.BelongsToAssociation=Ext.extend(Ext.data.Association,{constructor:function(a){Ext.data.BelongsToAssociation.superclass.constructor.apply(this,arguments);var b=this,c=b.ownerModel.prototype,d=b.associatedName,e=b.getterName||"get"+d,f=b.setterName||"set"+d;Ext.applyIf(b,{name:d,foreignKey:d.toLowerCase()+"_id",instanceName:d+"BelongsToInstance"}),c[e]=b.createGetter(),c[f]=b.createSetter()},createSetter:function(){var a=this,b=a.ownerModel,c=a.associatedModel,d=a.foreignKey,e=a.primaryKey;return function(a,b,c){this.set(d,a),typeof b=="function"&&(b={callback:b,scope:c||this});if(Ext.isObject(b))return this.save(b)}},createGetter:function(){var a=this,b=a.ownerModel,c=a.associatedName,d=a.associatedModel,e=a.foreignKey,f=a.primaryKey,g=a.instanceName;return function(a,b){a=a||{};var h=this.get(e),i,j;if(this[g]==undefined)i=Ext.ModelMgr.create({},c),i.set(f,h),typeof a=="function"&&(a={callback:a,scope:b||this}),d.load(h,a);else return i=this[g],typeof a=="function"&&a.call(b||this,i),a.success&&a.success.call(b||this,i),a.callback&&a.callback.call(b||this,i),i}}}),Ext.data.PolymorphicAssociation=Ext.extend(Ext.data.Association,{constructor:function(a){Ext.data.PolymorphicAssociation.superclass.constructor.call(this,a);var b=this.ownerModel.prototype,c=this.name;Ext.applyIf(this,{associationIdField:this.ownerName.toLowerCase()+"_id"}),b[c]=this.createStore()},createStore:function(){var a=this,b=this.ownerName,c=this.name+"Store",d=this.associatedModel,e=this.primaryKey,f="associated_id",g="associated_model";return function(){var h=this,i={},j,k;return h[c]==undefined&&(k=[{property:f,value:h.get(e),exactMatch:!0},{property:g,value:b,exactMatch:!0}],i[f]=h.get(e),i[g]=b,j=Ext.apply({},a.storeConfig||{},{model:d,filters:k,remoteFilter:!1,modelDefaults:i}),h[c]=new Ext.data.Store(j)),h[c]}}}),Ext.data.validations={presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",presence:function(a,b){return b==undefined&&(b=a),!!b},length:function(a,b){if(b==undefined)return!1;var c=b.length,d=a.min,e=a.max;return d&&c<d||e&&c>e?!1:!0},format:function(a,b){return!!a.matcher&&!!a.matcher.test(b)},inclusion:function(a,b){return a.list&&a.list.indexOf(b)!=-1},exclusion:function(a,b){return a.list&&a.list.indexOf(b)==-1}},Ext.data.Errors=Ext.extend(Ext.util.MixedCollection,{isValid:function(){return this.length==0},getByField:function(a){var b=[],c,d,e;for(e=0;e<this.length;e++)c=this.items[e],c.field==a&&b.push(c);return b}}),Ext.data.Field=Ext.extend(Object,{constructor:function(a){Ext.isString(a)&&(a={name:a}),Ext.apply(this,a);var b=Ext.data.Types,c=this.sortType,d;this.type?Ext.isString(this.type)&&(this.type=b[this.type.toUpperCase()]||b.AUTO):this.type=b.AUTO,Ext.isString(c)?this.sortType=Ext.data.SortTypes[c]:Ext.isEmpty(c)&&(this.sortType=this.type.sortType),this.convert||(this.convert=this.type.convert)},dateFormat:null,useNull:!1,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:!0}),Ext.data.SortTypes={none:function(a){return a},stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){return a?Ext.isDate(a)?a.getTime():Date.parse(String(a)):0},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b}},Ext.data.Types=new function(){var a=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\$,%]/g,AUTO:{convert:function(a){return a},sortType:a.none,type:"auto"},STRING:{convert:function(a){return a===undefined||a===null?"":String(a)},sortType:a.asUCString,type:"string"},INT:{convert:function(a){return a!==undefined&&a!==null&&a!==""?parseInt(String(a).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:a.none,type:"int"},FLOAT:{convert:function(a){return a!==undefined&&a!==null&&a!==""?parseFloat(String(a).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:a.none,type:"float"},BOOL:{convert:function(a){return a===!0||a==="true"||a==1},sortType:a.none,type:"bool"},DATE:{convert:function(a){var b=this.dateFormat;if(!a)return null;if(Ext.isDate(a))return a;if(b)return b=="timestamp"?new Date(a*1e3):b=="time"?new Date(parseInt(a,10)):Date.parseDate(a,b);var c=Date.parse(a);return c?new Date(c):null},sortType:a.asDate,type:"date"}}),Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})},Ext.ModelMgr=new Ext.AbstractManager({typeName:"mtype",defaultProxyType:"ajax",associationStack:[],registerType:function(a,b){var c=Ext.PluginMgr,d=c.findByType("model",!0),e=b.fields||[],f=b.associations||[],g=b.belongsTo,h=b.hasMany,i=b.extend,j=b.plugins||[],k,l,m,n,o,p,q,r;if(g){Ext.isArray(g)||(g=[g]);for(n=0;n<g.length;n++)k=g[n],Ext.isObject(k)||(k={model:k}),Ext.apply(k,{type:"belongsTo"}),f.push(k);delete b.belongsTo}if(h){Ext.isArray(h)||(h=[h]);for(n=0;n<h.length;n++)k=h[n],Ext.isObject(k)||(k={model:k}),Ext.apply(k,{type:"hasMany"}),f.push(k);delete b.hasMany}i?(o=this.types[i],p=o.prototype,q=p.validations,r=o.proxy,e=p.fields.items.concat(e),f=p.associations.items.concat(f),b.validations=q?q.concat(b.validations):b.validations):(o=Ext.data.Model,r=b.proxy),l=Ext.extend(o,b);for(n=0,m=j.length;n<m;n++)d.push(c.create(j[n]));this.types[a]=l,Ext.override(l,{plugins:d,fields:this.createFields(e),associations:this.createAssociations(f,a)}),l.modelName=a,Ext.data.Model.setProxy.call(l,r||this.defaultProxyType),l.getProxy=l.prototype.getProxy,l.load=function(){Ext.data.Model.load.apply(this,arguments)};for(n=0,m=d.length;n<m;n++)d[n].bootstrap(l,b);return l.defined=!0,this.onModelDefined(l),l},onModelDefined:function(a){var b=this.associationStack,c=b.length,d=[],e,f;for(f=0;f<c;f++)e=b[f],e.associatedModel==a.modelName&&d.push(e);c=d.length;for(f=0;f<c;f++)this.addAssociation(d[f],this.types[d[f].ownerModel].prototype.associations),b.remove(d[f])},createAssociations:function(a,b){var c=a.length,d,e,f;e=new Ext.util.MixedCollection(!1,function(a){return a.name});for(d=0;d<c;d++)f=a[d],Ext.apply(f,{ownerModel:b,associatedModel:f.model}),this.types[f.model]==undefined?this.associationStack.push(f):this.addAssociation(f,e);return e},addAssociation:function(a,b){var c=a.type;c=="belongsTo"&&b.add(new Ext.data
.BelongsToAssociation(a)),c=="hasMany"&&b.add(new Ext.data.HasManyAssociation(a)),c=="polymorphic"&&b.add(new Ext.data.PolymorphicAssociation(a))},createFields:function(a){var b=a.length,c,d;d=new Ext.util.MixedCollection(!1,function(a){return a.name});for(c=0;c<b;c++)d.add(new Ext.data.Field(a[c]));return d},getModel:function(a){var b=a;return typeof b=="string"&&(b=this.types[b]),b},create:function(a,b,c){var d=typeof b=="function"?b:this.types[b||a.name];return new d(a,c)}}),Ext.regModel=function(){return Ext.ModelMgr.registerType.apply(Ext.ModelMgr,arguments)},Ext.data.Operation=Ext.extend(Object,{synchronous:!0,action:undefined,filters:undefined,sorters:undefined,group:undefined,start:undefined,limit:undefined,batch:undefined,started:!1,running:!1,complete:!1,success:undefined,exception:!1,error:undefined,constructor:function(a){Ext.apply(this,a||{})},setStarted:function(){this.started=!0,this.running=!0},setCompleted:function(){this.complete=!0,this.running=!1},setSuccessful:function(){this.success=!0},setException:function(a){this.exception=!0,this.success=!1,this.running=!1,this.error=a},markStarted:function(){return console.warn("Operation: markStarted has been deprecated. Please use setStarted"),this.setStarted()},markCompleted:function(){return console.warn("Operation: markCompleted has been deprecated. Please use setCompleted"),this.setCompleted()},markSuccessful:function(){return console.warn("Operation: markSuccessful has been deprecated. Please use setSuccessful"),this.setSuccessful()},markException:function(){return console.warn("Operation: markException has been deprecated. Please use setException"),this.setException()},hasException:function(){return this.exception===!0},getError:function(){return this.error},getRecords:function(){var a=this.getResultSet();return a==undefined?this.records:a.records},getResultSet:function(){return this.resultSet},isStarted:function(){return this.started===!0},isRunning:function(){return this.running===!0},isComplete:function(){return this.complete===!0},wasSuccessful:function(){return this.isComplete()&&this.success===!0},setBatch:function(a){this.batch=a},allowWrite:function(){return this.action!="read"}}),Ext.data.ProxyMgr=new Ext.AbstractManager({create:function(a){if(a==undefined||typeof a=="string")a={type:a};if(a instanceof Ext.data.Proxy)return a;Ext.applyIf(a,{type:this.defaultProxyType,model:this.model});var b=a[this.typeName]||a.type,c=this.types[b];if(c==undefined)throw new Error(Ext.util.Format.format("The '{0}' type has not been registered with this manager",b));return new c(a)}}),Ext.data.ReaderMgr=new Ext.AbstractManager({typeName:"rtype"}),Ext.data.Request=Ext.extend(Object,{action:undefined,params:undefined,method:"GET",url:undefined,constructor:function(a){Ext.apply(this,a)}}),Ext.data.ResultSet=Ext.extend(Object,{loaded:!0,count:0,total:0,success:!1,constructor:function(a){Ext.apply(this,a),this.totalRecords=this.total,a.count==undefined&&(this.count=this.records.length)}}),Ext.data.AbstractStore=Ext.extend(Ext.util.Observable,{remoteSort:!1,remoteFilter:!1,autoLoad:!1,autoSave:!1,batchUpdateMode:"operation",filterOnLoad:!0,sortOnLoad:!0,defaultSortDirection:"ASC",implicitModel:!1,defaultProxyType:"memory",isDestroyed:!1,isStore:!0,constructor:function(a){this.addEvents("add","remove","update","datachanged","beforeload","load","beforesync"),Ext.apply(this,a),this.removed=[],this.sortToggle={},Ext.data.AbstractStore.superclass.constructor.apply(this,arguments),this.model=Ext.ModelMgr.getModel(a.model),Ext.applyIf(this,{modelDefaults:{}}),!this.model&&a.fields&&(this.model=Ext.regModel("ImplicitModel-"+this.storeId||Ext.id(),{fields:a.fields}),delete this.fields,this.implicitModel=!0),this.setProxy(a.proxy||this.model.proxy),this.id&&!this.storeId&&(this.storeId=this.id,delete this.id),this.storeId&&Ext.StoreMgr.register(this),this.sorters=new Ext.util.MixedCollection,this.sorters.addAll(this.decodeSorters(a.sorters)),this.filters=new Ext.util.MixedCollection,this.filters.addAll(this.decodeFilters(a.filters))},setProxy:function(a){return a instanceof Ext.data.Proxy?a.setModel(this.model):(Ext.applyIf(a,{model:this.model}),a=Ext.data.ProxyMgr.create(a)),this.proxy=a,this.proxy},getProxy:function(){return this.proxy},create:function(a,b){var c=Ext.ModelMgr.create(Ext.applyIf(a,this.modelDefaults),this.model.modelName),d;return b=b||{},Ext.applyIf(b,{action:"create",records:[c]}),d=new Ext.data.Operation(b),this.proxy.create(d,this.onProxyWrite,this),c},read:function(){return this.load.apply(this,arguments)},onProxyRead:Ext.emptyFn,update:function(a){a=a||{},Ext.applyIf(a,{action:"update",records:this.getUpdatedRecords()});var b=new Ext.data.Operation(a);return this.proxy.update(b,this.onProxyWrite,this)},onProxyWrite:Ext.emptyFn,destroy:function(a){a=a||{},Ext.applyIf(a,{action:"destroy",records:this.getRemovedRecords()});var b=new Ext.data.Operation(a);return this.proxy.destroy(b,this.onProxyWrite,this)},onBatchOperationComplete:function(a,b){return this.onProxyWrite(b)},onBatchComplete:function(a,b){var c=a.operations,d=c.length,e;this.suspendEvents();for(e=0;e<d;e++)this.onProxyWrite(c[e]);this.resumeEvents(),this.fireEvent("datachanged",this)},onBatchException:function(a,b){},filterNew:function(a){return a.phantom==!0||a.needsAdd==!0},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},filterDirty:function(a){return a.dirty==!0},getRemovedRecords:function(){return this.removed},sort:function(a,b){},decodeSorters:function(a){Ext.isArray(a)||(a==undefined?a=[]:a=[a]);var b=a.length,c=Ext.util.Sorter,d,e;for(e=0;e<b;e++)d=a[e],d instanceof c||(Ext.isString(d)&&(d={property:d}),Ext.applyIf(d,{root:"data",direction:"ASC"}),d.fn&&(d.sorterFn=d.fn),typeof d=="function"&&(d={sorterFn:d}),a[e]=new c(d));return a},filter:function(a,b){},createSortFunction:function(a,b){b=b||"ASC";var c=b.toUpperCase()=="DESC"?-1:1,d=this.model.prototype.fields,e=d.get(a).sortType;return function(b,d){var f=e(b.data[a]),g=e(d.data[a]);return c*(f>g?1:f<g?-1:0)}},decodeFilters:function(a){Ext.isArray(a)||(a==undefined?a=[]:a=[a]);var b=a.length,c=Ext.util.Filter,d,e;for(e=0;e<b;e++)d=a[e],d instanceof c||(Ext.apply(d,{root:"data"}),d.fn&&(d.filterFn=d.fn),typeof d=="function"&&(d={filterFn:d}),a[e]=new c(d));return a},clearFilter:function(a){},isFiltered:function(){},filterBy:function(a,b){},sync:function(){var a=this,b={},c=a.getNewRecords(),d=a.getUpdatedRecords(),e=a.getRemovedRecords(),f=!1;c.length>0&&(b.create=c,f=!0),d.length>0&&(b.update=d,f=!0),e.length>0&&(b.destroy=e,f=!0),f&&a.fireEvent("beforesync",b)!==!1&&a.proxy.batch(b,a.getBatchListeners())},getBatchListeners:function(){var a={scope:this,exception:this.onBatchException};return this.batchUpdateMode=="operation"?a.operationcomplete=this.onBatchOperationComplete:a.complete=this.onBatchComplete,a},save:function(){return this.sync.apply(this,arguments)},load:function(a){var b=this,c;return a=a||{},Ext.applyIf(a,{action:"read",filters:b.filters.items,sorters:b.sorters.items}),c=new Ext.data.Operation(a),b.fireEvent("beforeload",b,c)!==!1&&(b.loading=!0,b.proxy.read(c,b.onProxyLoad,b)),b},afterEdit:function(a){this.fireEvent("update",this,a,Ext.data.Model.EDIT)},afterReject:function(a){this.fireEvent("update",this,a,Ext.data.Model.REJECT)},afterCommit:function(a){this.autoSave&&this.sync(),this.fireEvent("update",this,a,Ext.data.Model.COMMIT)},clearData:Ext.emptyFn,destroyStore:function(){this.isDestroyed||(this.storeId&&Ext.StoreMgr.unregister(this),this.clearData(),this.data=null,this.tree=null,this.reader=this.writer=null,this.clearListeners(),this.isDestroyed=!0,this.implicitModel&&Ext.destroy(this.model))},getSortState:function(){return this.sortInfo},getCount:function(){},getById:function(a){},removeAll:function(){}}),Ext.data.Store=Ext.extend(Ext.data.AbstractStore,{remoteSort:!1,remoteFilter:!1,groupField:undefined,groupDir:"ASC",pageSize:25,currentPage:1,clearOnPageLoad:!0,implicitModel:!1,loading:!1,sortOnFilter:!0,isStore:!0,constructor:function(a){a=a||{},this.data=new Ext.util.MixedCollection(!1,function(a){return a.internalId}),a.data&&(this.inlineData=a.data,delete a.data),Ext.data.Store.superclass.constructor.call(this,a);var b=this.proxy,c=this.inlineData;c?(b instanceof Ext.data.MemoryProxy?(b.data=c,this.read()):this.add.apply(this,c),this.sort(),delete this.inlineData):this.autoLoad&&Ext.defer(this.load,10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined])},getGroups:function(){var a=this.data.items,b=a.length,c=[],d={},e,f,g,h;for(h=0;h<b;h++)e=a[h],f=this.getGroupString(e),g=d[f],g==undefined&&(g={name:f,children:[]},c.push(g),d[f]=g),g.children.push(e);return c},getGroupString:function(a){return a.get(this.groupField)},first:function(){return this.data.first()},last:function(){return this.data.last()},insert:function(a,b){var c,d,e;b=[].concat(b);for(c=0,e=b.length;c<e;c++)d=this.createModel(b[c]),d.set(this.modelDefaults),this.data.insert(a+c,d),d.join(this);this.snapshot&&this.snapshot.addAll(b),this.fireEvent("add",this,b,a),this.fireEvent("datachanged",this)},add:function(a){Ext.isArray(a)||(a=Array.prototype.slice.apply(arguments));var b=a.length,c,d;for(d=0;d<b;d++)c=this.createModel(a[d]),c.phantom==!1&&(c.needsAdd=!0),a[d]=c;return this.insert(this.data.length,a),a},createModel:function(a){return a instanceof Ext.data.Model||(a=Ext.ModelMgr.create(a,this.model)),a},each:function(a,b){this.data.each(a,b)},remove:function(a){Ext.isArray(a)||(a=[a]);var b=a.length,c,d,e;for(c=0;c<b;c++)e=a[c],d=this.data.indexOf(e),d>-1&&(this.removed.push(e),this.snapshot&&this.snapshot.remove(e),e.unjoin(this),this.data.remove(e),this.fireEvent("remove",this,e,d));this.fireEvent("datachanged",this)},removeAt:function(a){var b=this.getAt(a);b&&this.remove(b)},load:function(a){return a=a||{},Ext.isFunction(a)&&(a={callback:a}),Ext.applyIf(a,{group:{field:this.groupField,direction:this.groupDir},start:0,limit:this.pageSize,addRecords:!1}),Ext.data.Store.superclass.load.call(this,a)},isLoading:function(){return this.loading},onProxyLoad:function(a){var b=a.getRecords();this.loadRecords(b,a.addRecords),this.loading=!1,this.fireEvent("load",this,b,a.wasSuccessful()),this.fireEvent("read",this,b,a.wasSuccessful());var c=a.callback;typeof c=="function"&&c.call(a.scope||this,b,a,a.wasSuccessful())},onProxyWrite:function(a){var b=this.data,c=a.action,d=a.getRecords(),e=d.length,f=a.callback,g,h;if(a.wasSuccessful()){if(c=="create"||c=="update")for(h=0;h<e;h++)g=d[h],g.phantom=!1,g.join(this),b.replace(g);else if(c=="destroy"){for(h=0;h<e;h++)g=d[h],g.unjoin(this),b.remove(g);this.removed=[]}this.fireEvent("datachanged")}typeof f=="function"&&f.call(a.scope||this,d,a,a.wasSuccessful())},getNewRecords:function(){return this.data.filterBy(this.filterNew).items},getUpdatedRecords:function(){return this.data.filterBy(this.filterDirty).items},sort:function(a,b){if(Ext.isString(a)){var c=a,d=this.sortToggle,e=Ext.util.Format.toggle;b==undefined&&(d[c]=e(d[c]||"","ASC","DESC"),b=d[c]),a={property:c,direction:b}}arguments.length!=0&&this.sorters.clear(),this.sorters.addAll(this.decodeSorters(a)),this.remoteSort?this.load():(this.data.sort(this.sorters.items),this.fireEvent("datachanged",this))},filter:function(a,b){Ext.isString(a)&&(a={property:a,value:b}),this.filters.addAll(this.decodeFilters(a)),this.remoteFilter?this.load():(this.snapshot=this.snapshot||this.data.clone(),this.data=this.data.filter(this.filters.items),this.sortOnFilter&&!this.remoteSort?this.sort():this.fireEvent("datachanged",this))},clearFilter:function(a){this.filters.clear(),this.isFiltered()&&(this.data=this.snapshot.clone(),delete this.snapshot,a!==!0&&this.fireEvent("datachanged",this))},isFiltered:function(){return!!this.snapshot&&this.snapshot!=this.data},filterBy:function(a,b){this.snapshot=this.snapshot||this.data.clone(),this.data=this.queryBy(a,b||this),this.fireEvent("datachanged",this)},queryBy:function(a,b){var c=this.snapshot||this.data;return c.filterBy(a,b||this)},loadData:function(a,b){var c=this.model,d=a.length,e,f;for(e=0;e<d;e++)f=a[e],f instanceof Ext.data.Model||(a[e]=Ext.ModelMgr.create(f,c));this.loadRecords(a,b)},loadRecords:function(a,b){b||this.data.clear(),this.data.addAll(a);for(var c=0,d=a.length;c<d;c++)a[c].needsAdd=!1,a[c].join(this);this.suspendEvents(),this.filterOnLoad&&!this.remoteFilter&&this.filter(),this.sortOnLoad&&!this.remoteSort&&this.sort(),this.resumeEvents(),this.fireEvent("datachanged",this,a)},loadPage:function(a){this.currentPage=a,this.read({page:a,start:(a-1)*this.pageSize,limit:this.pageSize,addRecords:!this.clearOnPageLoad})},nextPage:function(){this.loadPage(this.currentPage+1)},previousPage:function(){this.loadPage(this.currentPage-1)},clearData:function(){this.data.each(function(a){a.unjoin()}),this.data.clear()},find:function(a,b,c,d,e,f){var g=this.createFilterFn(a,b,d,e,f);return g?this.data.findIndexBy(g,null,c):-1},findRecord:function(){var a=this.find.apply(this,arguments);return a!=-1?this.getAt(a):null},createFilterFn:function(a,b,c,d,e){return Ext.isEmpty(b)?!1:(b=this.data.createValueMatcher(b,c,d,e),function(c){return b.test(c.data[a])})},findExact:function(a,b,c){return this.data.findIndexBy(function(c){return c.get(a)===b},this,c)},findBy:function(a,b,c){return this.data.findIndexBy(a,b,c)},collect:function(a,b,c){var d=[],e={},f,g,h,i,j;c===!0&&this.snapshot?i=this.snapshot.items:i=this.data.items,f=i.length;for(j=0;j<f;j++)g=i[j].data[a],h=String(g),(b||!Ext.isEmpty(g))&&!e[h]&&(e[h]=!0,d[d.length]=g);return d},sum:function(a,b,c){var d=this.data.items,e=0,f;b=b||0,c=c||c===0?c:d.length-1;for(f=b;f<=c;f++)e+=d[f].data[a]||0;return e},getCount:function(){return this.data.length||0},getAt:function(a){return this.data.getAt(a)},getRange:function(a,b){return this.data.getRange(a,b)},getById:function(a){return(this.snapshot||this.data).findBy(function(b){return b.getId()===a})},indexOf:function(a){return this.data.indexOf(a)},indexOfId:function(a){return this.data.indexOfKey(a)},removeAll:function(a){var b=[];this.each(function(a){b.push(a)}),this.clearData(),this.snapshot&&this.snapshot.clear(),a!==!0&&this.fireEvent("clear",this,b)}}),Ext.data.TreeStore=Ext.extend(Ext.data.AbstractStore,{clearOnLoad:!0,nodeParam:"node",defaultRootId:"root",constructor:function(a){a=a||{};var b=a.root||{};b.id=b.id||this.defaultRootId;var c=new Ext.data.RecordNode(b);this.tree=new Ext.data.Tree(c),this.tree.treeStore=this,Ext.data.TreeStore.superclass.constructor.call(this,a),a.root&&this.read({node:c,doPreload:!0})},getRootNode:function(){return this.tree.getRootNode()},getNodeById:function(a){return this.tree.getNodeById(a)},load:function(a){a=a||{},a.params=a.params||{};var b=a.node||this.tree.getRootNode(),c,d,e=this.proxy.reader,f;if(this.clearOnLoad)while(b.firstChild)b.removeChild(b.firstChild);return a.doPreload?(f=e.getRoot(b.isRoot?b.attributes:b.getRecord().raw),c=e.extractData(f,!0),this.fillNode(b,c),!0):(Ext.applyIf(a,{node:b}),d=b.getRecord(),a.params[this.nodeParam]=d?d.getId():"root",Ext.data.TreeStore.superclass.load.call(this,a))},fillNode:function(a,b){a.loaded=!0;var c=b.length,d,e=0,f,g=a.subStore;for(;e<c;e++)f=b[e].raw,b[e].data.leaf=f.leaf,d=new Ext.data.RecordNode({id:b[e].getId(),leaf:f.leaf,record:b[e],expanded:f.expanded}),a.appendChild(d),b[e].doPreload&&this.load({node:d,doPreload:!0});g&&(this.clearOnLoad&&g.removeAll(),g.add.apply(g,b))},onProxyLoad:function(a){var b=a.getRecords();this.fillNode(a.node,b),this.fireEvent("read",this,a.node,b,a.wasSuccessful());var c=a.callback;typeof c=="function"&&c.call(a.scope||this,b,a,a.wasSuccessful())},getSubStore:function(a){return a&&a.node&&(a=a.node),a.getSubStore()},removeAll:function(){var a=this.getRootNode();a.destroy()}}),Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection,{register:function(){for(var a=0,b;b=arguments[a];a++)this.add(b)},unregister:function(){for(var a=0,b;b=arguments[a];a++)this.remove(this.lookup(b))},lookup:function(a){if(Ext.isArray(a)){var b=["field1"],c=!Ext.isArray(a[0]);if(!c)for(var d=2,e=a[0].length;d<=e;++d)b.push("field"+d);return new Ext.data.ArrayStore({data:a,fields:b,expandData:c,autoDestroy:!0,autoCreated:!0})}return Ext.isObject(a)?a.events?a:Ext.create(a,"store"):this.get(a)},getKey:function(a){return a.storeId}}),Ext.regStore=function(a,b){var c;return Ext.isObject(a)?b=a:b.storeId=a,b instanceof Ext.data.Store?c=b:c=new Ext.data.Store(b),Ext.StoreMgr.register(c)},Ext.getStore=function(a){return Ext.StoreMgr.lookup(a)},Ext.data.WriterMgr=new Ext.AbstractManager({}),Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(a){this.nodeHash={},this.root=null,a&&this.setRootNode(a),this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert"),Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(a){return this.root=a,a.ownerTree=this,a.isRoot=!0,this.registerNode(a),a},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}}),Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(a){this.attributes=a||{},this.leaf=!!this.attributes.leaf,this.id=this.attributes.id,this.id||(this.id=Ext.id(null,"xnode-"),this.attributes.id=this.id),this.childNodes=[],this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.addEvents({append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0}),this.listeners=this.attributes.listeners,Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(a){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===!1)return!1;var b=this.getOwnerTree();return b&&b.proxyNodeEvent.apply(b,arguments)===!1?!1:!0},isLeaf:function(){return this.leaf===!0},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},isLast:function(){return this.parentNode?this.parentNode.lastChild==this:!0},isFirst:function(){return this.parentNode?this.parentNode.firstChild==this:!0},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(a){var b=!1,c,d;Ext.isArray(a)?b=a:arguments.length>1&&(b=arguments);if(!b){if(this.fireEvent("beforeappend",this.ownerTree,this,a)===!1)return!1;var e=this.childNodes.length,f=a.parentNode;if(f){if(a.fireEvent("beforemove",a.getOwnerTree(),a,f,this,e)===!1)return!1;f.removeChild(a)}e=this.childNodes.length,e===0&&this.setFirstChild(a),this.childNodes.push(a),a.parentNode=this;var g=this.childNodes[e-1];return g?(a.previousSibling=g,g.nextSibling=a):a.previousSibling=null,a.nextSibling=null,this.setLastChild(a),a.setOwnerTree(this.getOwnerTree()),this.fireEvent("append",this.ownerTree,this,a,e),f&&a.fireEvent("move",this.ownerTree,a,f,this,e),a}d=b.length;for(c=0;c<d;c++)this.appendChild(b[c])},removeChild:function(a,b){var c=this.indexOf(a);return c==-1?!1:this.fireEvent("beforeremove",this.ownerTree,this,a)===!1?!1:(this.childNodes.splice(c,1),a.previousSibling&&(a.previousSibling.nextSibling=a.nextSibling),a.nextSibling&&(a.nextSibling.previousSibling=a.previousSibling),this.firstChild==a&&this.setFirstChild(a.nextSibling),this.lastChild==a&&this.setLastChild(a.previousSibling),this.fireEvent("remove",this.ownerTree,this,a),b?a.destroy(!0):a.clear(),a)},clear:function(a){this.setOwnerTree(null,a),this.parentNode=this.previousSibling=this.nextSibling=null,a&&(this.firstChild=this.lastChild=null)},destroy:function(a){a===!0?(this.clearListeners(),this.clear(!0),Ext.each(this.childNodes,function(a){a.destroy(!0)}),this.childNodes=null):this.remove(!0)},insertBefore:function(a,b){if(!b)return this.appendChild(a);if(a==b)return!1;if(this.fireEvent("beforeinsert",this.ownerTree,this,a,b)===!1)return!1;var c=this.indexOf(b),d=a.parentNode,e=c;d==this&&this.indexOf(a)<c&&e--;if(d){if(a.fireEvent("beforemove",a.getOwnerTree(),a,d,this,c,b)===!1)return!1;d.removeChild(a)}e===0&&this.setFirstChild(a),this.childNodes.splice(e,0,a),a.parentNode=this;var f=this.childNodes[e-1];return f?(a.previousSibling=f,f.nextSibling=a):a.previousSibling=null,a.nextSibling=b,b.previousSibling=a,a.setOwnerTree(this.getOwnerTree()),this.fireEvent("insert",this.ownerTree,this,a,b),d&&a.fireEvent("move",this.ownerTree,a,d,this,e,b),a},remove:function(a){var b=this.parentNode;return b&&b.removeChild(this,a),this},removeAll:function(a){var b=this.childNodes,c;while(c=b[0])this.removeChild(c,a);return this},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(a,b){var c=b?b.nextSibling:null;return this.removeChild(b),this.insertBefore(a,c),b},indexOf:function(a){return this.childNodes.indexOf(a)},getOwnerTree:function(){if(!this.ownerTree){var a=this;while(a){if(a.ownerTree){this.ownerTree=a.ownerTree;break}a=a.parentNode}}return this.ownerTree},getDepth:function(){var a=0,b=this;while(b.parentNode)++a,b=b.parentNode;return a},setOwnerTree:function(a,b){a!=this.ownerTree&&(this.ownerTree&&this.ownerTree.unregisterNode(this),this.ownerTree=a,b!==!0&&Ext.each(this.childNodes,function(b){b.setOwnerTree(a)}),a&&a.registerNode(this))},setId:function(a){if(a!==this.id){var b=this.ownerTree;b&&b.unregisterNode(this),this.id=this.attributes.id=a,b&&b.registerNode(this),this.onIdChange(a)}},onIdChange:Ext.emptyFn,getPath:function(a){a=a||"id";var b=this.parentNode,c=[this.attributes[a]];while(b)c.unshift(b.attributes[a]),b=b.parentNode;var d=this.getOwnerTree().pathSeparator;return d+c.join(d)},bubble:function(a,b,c){var d=this;while(d){if(a.apply(b||d,c||[d])===!1)break;d=d.parentNode}},cascadeBy:function(a,b,c){if(a.apply(b||this,c||[this])!==!1){var d=this.childNodes,e=d.length,f;for(f=0;f<e;f++)d[f].cascadeBy(a,b,c)}},eachChild:function(a,b,c){var d=this.childNodes,e=d.length,f;for(f=0;f<e;f++)if(a.apply(b||this,c||[d[f]])===!1)break},findChild:function(a,b,c){return this.findChildBy(function(){return this.attributes[a]==b},null,c)},findChildBy:function(a,b,c){var d=this.childNodes,e=d.length,f=0,g,h;for(;f<e;f++){g=d[f];if(a.call(b||g,g)===!0)return g;if(c){h=g.findChildBy(a,b,c);if(h!=null)return h}}return null},sort:function(a,b){var c=this.childNodes,d=c.length,e,f;if(d>0){var g=b?function(){return a.apply(b,arguments)}:a;c.sort(g);for(e=0;e<d;e++)f=c[e],f.previousSibling=c[e-1],f.nextSibling=c[e+1],e===0&&this.setFirstChild(f),e==d-1&&this.setLastChild(f)}},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a)return!0;b=b.parentNode}return!1},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}}),Ext.data.RecordNode=Ext.extend(Ext.data.Node,{constructor:function(a){a=a||{},a.record&&(a.record.node=this),Ext.data.RecordNode.superclass.constructor.call(this,a)},getChildRecords:function(){var a=this.childNodes,b=a.length,c=0,d=[],e;for(;c<b;c++)e=a[c].attributes.record,e.data.leaf=a[c].leaf,d.push(e);return d},getRecord:function(){return this.attributes.record},getSubStore:function(){if(this.isLeaf())throw"Attempted to get a substore of a leaf node.";var a=this.getOwnerTree().treeStore;if(!this.subStore){this.subStore=new Ext.data.Store({model:a.model});var b=this.getChildRecords();this.subStore.add.apply(this.subStore,b)}return this.loaded||a.load({node:this}),this.subStore},destroy:function(a){this.subStore&&this.subStore.destroyStore();var b=this.attributes;return b.record&&(delete b.record.node,delete b.record),Ext.data.RecordNode.superclass.destroy.call(this,a)}}),Ext.data.Proxy=Ext.extend(Ext.util.Observable,{batchOrder:"create,update,destroy",defaultReaderType:"json",defaultWriterType:"json",constructor:function(a){a=a||{},a.model==undefined&&delete a.model,Ext.data.Proxy.superclass.constructor.call(this,a),this.model!=undefined&&!(this.model instanceof Ext.data.Model)&&this.setModel(this.model)},setModel:function(a,b){this.model=Ext.ModelMgr.getModel(a);var c=this.reader,d=this.writer;this.setReader(c),this.setWriter(d),b&&this.store&&this.store.setModel(this.model)},getModel:function(){return this.model},setReader:function(a){if(a==undefined||typeof a=="string")a={type:a};return a instanceof Ext.data.Reader?a.setModel(this.model):(Ext.applyIf(a,{proxy:this,model:this.model,type:this.defaultReaderType}),a=Ext.data.ReaderMgr.create(a)),this.reader=a,this.reader},getReader:function(){return this.reader},setWriter:function(a){if(a==undefined||typeof a=="string")a={type:a};return a instanceof Ext.data.Writer||(Ext.applyIf(a,{model:this.model,type:this.defaultWriterType}),a=Ext.data.WriterMgr.create(a)),this.writer=a,this.writer},getWriter:function(){return this.writer},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,batch:function(a,b){var c=new Ext.data.Batch({proxy:this,listeners:b||{}});return Ext.each(this.batchOrder.split(","),function(b){a[b]&&c.add(new Ext.data.Operation({action:b,records:a[b]}))},this),c.start(),c}}),Ext.data.DataProxy=Ext.data.Proxy,Ext.data.ProxyMgr.registerType("proxy",Ext.data.Proxy),Ext.data.ServerProxy=Ext.extend(Ext.data.Proxy,{pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",sortParam:"sort",filterParam:"filter",noCache:!0,cacheString:"_dc",timeout:3e4,constructor:function(a){a=a||{},Ext.data.ServerProxy.superclass.constructor.call(this,a),this.extraParams=a.extraParams||{},this.nocache=this.noCache},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:function(){return this.doRequest.apply(this,arguments)},buildRequest:function(a){var b=Ext.applyIf(a.params||{},this.extraParams||{});b=Ext.applyIf(b,this.getParams(b,a));var c=new Ext.data.Request({params:b,action:a.action,records:a.records,operation:a});return c.url=this.buildUrl(c),a.request=c,c},encodeSorters:function(a){var b=[],c=a.length,d;for(d=0;d<c;d++)b[d]={property:a[d].property,direction:a[d].direction};return Ext.encode(b)},encodeFilters:function(a){var b=[],c=a.length,d;for(d=0;d<c;d++)b[d]={property:a[d].property,value:a[d].value};return Ext.encode(b)},encodeGroupers:function(a){return Ext.encode(a)},getParams:function(a,b){a=a||{};var c=b.group,d=b.sorters,e=b.filters,f=b.page,g=b.start,h=b.limit,i=this.pageParam,j=this.startParam,k=this.limitParam,l=this.groupParam,m=this.sortParam,n=this.filterParam;return i&&f&&(a[i]=f),j&&g&&(a[j]=g),k&&h&&(a[k]=h),l&&c&&c.field&&(a[l]=this.encodeGroupers(c)),m&&d&&d.length>0&&(a[m]=this.encodeSorters(d)),n&&e&&e.length>0&&(a[n]=this.encodeFilters(e)),a},buildUrl:function(a){var b=a.url||this.url;if(!b)throw new Error("You are using a ServerProxy but have not supplied it with a url.");return this.noCache&&(b=Ext.urlAppend(b,Ext.util.Format.format("{0}={1}",this.cacheString,(new Date).getTime()))),b},doRequest:function(a,b,c){throw new Error("The doRequest function has not been implemented on your Ext.data.ServerProxy subclass. See src/data/ServerProxy.js for details")},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.reader,this.writer),Ext.data.ServerProxy.superclass.destroy.apply(this,arguments)}}),Ext.data.AjaxProxy=Ext.extend(Ext.data.ServerProxy,{actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},constructor:function(){this.addEvents("exception"),Ext.data.AjaxProxy.superclass.constructor.apply(this,arguments)},doRequest:function(a,b,c){var d=this.getWriter(),e=this.buildRequest(a,b,c);return a.allowWrite()&&(e=d.write(e)),Ext.apply(e,{headers:this.headers,timeout:this.timeout,scope:this,callback:this.createRequestCallback(e,a,b,c),method:this.getMethod(e),disableCaching:!1}),Ext.Ajax.request(e),e},getMethod:function(a){return this.actionMethods[a.action]},createRequestCallback:function(a,b,c,d){var e=this;return function(f,g,h){if(g===!0){var i=e.getReader(),j=i.read(h),k=j.records,l=k.length,m=new Ext.util.MixedCollection(!0,function(a){return a.getId()}),n,o;m.addAll(b.records);for(o=0;o<l;o++)n=m.get(k[o].getId()),n&&n.set(n.data);Ext.apply(b,{response:h,resultSet:j}),b.setCompleted(),b.setSuccessful()}else e.fireEvent("exception",this,h,b),b.setException();typeof c=="function"&&c.call(d||e,b),e.afterRequest(a,!0)}}}),Ext.data.ProxyMgr.registerType("ajax",Ext.data.AjaxProxy),Ext.data.HttpProxy=Ext.data.AjaxProxy,Ext.data.RestProxy=Ext.extend(Ext.data.AjaxProxy,{appendId:!0,actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},api:{create:"create",read:"read",update:"update",destroy:"destroy"},buildUrl:function(a){var b=a.operation.records||[],c=b[0],d=this.format,e=a.url||this.url;return this.appendId&&c&&(e.match(/\/$/)||(e+="/"),e+=c.getId()),d&&(e.match(/\.$/)||(e+="."),e+=d),a.url=e,Ext.data.RestProxy.superclass.buildUrl.apply(this,arguments)}}),Ext.data.ProxyMgr.registerType("rest",Ext.data.RestProxy),Ext.apply(Ext,{getHead:function(){var a;return function(){return a==undefined&&(a=Ext.get(document.getElementsByTagName("head")[0])),a}}()}),Ext.data.ScriptTagProxy=Ext.extend(Ext.data.ServerProxy,{defaultWriterType:"base",callbackParam:"callback",scriptIdPrefix:"stcScript",callbackPrefix:"stcCallback",recordParam:"records",lastRequest:undefined,autoAppendParams:!0,constructor:function(){this.addEvents("exception"),Ext.data.ScriptTagProxy.superclass.constructor.apply(this,arguments)},doRequest:function(a,b,c){var d=Ext.util.Format.format,e=++Ext.data.ScriptTagProxy.TRANS_ID,f=d("{0}{1}",this.scriptIdPrefix,e),g=d("{0}{1}",this.callbackPrefix,e),h=this.getWriter(),i=this.buildRequest(a),j=Ext.urlAppend(i.url,d("{0}={1}",this.callbackParam,g));a.allowWrite()&&(i=h.write(i)),Ext.apply(i,{url:j,transId:e,scriptId:f,stCallback:g}),i.timeoutId=Ext.defer(this.createTimeoutHandler,this.timeout,this,[i,a]),window[g]=this.createRequestCallback(i,a,b,c);var k=document.createElement("script");return k.setAttribute("src",j),k.setAttribute("async",!0),k.setAttribute("type","text/javascript"),k.setAttribute("id",f),Ext.getHead().appendChild(k),a.setStarted(),this.lastRequest=i,i},createRequestCallback:function(a,b,c,d){var e=this;return function(f){var g=e.getReader(),h=g.read(f);Ext.apply(b,{response:f,resultSet:h}),b.setCompleted(),b.setSuccessful(),typeof c=="function"&&c.call(d||e,b),e.afterRequest(a,!0)}},afterRequest:function(){var a=function(a){return function(){window[a]=undefined;try{delete window[a]}catch(c){}}};return function(b,c){Ext.get(b.scriptId).remove(),clearTimeout(b.timeoutId);var d=b.stCallback;c?(a(d)(),this.lastRequest.completed=!0):window[d]=a(d)}}(),buildUrl:function(a){var b=Ext.data.ScriptTagProxy.superclass.buildUrl.call(this,a),c=Ext.apply({},a.params),d=c.filters,e,f;delete c.filters,this.autoAppendParams&&(b=Ext.urlAppend(b,Ext.urlEncode(c)));if(d&&d.length)for(f=0;f<d.length;f++)e=d[f],e.value&&(b=Ext.urlAppend(b,e.property+"="+e.value));var g=a.records;return Ext.isArray(g)&&g.length>0&&(b=Ext.urlAppend(b,Ext.util.Format.format("{0}={1}",this.recordParam,this.encodeRecords(g)))),b},destroy:function(){this.abort(),Ext.data.ScriptTagProxy.superclass.destroy.apply(this,arguments)},isLoading:function(){var a=this.lastRequest;return a!=undefined&&!a.completed},abort:function(){this.isLoading()&&this.afterRequest(this.lastRequest)},encodeRecords:function(a){var b="";for(var c=0,d=a.length;c<d;c++)b+=Ext.urlEncode(a[c].data);return b},createTimeoutHandler:function(a,b){this.afterRequest(a,!1),this.fireEvent("exception",this,a,b),typeof a.callback=="function"&&a.callback.call(a.scope||window,null,a.options,!1)}}),Ext.data.ScriptTagProxy.TRANS_ID=1e3,Ext.data.ProxyMgr.registerType("scripttag",Ext.data.ScriptTagProxy),Ext.data.ClientProxy=Ext.extend(Ext.data.Proxy,{clear:function(){throw new Error("The Ext.data.ClientProxy subclass that you are using has not defined a 'clear' function. See src/data/ClientProxy.js for details.")}}),Ext.data.MemoryProxy=Ext.extend(Ext.data.ClientProxy,{constructor:function(a){Ext.data.MemoryProxy.superclass.constructor.call(this,a),this.setReader(this.reader)},read:function(a,b,c){var d=this.getReader(),e=d.read(this.data);Ext.apply(a,{resultSet:e}),a.setCompleted(),typeof b=="function"&&b.call(c||this,a)},clear:Ext.emptyFn}),Ext.data.ProxyMgr.registerType("memory",Ext.data.MemoryProxy),Ext.data.WebStorageProxy=Ext.extend(Ext.data.ClientProxy,{id:undefined,constructor:function(a){Ext.data.WebStorageProxy.superclass.constructor.call(this,a),this.cache={};if(this.getStorageObject()==undefined)throw"Local Storage is not supported in this browser, please use another type of data proxy"
;this.id=this.id||(this.store?this.store.storeId:undefined);if(this.id==undefined)throw"No unique id was provided to the local storage proxy. See Ext.data.LocalStorageProxy documentation for details";this.initialize()},create:function(a,b,c){var d=a.records,e=d.length,f=this.getIds(),g,h,i;a.setStarted();for(i=0;i<e;i++)h=d[i],h.phantom?(h.phantom=!1,g=this.getNextId()):g=h.getId(),this.setRecord(h,g),f.push(g);this.setIds(f),a.setCompleted(),a.setSuccessful(),typeof b=="function"&&b.call(c||this,a)},read:function(a,b,c){var d=[],e=this.getIds(),f=e.length,g,h,i;if(a.id)i=this.getRecord(a.id),i&&(d.push(i),a.setSuccessful());else{for(g=0;g<f;g++)d.push(this.getRecord(e[g]));a.setSuccessful()}a.setCompleted(),a.resultSet=new Ext.data.ResultSet({records:d,total:d.length,loaded:!0}),typeof b=="function"&&b.call(c||this,a)},update:function(a,b,c){var d=a.records,e=d.length,f=this.getIds(),g,h,i;a.setStarted();for(i=0;i<e;i++)g=d[i],this.setRecord(g),h=g.getId(),h!==undefined&&f.indexOf(h)==-1&&f.push(h);this.setIds(f),a.setCompleted(),a.setSuccessful(),typeof b=="function"&&b.call(c||this,a)},destroy:function(a,b,c){var d=a.records,e=d.length,f=this.getIds(),g=[].concat(f),h;for(h=0;h<e;h++)g.remove(d[h].getId()),this.removeRecord(d[h],!1);this.setIds(g),typeof b=="function"&&b.call(c||this,a)},getRecord:function(a){if(this.cache[a]==undefined){var b=Ext.decode(this.getStorageObject().getItem(this.getRecordKey(a))),c={},d=this.model,e=d.prototype.fields.items,f=e.length,g,h,i,j;for(g=0;g<f;g++)h=e[g],i=h.name,typeof h.decode=="function"?c[i]=h.decode(b[i]):c[i]=b[i];j=new d(c,a),j.phantom=!1,this.cache[a]=j}return this.cache[a]},setRecord:function(a,b){b?a.setId(b):b=a.getId();var c=a.data,d={},e=this.model,f=e.prototype.fields.items,g=f.length,h,i,j;for(h=0;h<g;h++)i=f[h],j=i.name,typeof i.encode=="function"?d[j]=i.encode(c[j],a):d[j]=c[j];var k=this.getStorageObject(),l=this.getRecordKey(b);this.cache[b]=a,k.removeItem(l),k.setItem(l,Ext.encode(d))},removeRecord:function(a,b){a instanceof Ext.data.Model&&(a=a.getId());if(b!==!1){var c=this.getIds();c.remove(a),this.setIds(c)}this.getStorageObject().removeItem(this.getRecordKey(a))},getRecordKey:function(a){return a instanceof Ext.data.Model&&(a=a.getId()),Ext.util.Format.format("{0}-{1}",this.id,a)},getRecordCounterKey:function(){return Ext.util.Format.format("{0}-counter",this.id)},getIds:function(){var a=(this.getStorageObject().getItem(this.id)||"").split(","),b=a.length,c;if(b==1&&a[0]=="")a=[];else for(c=0;c<b;c++)a[c]=parseInt(a[c],10);return a},setIds:function(a){var b=this.getStorageObject(),c=a.join(",");b.removeItem(this.id),Ext.isEmpty(c)||b.setItem(this.id,c)},getNextId:function(){var a=this.getStorageObject(),b=this.getRecordCounterKey(),c=a[b],d,e;return c==undefined&&(d=this.getIds(),c=d[d.length-1]||0),e=parseInt(c,10)+1,a.setItem(b,e),e},initialize:function(){var a=this.getStorageObject();a.setItem(this.id,a.getItem(this.id)||"")},clear:function(){var a=this.getStorageObject(),b=this.getIds(),c=b.length,d;for(d=0;d<c;d++)this.removeRecord(b[d]);a.removeItem(this.getRecordCounterKey()),a.removeItem(this.id)},getStorageObject:function(){throw new Error("The getStorageObject function has not been defined in your Ext.data.WebStorageProxy subclass")}}),Ext.data.LocalStorageProxy=Ext.extend(Ext.data.WebStorageProxy,{getStorageObject:function(){return window.localStorage}}),Ext.data.ProxyMgr.registerType("localstorage",Ext.data.LocalStorageProxy),Ext.data.SessionStorageProxy=Ext.extend(Ext.data.WebStorageProxy,{getStorageObject:function(){return window.sessionStorage}}),Ext.data.ProxyMgr.registerType("sessionstorage",Ext.data.SessionStorageProxy),Ext.data.Reader=Ext.extend(Object,{idProperty:"id",totalProperty:"total",successProperty:"success",root:"",implicitIncludes:!0,nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0}),constructor:function(a){Ext.apply(this,a||{}),this.model=Ext.ModelMgr.getModel(a.model),this.model&&this.buildExtractors()},setModel:function(a,b){this.model=Ext.ModelMgr.getModel(a),this.buildExtractors(!0),b&&this.proxy&&this.proxy.setModel(this.model,!0)},read:function(a){var b=a;return a&&a.responseText&&(b=this.getResponseData(a)),b?this.readRecords(b):this.nullResultSet},readRecords:function(a){this.rawData=a,a=this.getData(a);var b=this.getRoot(a),c=b.length,d=!0,e,f,g;this.totalProperty&&(e=parseInt(this.getTotal(a),10),isNaN(e)||(c=e));if(this.successProperty){e=this.getSuccess(a);if(e===!1||e==="false")d=!1}return f=this.extractData(b,!0),g=f.length,new Ext.data.ResultSet({total:c||g,count:g,records:f,success:d})},extractData:function(a,b){var c=[],d=[],e=this.model,f=a.length,g=this.idProperty,h,i,j,k;for(k=0;k<f;k++)h=a[k],c=this.extractValues(h),i=this.getId(h),b===!0?(j=new e(c,i),j.raw=h,d.push(j),this.implicitIncludes&&this.readAssociated(j,h)):(c[g]=i,d.push(c));return d},readAssociated:function(a,b){var c=a.associations.items,d=c.length,e,f,g,h,i,j,k,l,m;for(m=0;m<d;m++)e=c[m],f=e.name,h=this.getAssociatedDataRoot(b,e.associationKey||f),g=e.associatedModel,h&&(j=g.proxy,j?k=j.getReader():k=new this.constructor({model:e.associatedName}),e.type=="hasMany"?(l=a[f](),l.add.apply(l,k.read(h).records),i=g.prototype.associations.findBy(function(b){return b.type=="belongsTo"&&b.associatedName==a.constructor.modelName}),i&&l.data.each(function(b){b[i.instanceName]=a})):e.type=="belongsTo"&&(a[e.instanceName]=k.read([h]).records[0]))},getAssociatedDataRoot:function(a,b){return a[b]},extractValues:function(a){var b=this.model.prototype.fields.items,c=b.length,d={},e,f,g;for(g=0;g<c;g++)e=b[g],f=this.extractorFunctions[g](a)||e.defaultValue,d[e.name]=f;return d},getData:function(a){return a},getRoot:function(a){return a},getResponseData:function(a){throw new Error("getResponseData must be implemented in the Ext.data.Reader subclass")},onMetaChange:function(a){var b=a.fields,c;Ext.apply(this,a),b?(c=Ext.regModel("JsonReader-Model"+Ext.id(),{fields:b}),this.setModel(c,!0)):this.buildExtractors(!0)},buildExtractors:function(a){a===!0&&delete this.extractorFunctions;if(this.extractorFunctions)return;var b=this.id||this.idProperty,c=this.totalProperty,d=this.successProperty,e=this.messageProperty;c&&(this.getTotal=this.createAccessor(c)),d&&(this.getSuccess=this.createAccessor(d)),e&&(this.getMessage=this.createAccessor(e));if(b){var f=this.createAccessor(b);this.getId=function(a){var b=f(a);return b==undefined||b==""?null:b}}else this.getId=function(){return null};this.buildFieldExtractors()},buildFieldExtractors:function(){var a=this.model.prototype.fields.items,b=a.length,c=0,d=[],e,f;for(;c<b;c++)e=a[c],f=e.mapping!==undefined&&e.mapping!==null?e.mapping:e.name,d.push(this.createAccessor(f));this.extractorFunctions=d}}),Ext.data.Writer=Ext.extend(Object,{constructor:function(a){Ext.apply(this,a)},write:function(a){var b=a.operation,c=b.records||[],d=c.length,e=0,f=[];for(;e<d;e++)f.push(this.getRecordData(c[e]));return this.writeRecords(a,f)},getRecordData:function(a){return a.data}}),Ext.data.WriterMgr.registerType("base",Ext.data.Writer),Ext.data.JsonWriter=Ext.extend(Ext.data.Writer,{root:"records",encode:!1,writeRecords:function(a,b){return this.encode===!0&&(b=Ext.encode(b)),a.jsonData=a.jsonData||{},a.jsonData[this.root]=b,a}}),Ext.data.WriterMgr.registerType("json",Ext.data.JsonWriter),Ext.data.JsonReader=Ext.extend(Ext.data.Reader,{root:"",readRecords:function(a){return a.metaData&&this.onMetaChange(a.metaData),this.jsonData=a,Ext.data.JsonReader.superclass.readRecords.call(this,a)},getResponseData:function(a){try{var b=Ext.decode(a.responseText)}catch(c){throw"Ext.data.JsonReader.getResponseData: Unable to parse JSON returned by Server."}if(!b)throw"Ext.data.JsonReader.getResponseData: JSON object not found";return b},buildExtractors:function(){Ext.data.JsonReader.superclass.buildExtractors.apply(this,arguments),this.root?this.getRoot=this.createAccessor(this.root):this.getRoot=function(a){return a}},extractData:function(a,b){var c=this.record,d=[],e,f;if(c){e=a.length;for(f=0;f<e;f++)d[f]=a[f][c]}else d=a;return Ext.data.JsonReader.superclass.extractData.call(this,d,b)},createAccessor:function(){var a=/[\[\.]/;return function(b){if(Ext.isEmpty(b))return Ext.emptyFn;if(Ext.isFunction(b))return b;var c=String(b).search(a);return c>=0?new Function("obj","return obj"+(c>0?".":"")+b):function(a){return a[b]}}}()}),Ext.data.ReaderMgr.registerType("json",Ext.data.JsonReader),Ext.data.TreeReader=Ext.extend(Ext.data.JsonReader,{extractData:function(a,b){var c=Ext.data.TreeReader.superclass.extractData.call(this,a,b),d=c.length,e=0,f;if(b)for(;e<d;e++)f=c[e],f.doPreload=!!this.getRoot(f.raw);return c}}),Ext.data.ReaderMgr.registerType("tree",Ext.data.TreeReader),Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{buildExtractors:function(){Ext.data.ArrayReader.superclass.buildExtractors.apply(this,arguments);var a=this.model.prototype.fields.items,b=a.length,c=[],d;for(d=0;d<b;d++)c.push(function(a){return function(b){return b[a]}}(a[d].mapping||d));this.extractorFunctions=c}}),Ext.data.ReaderMgr.registerType("array",Ext.data.ArrayReader),Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(a){a=a||{},Ext.applyIf(a,{proxy:{type:"memory",reader:"array"}}),Ext.data.ArrayStore.superclass.constructor.call(this,a)},loadData:function(a,b){if(this.expandData===!0){var c=[],d=0,e=a.length;for(;d<e;d++)c[c.length]=[a[d]];a=c}Ext.data.ArrayStore.superclass.loadData.call(this,a,b)}}),Ext.reg("arraystore",Ext.data.ArrayStore),Ext.data.SimpleStore=Ext.data.ArrayStore,Ext.reg("simplestore",Ext.data.SimpleStore),Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(a){a=a||{},Ext.applyIf(a,{proxy:{type:"ajax",reader:"json",writer:"json"}}),Ext.data.JsonStore.superclass.constructor.call(this,a)}}),Ext.reg("jsonstore",Ext.data.JsonStore),Ext.data.JsonPStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.JsonPStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.JsonReader(a),proxy:new Ext.data.ScriptTagProxy(a)}))}}),Ext.reg("jsonpstore",Ext.data.JsonPStore),Ext.data.XmlWriter=Ext.extend(Ext.data.Writer,{documentRoot:"xmlData",header:"",record:"record",writeRecords:function(a,b){var c=this.buildTpl(a,b);return a.xmlData=c.apply(b),a},buildTpl:function(a,b){if(this.tpl)return this.tpl;var c=[],d=this.documentRoot,e=this.record,f,g;this.header&&c.push(this.header),c.push("<",d,">");if(b.length>0){c.push('<tpl for="."><',e,">"),f=b[0];for(g in f)f.hasOwnProperty(g)&&c.push("<",g,">{",g,"}</",g,">");c.push("</",e,"></tpl>")}return c.push("</",d,">"),this.tpl=new Ext.XTemplate(c.join("")),this.tpl}}),Ext.data.WriterMgr.registerType("xml",Ext.data.XmlWriter),Ext.data.XmlReader=Ext.extend(Ext.data.Reader,{createAccessor:function(){var a=function(a,b,c){var d=Ext.DomQuery.selectNode(a,b),e;return d&&d.firstChild&&(e=d.firstChild.nodeValue),Ext.isEmpty(e)?c:e};return function(b){var c;return b==this.totalProperty?c=function(c,d){var e=a(b,c,d);return parseFloat(e)}:b==this.successProperty?c=function(c,d){var e=a(b,c,!0);return e!==!1&&e!=="false"}:c=function(c,d){return a(b,c,d)},c}}(),getResponseData:function(a){var b=a.responseXML;if(!b)throw{message:"Ext.data.XmlReader.read: XML data not found"};return b},getData:function(a){return a.documentElement||a},getRoot:function(a){var b=a.nodeName,c=this.root;return!c||b&&b==c?a:Ext.DomQuery.selectNode(c,a)},constructor:function(a){a=a||{},Ext.applyIf(a,{idProperty:a.idPath||a.id,successProperty:a.success}),Ext.data.XmlReader.superclass.constructor.call(this,a)},extractData:function(a,b){var c=this.record;return c!=a.nodeName?a=Ext.DomQuery.select(c,a):a=[a],Ext.data.XmlReader.superclass.extractData.call(this,a,b)},getAssociatedDataRoot:function(a,b){return Ext.DomQuery.select(b,a)[0]},readRecords:function(a){return Ext.isArray(a)&&(a=a[0]),this.xmlData=a,Ext.data.XmlReader.superclass.readRecords.call(this,a)}}),Ext.data.ReaderMgr.registerType("xml",Ext.data.XmlReader),Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(a){a=a||{},a=a||{},Ext.applyIf(a,{proxy:{type:"ajax",reader:"xml",writer:"xml"}}),Ext.data.XmlStore.superclass.constructor.call(this,a)}}),Ext.reg("xmlstore",Ext.data.XmlStore),Ext.History=new Ext.util.Observable({constructor:function(){Ext.History.superclass.constructor.call(this,config),this.addEvents("change")},init:function(){var a=this;a.setToken(window.location.hash),Ext.supports.History?window.addEventListener("hashchange",this.onChange):setInterval(function(){var b=a.cleanToken(window.location.hash),c=a.getToken();b!=c&&a.onChange()},50)},onChange:function(){var a=Ext.History,b=a.cleanToken(window.location.hash);a.token!=b&&a.fireEvent("change",b),a.setToken(b)},setToken:function(a){return this.token=this.cleanToken(a)},cleanToken:function(a){return a[0]=="#"?a.substr(1):a},getToken:function(){return this.token},add:function(a){window.location.hash=this.setToken(a),Ext.supports.History||this.onChange()}}),Ext.ControllerManager=new Ext.AbstractManager({register:function(a,b){b.id=a,Ext.applyIf(b,{application:Ext.ApplicationManager.currentApplication});var c=new Ext.Controller(b);return c.init&&c.init(),this.all.add(c),c}}),Ext.regController=function(){return Ext.ControllerManager.register.apply(Ext.ControllerManager,arguments)},Ext.Controller=Ext.extend(Ext.util.Observable,{constructor:function(a){this.addEvents("instance-created","instance-creation-failed","instance-updated","instance-update-failed","instance-destroyed","instance-destruction-failed"),Ext.Controller.superclass.constructor.call(this,a),Ext.apply(this,a||{}),typeof this.model=="string"&&(this.model=Ext.ModelMgr.getModel(this.model))},index:function(){this.render("index",{listeners:{scope:this,edit:this.edit,build:this.build,create:this.onCreateInstance,destroy:this.onDestroyInstance}})},edit:function(a){var b=this.render("edit",{listeners:this.getEditListeners()});b.loadModel(a)},build:function(){this.render("build",{listeners:this.getBuildListeners()})},create:function(a,b){b=b||{};var c=this.getModel(),d=new c(a),e=b.success,f=b.failure,g=b.scope||this;d.save({scope:this,success:function(a){typeof e=="function"&&e.call(g,a),this.fireEvent("instance-created",a)},failure:function(a,b){typeof f=="function"&&f.call(g,a,b),this.fireEvent("instance-creation-failed",a,b)}})},update:function(a,b,c){c=c||{};var d=c.success,e=c.failure,f=c.scope||this;Ext.isObject(b)&&a.set(b),a.save({scope:this,success:function(a){typeof d=="function"&&d.call(f,a),this.fireEvent("instance-updated",a)},failure:function(a,b){typeof e=="function"&&e.call(f,a,b),this.fireEvent("instance-update-failed",a,b)}})},destroy:function(a,b){b=b||{};var c=b.success,d=b.failure,e=b.scope||this;a.destroy({scope:this,success:function(a){typeof c=="function"&&c.call(e,a),this.fireEvent("instance-destroyed",a)},failure:function(a,b){typeof d=="function"&&d.call(e,a,b),this.fireEvent("instance-destruction-failed",a,b)}})},getBuildListeners:function(){return{scope:this,save:this.onCreateInstance,cancel:this.onCancelBuild}},getEditListeners:function(){return{scope:this,save:this.onUpdateInstance,cancel:this.onCancelEdit}},onCancelEdit:function(a){return this.closeView(a)},onCancelBuild:function(a){return this.closeView(a)},onCreateInstance:function(a){this.create(a.getValues(),{scope:this,success:function(b){this.closeView(a)},failure:function(a,b){console.log("fail")}})},onUpdateInstance:function(a){this.update(a.getRecord(),a.getValues(),{scope:this,success:function(b){this.closeView(a)},failure:function(a,b){}})},onDestroyInstance:function(a,b){this.destroy(a,{scope:this,success:function(a){},failure:function(a,b){}})},setRenderTarget:function(a){Ext.Controller.renderTarget=a},render:function(a,b){var c=Ext.Controller,d=this.application,e=d?d.currentProfile:undefined,f,g;return Ext.applyIf(a,{profile:e}),g=Ext.ComponentMgr.create(a),b!==!1&&(f=e?e.getRenderTarget(a,d):b,b==undefined&&(b=f||(d?d.defaultTarget:undefined)),typeof b=="string"&&(b=Ext.getCmp(b)),b!=undefined&&b.add&&(e&&e.beforeLayout(g,b,d),b.add(g),b.layout&&b.layout.setActiveItem&&b.layout.setActiveItem(g),b.doComponentLayout(),e&&e.afterLayout(g,b,d))),g},control:function(a,b,c){if(!a||!a.isView)throw"Trying to control a view that doesnt exist";var d=c?a.refs[c]:a,e,f,g,h,i;if(!d)throw"No item called "+c+" found inside the "+a.name+" view.";for(e in b){f=b[e];if(Ext.isObject(f)&&!f.fn)this.control(a,f,e);else{if(d.refs)for(g in d.refs)h=d.refs[g],h.isObservable&&h.events[e]&&h.enableBubble(e);f.fn?(i=f,i.scope===undefined&&(i.scope=this)):(i={},i[e]=f,i.scope=this),d.addListener(i)}}return a},getModel:function(){return Ext.ModelMgr.getModel(this.model)},closeView:function(a){var b=a.ownerCt;b&&(b.remove(a),b.doLayout(),b.setActiveItem(b.items.last()))}}),Ext.util.Dispatcher=Ext.extend(Ext.util.Observable,{constructor:function(a){this.addEvents("before-dispatch","dispatch"),Ext.util.Dispatcher.superclass.constructor.call(this,a)},dispatch:function(a){var b=new Ext.Interaction(a),c=b.controller,d=b.action,e=Ext.History;this.fireEvent("before-dispatch",b)!==!1&&(e&&a.historyUrl&&(e.suspendEvents(!1),e.add(a.historyUrl),Ext.defer(e.resumeEvents,100,e)),c&&d&&(c[d].call(c,b),b.dispatched=!0),this.fireEvent("dispatch",b))},redirect:function(a){if(!(a instanceof Ext.data.Model)&&typeof a=="string"){var b=Ext.Router.recognize(a);if(b)return this.dispatch(b)}return null},createRedirect:function(a){return function(){Ext.Dispatcher.redirect(a)}}}),Ext.Dispatcher=new Ext.util.Dispatcher,Ext.dispatch=function(){return Ext.Dispatcher.dispatch.apply(Ext.Dispatcher,arguments)},Ext.redirect=function(){return Ext.Dispatcher.redirect.apply(Ext.Dispatcher,arguments)},Ext.createRedirect=Ext.Dispatcher.createRedirect,Ext.util.Router=Ext.extend(Ext.util.Observable,{constructor:function(a){a=a||{},Ext.apply(this,a,{defaults:{action:"index"}}),this.routes=[],Ext.util.Router.superclass.constructor.call(this,a)},connect:function(a,b){b=Ext.apply({url:a},b||{},this.defaults);var c=new Ext.util.Route(b);return this.routes.push(c),c},recognize:function(a){var b=this.routes,c=b.length,d,e;for(d=0;d<c;d++){e=b[d].recognize(a);if(e!=undefined)return e}return undefined},draw:function(a){a.call(this,this)}}),Ext.Router=new Ext.util.Router,Ext.util.Route=Ext.extend(Object,{constructor:function(a){Ext.apply(this,a,{conditions:{}}),this.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g),this.paramsInMatchString=this.url.match(this.paramMatchingRegex)||[],this.matcherRegex=this.createMatcherRegex(this.url)},recognize:function(a){if(this.recognizes(a)){var b=this.matchesFor(a);return Ext.applyIf(b,{controller:this.controller,action:this.action,historyUrl:a})}},recognizes:function(a){return this.matcherRegex.test(a)},matchesFor:function(a){var b={},c=this.paramsInMatchString,d=a.match(this.matcherRegex),e=c.length,f;d.shift();for(f=0;f<e;f++)b[c[f].replace(":","")]=d[f];return b},urlFor:function(a){},createMatcherRegex:function(a){var b=this.paramsInMatchString,c=b.length,d,e,f;for(d=0;d<c;d++)e=this.conditions[b[d]],f=Ext.util.Format.format("({0})",e||"[%a-zA-Z0-9\\_\\s,]+"),a=a.replace(new RegExp(b[d]),f);return new RegExp("^"+a+"$")}}),Ext.Interaction=Ext.extend(Ext.util.Observable,{controller:"",action:"",dispatched:!1,constructor:function(a){Ext.Interaction.superclass.constructor.apply(this,arguments),a=a||{},Ext.applyIf(a,{scope:this}),Ext.apply(this,a),typeof this.controller=="string"&&(this.controller=Ext.ControllerManager.get(this.controller))}}),Ext.Application=Ext.extend(Ext.util.Observable,{scope:undefined,useHistory:!0,autoUpdateComponentProfiles:!0,setProfilesOnLaunch:!0,constructor:function(a){this.addEvents("launch","beforeprofilechange","profilechange"),Ext.Application.superclass.constructor.call(this,a),this.bindReady();var b=this.name;b&&(window[b]=this,Ext.ns(b,b+".views",b+".stores",b+".models",b+".controllers")),Ext.addMetaTags&&Ext.addMetaTags(a)},bindReady:function(){Ext.onReady(this.onReady,this)},launch:Ext.emptyFn,useLoadMask:!1,loadMaskFadeDuration:1e3,loadMaskRemoveDuration:1050,autoInitViewport:!0,dispatch:function(a){return Ext.dispatch(a)},initLoadMask:function(){var a=this.useLoadMask,b="loading-mask",c=typeof a=="string"?a:b;if(a){c==b&&Ext.getBody().createChild({id:b});var d=Ext.get("loading-mask"),e=this.loadMaskFadeDuration,f=this.loadMaskRemoveDuration;Ext.defer(function(){d.addCls("fadeout"),Ext.defer(function(){d.remove()},f)},e)}},onBeforeLaunch:function(){var a=Ext.History,b=a&&this.useHistory,c=this.determineProfile(!0);if(b){this.historyForm=Ext.getBody().createChild({id:"history-form",cls:"x-hide-display",style:"display: none;",tag:"form",action:"#",children:[{tag:"div",children:[{tag:"input",id:a.fieldId,type:"hidden"},{tag:"iframe",id:a.iframeId}]}]}),a.init(),a.on("change",this.onHistoryChange,this);var d=a.getToken();this.launch.call(this.scope||this,c)!==!1&&Ext.redirect(d||this.defaultUrl||{controller:"application",action:"index"})}else this.launch.call(this.scope||this,c);this.launched=!0,this.fireEvent("launch",this),this.setProfilesOnLaunch&&this.updateComponentProfiles(c)},onReady:function(){return this.useLoadMask&&this.initLoadMask(),Ext.EventManager.onOrientationChange(this.determineProfile,this),this.autoInitViewport?Ext.Viewport.init(this.onBeforeLaunch,this):this.onBeforeLaunch(),this},determineProfile:function(a){var b=this.currentProfile,c=this.profiles,d;for(d in c)if(c[d]()===!0){d!=b&&this.fireEvent("beforeprofilechange",d,b)!==!1&&(this.autoUpdateComponentProfiles&&this.updateComponentProfiles(d),a!==!0&&this.fireEvent("profilechange",d,b)),this.currentProfile=d;break}return this.currentProfile},updateComponentProfiles:function(a){Ext.ComponentMgr.each(function(b,c){c.setProfile&&c.setProfile(a)})},getProfile:function(){return this.currentProfile},onHistoryChange:function(a){return Ext.redirect(a)}}),Ext.ApplicationManager=new Ext.AbstractManager({register:function(a,b){Ext.isObject(a)?b=a:b.name=a;var c=new Ext.Application(b);return this.all.add(c),this.currentApplication=c,c}}),Ext.regApplication=function(){return Ext.ApplicationManager.register.apply(Ext.ApplicationManager,arguments)},function(){var a=Ext.Element=Ext.extend(Object,{defaultUnit:"px",constructor:function(a,b){var c=typeof a=="string"?document.getElementById(a):a,d;return c?(d=c.id,!b&&d&&Ext.cache[d]?Ext.cache[d].el:(this.dom=c,this.id=d||Ext.id(c),this)):null},set:function(a,b){var c=this.dom,d,e;for(d in a)a.hasOwnProperty(d)&&(e=a[d],d=="style"?this.applyStyles(e):d=="cls"?c.className=e:b!==!1?c.setAttribute(d,e):c[d]=e);return this},is:function(a){return Ext.DomQuery.is(this.dom,a)},getValue:function(a){var b=this.dom.value;return a?parseInt(b,10):b},addListener:function(a,b,c,d){return Ext.EventManager.on(this.dom,a,b,c||this,d),this},removeListener:function(a,b,c){return Ext.EventManager.un(this.dom,a,b,c),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this,!0),this},remove:function(){var a=this,b=a.dom;b&&(delete a.dom,Ext.removeNode(b))},isAncestor:function(a){var b=this.dom;return a=Ext.getDom(a),b&&a?b.contains(a):!1},isDescendent:function(a){return Ext.fly(a,"_internal").isAncestor(this)},contains:function(a){return a?this.isAncestor(a):!1},getAttribute:function(a,b){var c=this.dom;return c.getAttributeNS(b,a)||c.getAttribute(b+":"+a)||c.getAttribute(a)||c[a]},setHTML:function(a){return this.dom&&(this.dom.innerHTML=a),this},getHTML:function(){return this.dom?this.dom.innerHTML:""},hide:function(){return this.setVisible(!1),this},show:function(){return this.setVisible(!0),this},setVisible:function(b,c){var d=this,e=d.dom,f=this.getVisibilityMode();switch(f){case a.VISIBILITY:this.removeCls(["x-hidden-display","x-hidden-offsets"]),this[b?"removeCls":"addCls"]("x-hidden-visibility");break;case a.DISPLAY:this.removeCls(["x-hidden-visibility","x-hidden-offsets"]),this[b?"removeCls":"addCls"]("x-hidden-display");break;case a.OFFSETS:this.removeCls(["x-hidden-visibility","x-hidden-display"]),this[b?"removeCls":"addCls"]("x-hidden-offsets")}return d},getVisibilityMode:function(){var b=this.dom,c=a.data(b,"visibilityMode");return c===undefined&&a.data(b,"visibilityMode",c=a.DISPLAY),c},setVisibilityMode:function(b){return a.data(this.dom,"visibilityMode",b),this}}),b=a.prototype;a.VISIBILITY=1,a.DISPLAY=2,a.OFFSETS=3,a.addMethods=function(a){Ext.apply(b,a)},b.on=b.addListener,b.un=b.removeListener,b.update=b.setHTML,a.get=function(c){var d,e,f;if(!c)return null;if(typeof c=="string")return(e=document.getElementById(c))?(Ext.cache[c]&&Ext.cache[c].el?(d=Ext.cache[c].el,d.dom=e):d=a.addToCache(new a(e)),d):null;if(c.tagName)return(f=c.id)||(f=Ext.id(c)),Ext.cache[f]&&Ext.cache[f].el?(d=Ext.cache[f].el,d.dom=c):d=a.addToCache(new a(c)),d;if(c instanceof a)return c!=a.docEl&&(c.dom=document.getElementById(c.id)||c.dom),c;if(c.isComposite)return c;if(Ext.isArray(c))return a.select(c);if(c==document){if(!a.docEl){var g=function(){};g.prototype=b,a.docEl=new g,a.docEl.dom=document,a.docEl.id=Ext.id(document)}return a.docEl}return null},a.addToCache=function(a,b){return b=b||a.id,Ext.cache[b]={el:a,data:{},events:{}},a},a.data=function(b,c,d){b=a.get(b);if(!b)return null;var e=Ext.cache[b.id].data;return arguments.length==2?e[c]:e[c]=d},a.garbageCollect=function(){if(!Ext.enableGarbageCollector)clearInterval(a.collectorThreadId);else{var b,c,d=Ext.cache;for(b in d){if(!d.hasOwnProperty(b))continue;if(d[b].skipGarbageCollection)continue;c=d[b].el.dom;if(!c||!c.parentNode||!c.offsetParent&&!document.getElementById(b))Ext.enableListenerCollection&&Ext.EventManager.removeAll(c),delete d[b]}}},a.Flyweight=function(a){this.dom=a};var c=function(){};c.prototype=b,a.Flyweight.prototype=new c,a.Flyweight.prototype.isFlyweight=!0,a._flyweights={},a.fly=function(b,c){var d=null;return c=c||"_global",b=Ext.getDom(b),b&&((a._flyweights[c]=a._flyweights[c]||new a.Flyweight).dom=b,d=a._flyweights[c]),d},Ext.get=a.get,Ext.fly=a.fly}(),Ext.applyIf(Ext.Element,{unitRe:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,camelRe:/(-[a-z])/gi,opacityRe:/alpha\(opacity=(.*)\)/i,propertyCache:{},defaultUnit:"px",borders:{l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},paddings:{l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},margins:{l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},addUnits:function(a,b){if(a===""||a=="auto"||a===null||a===undefined)a=a||"";else if(!isNaN(a)||!this.unitRe.test(a))a=a+(b||this.defaultUnit||"px");return a},parseBox:function(a){typeof a!="string"&&(a=a.toString());var b=a.split(" "),c=b.length;return c==1?b[1]=b[2]=b[3]=b[0]:c==2?(b[2]=b[0],b[3]=b[1]):c==3&&(b[3]=b[1]),{top:parseFloat(b[0])||0,right:parseFloat(b[1])||0,bottom:parseFloat(b[2])||0,left:parseFloat(b[3])||0}},unitizeBox:function(a,b){var c=this.addUnits,d=this.parseBox(a);return c(d.top,b)+" "+c(d.right,b)+" "+c(d.bottom,b)+" "+c(d.left,b)},camelReplaceFn:function(a,b){return b.charAt(1).toUpperCase()},normalize:function(a){return this.propertyCache[a]||(this.propertyCache[a]=a=="float"?"cssFloat":a.replace(this.camelRe,this.camelReplaceFn))},getDocumentHeight:function(){return Math.max(Ext.isStrict?document.documentElement.scrollHeight:document.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(Ext.isStrict?document.documentElement.scrollWidth:document.body.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return window.innerHeight},getViewportWidth:function(){return window.innerWidth},getViewSize:function(){return{width:window.innerWidth,height:window.innerHeight}},getOrientation:function(){return Ext.supports.OrientationChange?window.orientation==0?"portrait":"landscape":window.innerHeight>window.innerWidth?"portrait":"landscape"},fromPoint:function(a,b){return Ext.get(document.elementFromPoint(a,b))}}),Ext.applyIf(Ext.Element,{getComputedTransformOffset:function(a){a instanceof Ext.Element&&(a=a.dom);var b=window.getComputedStyle(a).webkitTransform,c=b!="none"?new WebKitCSSMatrix(b):new WebKitCSSMatrix;return typeof c.m41!="undefined"?new Ext.util.Offset(c.m41,c.m42):typeof c.d!="undefined"?new Ext.util.Offset(c.d,c.e):new Ext.util.Offset(0,0)},cssTransform:function(a,b){a instanceof Ext.Element&&(a=a.dom);var c=new WebKitCSSMatrix;Ext.iterate(b,function(a,b){b=Ext.isArray(b)?b:[b],c=c[a].apply(c,b)}),Ext.supports.CSS3DTransform?a.style.webkitTransform="matrix3d("+c.m11+", "+c.m12+", "+c.m13+", "+c.m14+", "+c.m21+", "+c.m22+", "+c.m23+", "+c.m24+", "+c.m31+", "+c.m32+", "+c.m33+", "+c.m34+", "+c.m41+", "+c.m42+", "+c.m43+", "+c.m44+")":a.style.webkitTransform=c},cssTranslate:function(a,b){a instanceof Ext.Element&&(a=a.dom),Ext.supports.CSS3DTransform?a.style.webkitTransform="translate3d("+b.x+"px, "+b.y+"px, 0px)":a.style.webkitTransform="translate("+b.x+"px, "+b.y+"px)"}}),Ext.Element.addMethods({getY:function(a){return this.getXY(a)[1]},getX:function(a){return this.getXY(a)[0]},getXY:function(){var a=window.webkitConvertPointFromNodeToPage(this.dom,new WebKitPoint(0,0));return[a.x,a.y]},getOffsetsTo:function(a){var b=this.getXY(),c=Ext.fly(a,"_internal").getXY();return[b[0]-c[0],b[1]-c[1]]},setXY:function(a){var b=this;arguments.length>1&&(a=[a,arguments[1]]);var c=b.translatePoints(a),d=b.dom.style;for(a in c){if(!c.hasOwnProperty(a))continue;isNaN(c[a])||(d[a]=c[a]+"px")}return b},setX:function(a){return this.setXY([a,this.getY()])},setY:function(a){return this.setXY([this.getX(),a])},setLeft:function(a){return this.setStyle("left",Ext.Element.addUnits(a)),this},setTop:function(a){return this.setStyle("top",Ext.Element.addUnits(a)),this},setTopLeft:function(a,b){var c=Ext.Element.addUnits;return this.setStyle("top",c(a)),this.setStyle("left",c(b)),this},setRight:function(a){return this.setStyle("right",Ext.Element.addUnits(a)),this},setBottom:function(a){return this.setStyle("bottom",Ext.Element.addUnits(a)),this},getLeft:function(a){return parseInt(this.getStyle("left"),10)||0},getRight:function(a){return parseInt(this.getStyle("right"),10)||0},getTop:function(a){return parseInt(this.getStyle("top"),10)||0},getBottom:function(a){return parseInt(this.getStyle("bottom"),10)||0},setBox:function(a,b,c,d){var e;return Ext.isObject(a)&&(c=a.width,d=a.height,b=a.top,a=a.left),a!==e&&this.setLeft(a),b!==e&&this.setTop(b),c!==e&&this.setWidth(c),d!==e&&this.setHeight(d),this},getBox:function(a,b){var c=this,d=c.dom,e=d.offsetWidth,f=d.offsetHeight,g,h,i,j,k,l;return b?a?g=[0,0]:g=[parseInt(c.getStyle("left"),10)||0,parseInt(c.getStyle("top"),10)||0]:g=c.getXY(),a?(i=c.getBorderWidth.call(c,"l")+c.getPadding.call(c,"l"),j=c.getBorderWidth.call(c,"r")+c.getPadding.call(c,"r"),k=c.getBorderWidth.call(c,"t")+c.getPadding.call(c,"t"),l=c.getBorderWidth.call(c,"b")+c.getPadding.call(c,"b"),h={x:g[0]+i,y:g[1]+k,0:g[0]+i,1:g[1]+k,width:e-(i+j),height:f-(k+l)}):h={x:g[0],y:g[1],0:g[0],1:g[1],width:e,height:f},h.left=h.x,h.top=h.y,h.right=h.x+h.width,h.bottom=h.y+h.height,h},getPageBox:function(a){var b=this,c=b.dom,d=c.offsetWidth,e=c.offsetHeight,f=b.getXY(),g=f[1],h=f[0]+d,i=f[1]+e,j=f[0];return c?a?new Ext.util.Region(g,h,i,j):{left:j,top:g,width:d,height:e,right:h,bottom:i}:new Ext.util.Region},translatePoints:function(a,b){b=isNaN(a[1])?b:a[1],a=isNaN(a[0])?a:a[0];var c=this,d=c.isStyle("position","relative"),e=c.getXY(),f=parseInt(c.getStyle("left"),10),g=parseInt(c.getStyle("top"),10);return f=isNaN(f)?d?0:c.dom.offsetLeft:f,g=isNaN(g)?d?0:c.dom.offsetTop:g,{left:a-e[0]+f,top:b-e[1]+g}}}),function(){Ext.Element.classReCache={};var a=Ext.Element,b=document.defaultView;a.addMethods({marginRightRe:/marginRight/i,trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,addCls:function(a){var b=this,c,d,e,f=[];if(!Ext.isArray(a))a&&!this.hasCls(a)&&(b.dom.className+=" "+a);else{for(c=0,d=a.length;c<d;c++)e=a[c],e&&!b.hasCls(e)&&f.push(e);f.length&&(b.dom.className+=" "+f.join(" "))}return b},addClass:function(){throw new Error("Component: addClass has been deprecated. Please use addCls.")},removeCls:function(a){var b=this,c,d,e,f,g;Ext.isArray(a)||(a=[a]);if(b.dom&&b.dom.className){g=b.dom.className.replace(this.trimRe,"").split(this.spacesRe);for(c=0,e=a.length;c<e;c++)f=a[c],typeof f=="string"&&(f=f.replace(this.trimRe,""),d=g.indexOf(f),d!=-1&&g.splice(d,1));b.dom.className=g.join(" ")}return b},removeClass:function(){throw new Error("Component: removeClass has been deprecated. Please use removeCls.")},mask:function(a,b,c){var d=this,e=d.dom,f=Ext.Element.data(e,"mask"),g,h,i="";d.addCls("x-masked"),d.getStyle("position")=="static"&&d.addCls("x-masked-relative"),f&&f.remove(),Ext.isString(b)&&!Ext.isEmpty(b)?i=" "+b:b&&(i=" x-mask-gray"),g=d.createChild({cls:"x-mask"+
(c!==!1?"":" x-mask-gray"),html:a?'<div class="'+(b||"x-mask-message")+'">'+a+"</div>":""}),h=d.getSize(),Ext.Element.data(e,"mask",g),e===document.body&&(h.height=window.innerHeight,d.orientationHandler&&Ext.EventManager.unOrientationChange(d.orientationHandler,d),d.orientationHandler=function(){h=d.getSize(),h.height=window.innerHeight,g.setSize(h)},Ext.EventManager.onOrientationChange(d.orientationHandler,d)),g.setSize(h),Ext.is.iPad&&Ext.repaint()},unmask:function(){var a=this,b=a.dom,c=Ext.Element.data(b,"mask");c&&(c.remove(),Ext.Element.data(b,"mask",undefined)),a.removeCls(["x-masked","x-masked-relative"]),b===document.body&&(Ext.EventManager.unOrientationChange(a.orientationHandler,a),delete a.orientationHandler)},radioCls:function(a){var b=this.dom.parentNode.childNodes,c;a=Ext.isArray(a)?a:[a];for(var d=0,e=b.length;d<e;d++)c=b[d],c&&c.nodeType==1&&Ext.fly(c,"_internal").removeCls(a);return this.addCls(a)},radioClass:function(){throw new Error("Component: radioClass has been deprecated. Please use radioCls.")},toggleCls:function(a){return this.hasCls(a)?this.removeCls(a):this.addCls(a)},toggleClass:function(){throw new Error("Component: toggleClass has been deprecated. Please use toggleCls.")},hasCls:function(a){return a&&(" "+this.dom.className+" ").indexOf(" "+a+" ")!=-1},hasClass:function(){throw new Error("Element: hasClass has been deprecated. Please use hasCls.")},replaceCls:function(a,b){return this.removeCls(a).addCls(b)},replaceClass:function(){throw new Error("Component: replaceClass has been deprecated. Please use replaceCls.")},isStyle:function(a,b){return this.getStyle(a)==b},getStyle:function(c){var d=this.dom,e,f,g,h=Ext.is,i=d.style;return c=a.normalize(c),g=b?b.getComputedStyle(d,""):d.currentStyle,e=g?g[c]:null,e&&!h.correctRightMargin&&this.marginRightRe.test(c)&&i.position!="absolute"&&e!="0px"&&(f=i.display,i.display="inline-block",e=b.getComputedStyle(d,null)[c],i.display=f),e||(e=i[c]),!h.correctTransparentColor&&e=="rgba(0, 0, 0, 0)"&&(e="transparent"),e},setStyle:function(b,c){var d,e;typeof b=="string"&&(d={},d[b]=c,b=d);for(e in b)b.hasOwnProperty(e)&&(this.dom.style[a.normalize(e)]=b[e]);return this},applyStyles:function(b){if(b){var c,d,e=this.dom;typeof b=="function"&&(b=b.call());if(typeof b=="string"){b=Ext.util.Format.trim(b).split(/\s*(?::|;)\s*/);for(c=0,d=b.length;c<d;)e.style[a.normalize(b[c++])]=b[c++]}else typeof b=="object"&&this.setStyle(b)}},getHeight:function(a){var b=this.dom,c=a?b.clientHeight-this.getPadding("tb"):b.offsetHeight;return c>0?c:0},getWidth:function(a){var b=this.dom,c=a?b.clientWidth-this.getPadding("lr"):b.offsetWidth;return c>0?c:0},setWidth:function(b){var c=this;return c.dom.style.width=a.addUnits(b),c},setHeight:function(b){var c=this;return c.dom.style.height=a.addUnits(b),c},setSize:function(b,c){var d=this,e=d.dom.style;return Ext.isObject(b)&&(c=b.height,b=b.width),e.width=a.addUnits(b),e.height=a.addUnits(c),d},getBorderWidth:function(b){return this.sumStyles(b,a.borders)},getPadding:function(b){return this.sumStyles(b,a.paddings)},getMargin:function(b){return this.sumStyles(b,a.margins)},getViewSize:function(){var b=document,c=this.dom;return c==b||c==b.body?{width:a.getViewportWidth(),height:a.getViewportHeight()}:{width:c.clientWidth,height:c.clientHeight}},getSize:function(a){var b=this.dom;return{width:Math.max(0,a?b.clientWidth-this.getPadding("lr"):b.offsetWidth),height:Math.max(0,a?b.clientHeight-this.getPadding("tb"):b.offsetHeight)}},repaint:function(){var a=this.dom;return this.addCls("x-repaint"),a.style.background="transparent none",setTimeout(function(){a.style.background=null,Ext.get(a).removeCls("x-repaint")},1),this},getOuterWidth:function(){return this.getWidth()+this.getMargin("lr")},getOuterHeight:function(){return this.getHeight()+this.getMargin("tb")},sumStyles:function(a,b){var c=0,d=a.match(/\w/g),e=d.length,f,g;for(g=0;g<e;g++)f=d[g]&&parseFloat(this.getStyle(b[d[g]]))||0,f&&(c+=Math.abs(f));return c}})}(),Ext.Element.addMethods({findParent:function(a,b,c){var d=this.dom,e=document.body,f=0,g;b=b||50,isNaN(b)&&(g=Ext.getDom(b),b=Number.MAX_VALUE);while(d&&d.nodeType==1&&f<b&&d!=e&&d!=g){if(Ext.DomQuery.is(d,a))return c?Ext.get(d):d;f++,d=d.parentNode}return null},findParentNode:function(a,b,c){var d=Ext.fly(this.dom.parentNode,"_internal");return d?d.findParent(a,b,c):null},up:function(a,b){return this.findParentNode(a,b,!0)},select:function(a,b){return Ext.Element.select(a,this.dom,b)},query:function(a){return Ext.DomQuery.select(a,this.dom)},down:function(a,b){var c=Ext.DomQuery.selectNode(a,this.dom);return b?c:Ext.get(c)},child:function(a,b){var c,d=this,e;return e=Ext.get(d).id,e=e.replace(/[\.:]/g,"\\$0"),c=Ext.DomQuery.selectNode("#"+e+" > "+a,d.dom),b?c:Ext.get(c)},parent:function(a,b){return this.matchNode("parentNode","parentNode",a,b)},next:function(a,b){return this.matchNode("nextSibling","nextSibling",a,b)},prev:function(a,b){return this.matchNode("previousSibling","previousSibling",a,b)},first:function(a,b){return this.matchNode("nextSibling","firstChild",a,b)},last:function(a,b){return this.matchNode("previousSibling","lastChild",a,b)},matchNode:function(a,b,c,d){if(!this.dom)return null;var e=this.dom[b];while(e){if(e.nodeType==1&&(!c||Ext.DomQuery.is(e,c)))return d?e:Ext.get(e);e=e[a]}return null}}),Ext.Element.addMethods({getScrollParent:function(){var a=this.dom,b;while(a&&a!=document.body){if(a.id&&(b=Ext.ScrollManager.get(a.id)))return b;a=a.parentNode}return null}}),Ext.Element.addMethods({appendChild:function(a){return Ext.get(a).appendTo(this)},appendTo:function(a){return Ext.getDom(a).appendChild(this.dom),this},insertBefore:function(a){return a=Ext.getDom(a),a.parentNode.insertBefore(this.dom,a),this},insertAfter:function(a){return a=Ext.getDom(a),a.parentNode.insertBefore(this.dom,a.nextSibling),this},insertFirst:function(a,b){return a=a||{},a.nodeType||a.dom||typeof a=="string"?(a=Ext.getDom(a),this.dom.insertBefore(a,this.dom.firstChild),b?a:Ext.get(a)):this.createChild(a,this.dom.firstChild,b)},insertSibling:function(a,b,c){var d=this,e,f=(b||"before").toLowerCase()=="after",g;return Ext.isArray(a)?(g=d,Ext.each(a,function(a){e=Ext.fly(g,"_internal").insertSibling(a,b,c),f&&(g=e)}),e):(a=a||{},a.nodeType||a.dom?(e=d.dom.parentNode.insertBefore(Ext.getDom(a),f?d.dom.nextSibling:d.dom),c||(e=Ext.get(e))):f&&!d.dom.nextSibling?e=Ext.DomHelper.append(d.dom.parentNode,a,!c):e=Ext.DomHelper[f?"insertAfter":"insertBefore"](d.dom,a,!c),e)},replace:function(a){return a=Ext.get(a),this.insertBefore(a),a.remove(),this},replaceWith:function(a){var b=this;return a.nodeType||a.dom||typeof a=="string"?(a=Ext.get(a),b.dom.parentNode.insertBefore(a,b.dom)):a=Ext.DomHelper.insertBefore(b.dom,a),delete Ext.cache[b.id],Ext.removeNode(b.dom),b.id=Ext.id(b.dom=a),Ext.Element.addToCache(b.isFlyweight?new Ext.Element(b.dom):b),b},createChild:function(a,b,c){return a=a||{tag:"div"},b?Ext.DomHelper.insertBefore(b,a,c!==!0):Ext.DomHelper[this.dom.firstChild?"append":"overwrite"](this.dom,a,c!==!0)},wrap:function(a,b){var c=Ext.DomHelper.insertBefore(this.dom,a||{tag:"div"},!b);return c.dom?c.dom.appendChild(this.dom):c.appendChild(this.dom),c},insertHtml:function(a,b,c){var d=Ext.DomHelper.insertHtml(a,this.dom,b);return c?Ext.get(d):d}}),Ext.Element.addMethods({getAnchorXY:function(a,b,c){a=(a||"tl").toLowerCase(),c=c||{};var d=this,e=d.dom==document.body||d.dom==document,f=c.width||e?window.innerWidth:d.getWidth(),g=c.height||e?window.innerHeight:d.getHeight(),h,i=Math.round,j=d.getXY(),k=e?0:b?0:j[0],l=e?0:b?0:j[1],m={c:[i(f*.5),i(g*.5)],t:[i(f*.5),0],l:[0,i(g*.5)],r:[f,i(g*.5)],b:[i(f*.5),g],tl:[0,0],bl:[0,g],br:[f,g],tr:[f,0]};return h=m[a],[h[0]+k,h[1]+l]},getAlignToXY:function(a,b,c){a=Ext.get(a);if(!a||!a.dom)throw new Error("Element.alignToXY with an element that doesn't exist");c=c||[0,0],!b||b=="?"?b="tl-bl?":!/-/.test(b)&&b!==""&&(b="tl-"+b),b=b.toLowerCase();var d=this,e=b.match(/^([a-z]+)-([a-z]+)(\?)?$/),f=window.innerWidth,g=window.innerHeight,h="",i="",j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(!e)throw"Element.alignTo with an invalid alignment "+b;return h=e[1],i=e[2],w=!!e[3],j=d.getAnchorXY(h,!0),k=a.getAnchorXY(i,!1),l=k[0]-j[0]+c[0],m=k[1]-j[1]+c[1],w&&(t=d.getWidth(),u=d.getHeight(),v=a.getPageBox(),q=h.charAt(0),p=h.charAt(h.length-1),s=i.charAt(0),r=i.charAt(i.length-1),o=q=="t"&&s=="b"||q=="b"&&s=="t",n=p=="r"&&r=="l"||p=="l"&&r=="r",l+t>f&&(l=n?v.left-t:f-t),l<0&&(l=n?v.right:0),m+u>g&&(m=o?v.top-u:g-u),m<0&&(m=o?v.bottom:0)),[l,m]}}),Ext.CompositeElement=function(a,b){this.elements=[],this.add(a,b),this.el=new Ext.Element.Flyweight},Ext.CompositeElement.prototype={isComposite:!0,getElement:function(a){var b=this.el;return b.dom=a,b.id=a.id,b},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(a,b){var c=this,d=c.elements;if(!a)return this;typeof a=="string"?a=Ext.Element.selectorFunction(a,b):a.isComposite?a=a.elements:Ext.isIterable(a)||(a=[a]);for(var e=0,f=a.length;e<f;++e)d.push(c.transformElement(a[e]));return c},invoke:function(a,b){var c=this,d=c.elements,e=d.length,f,g;for(g=0;g<e;g++)f=d[g],f&&Ext.Element.prototype[a].apply(c.getElement(f),b);return c},item:function(a){var b=this,c=b.elements[a],d=null;return c&&(d=b.getElement(c)),d},addListener:function(a,b,c,d){var e=this.elements,f=e.length,g,h;for(g=0;g<f;g++)h=e[g],h&&Ext.EventManager.on(h,a,b,c||h,d);return this},each:function(a,b){var c=this,d=c.elements,e=d.length,f,g;for(f=0;f<e;f++){g=d[f];if(g){g=this.getElement(g);if(a.call(b||g,g,c,f))break}}return c},fill:function(a){var b=this;return b.elements=[],b.add(a),b},filter:function(a){var b=[],c=this,d=c.elements,e=Ext.isFunction(a)?a:function(b){return b.is(a)};return c.each(function(a,d,f){e(a,f)!==!1&&(b[b.length]=c.transformElement(a))}),c.elements=b,c},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},indexOf:function(a){return this.elements.indexOf(this.transformElement(a))},clear:function(){this.elements=[]}},Ext.CompositeElement.prototype.on=Ext.CompositeElement.prototype.addListener,function(){var a,b=Ext.Element.prototype,c=Ext.CompositeElement.prototype;for(a in b)Ext.isFunction(b[a])&&function(a){c[a]=c[a]||function(){return this.invoke(a,arguments)}}.call(c,a)}(),Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select),Ext.Element.select=function(a,b,c){var d;c=c===!1?!1:!0;if(typeof a=="string")d=Ext.Element.selectorFunction(a,b);else if(a.length!==undefined)d=a;else throw new Error("Invalid selector");return c?new Ext.CompositeElement(d):d},Ext.select=Ext.Element.select,Ext.CompositeElementLite=Ext.CompositeElement,Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(a,b){if(!a)return this;typeof a=="string"&&(a=Ext.Element.selectorFunction(a,b));var c=this.elements;return Ext.each(a,function(a){c.push(Ext.get(a))}),this},removeElement:function(a,b){var c=this,d=this.elements,e;return Ext.each(a,function(a){if(e=d[a]||d[a=c.indexOf(a)])b&&(e.dom?e.remove():Ext.removeNode(e)),d.splice(a,1)}),this},replaceElement:function(a,b,c){var d=isNaN(a)?this.indexOf(a):a,e;return d>-1&&(b=Ext.getDom(b),c&&(e=this.elements[d],e.parentNode.insertBefore(b,e),Ext.removeNode(e)),this.elements.splice(d,1,b)),this}}),Ext.DomHelper={emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/tag|children|cn|html$/i,endRe:/end/i,markup:function(a){var b="",c,d,e,f,g;if(typeof a=="string")b=a;else if(Ext.isArray(a))for(var h=0;h<a.length;h++)a[h]&&(b+=this.markup(a[h]));else{b+="<"+(a.tag=a.tag||"div");for(c in a){if(!a.hasOwnProperty(c))continue;d=a[c];if(!this.confRe.test(c))if(typeof d=="object"){b+=" "+c+'="';for(e in d){if(!d.hasOwnProperty(e))continue;b+=e+":"+d[e]+";"}b+='"'}else b+=" "+({cls:"class",htmlFor:"for"}[c]||c)+'="'+d+'"'}this.emptyTags.test(a.tag)?b+="/>":(b+=">",(g=a.children||a.cn)?b+=this.markup(g):a.html&&(b+=a.html),b+="</"+a.tag+">")}return b},applyStyles:function(a,b){if(b){var c=0,d,e;a=Ext.fly(a),typeof b=="function"&&(b=b.call());if(typeof b=="string"){b=Ext.util.Format.trim(b).split(/\s*(?::|;)\s*/);for(d=b.length;c<d;)a.setStyle(b[c++],b[c++])}else Ext.isObject(b)&&a.setStyle(b)}},insertHtml:function(a,b,c){var d={},e,f,g,h,i,j;return a=a.toLowerCase(),d.beforebegin=["BeforeBegin","previousSibling"],d.afterend=["AfterEnd","nextSibling"],g=b.ownerDocument.createRange(),f="setStart"+(this.endRe.test(a)?"After":"Before"),d[a]?(g[f](b),h=g.createContextualFragment(c),b.parentNode.insertBefore(h,a=="beforebegin"?b:b.nextSibling),b[(a=="beforebegin"?"previous":"next")+"Sibling"]):(i=(a=="afterbegin"?"first":"last")+"Child",b.firstChild?(g[f](b[i]),h=g.createContextualFragment(c),a=="afterbegin"?b.insertBefore(h,b.firstChild):b.appendChild(h)):b.innerHTML=c,b[i])},insertBefore:function(a,b,c){return this.doInsert(a,b,c,"beforebegin")},insertAfter:function(a,b,c){return this.doInsert(a,b,c,"afterend","nextSibling")},insertFirst:function(a,b,c){return this.doInsert(a,b,c,"afterbegin","firstChild")},append:function(a,b,c){return this.doInsert(a,b,c,"beforeend","",!0)},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=this.markup(b),c?Ext.get(a.firstChild):a.firstChild},doInsert:function(a,b,c,d,e,f){var g=this.insertHtml(d,Ext.getDom(a),this.markup(b));return c?Ext.get(g,!0):g}},Ext.DomQuery={select:function(a,b){var c=[],d,e,f,g,h;b=b||document,typeof b=="string"&&(b=document.getElementById(b)),a=a.split(",");for(e=0,g=a.length;e<g;e++)if(typeof a[e]=="string"){d=b.querySelectorAll(a[e]);for(f=0,h=d.length;f<h;f++)c.push(d[f])}return c},selectNode:function(a,b){return Ext.DomQuery.select(a,b)[0]},is:function(a,b){return typeof a=="string"&&(a=document.getElementById(a)),Ext.DomQuery.select(b).indexOf(a)!==-1}},Ext.Element.selectorFunction=Ext.DomQuery.select,Ext.query=Ext.DomQuery.select,Ext.Anim=Ext.extend(Object,{isAnim:!0,disableAnimations:!1,defaultConfig:{from:{},to:{},duration:250,delay:0,easing:"ease-in-out",autoClear:!0,out:!0,direction:null,reverse:!1},opposites:{left:"right",right:"left",up:"down",down:"up"},constructor:function(a){a=Ext.apply({},a||{},this.defaultConfig),this.config=a,Ext.Anim.superclass.constructor.call(this),this.running={}},initConfig:function(a,b){var c=this,d={},e=Ext.apply({},b||{},c.config);return e.el=a=Ext.get(a),e.reverse&&c.opposites[e.direction]&&(e.direction=c.opposites[e.direction]),c.config.before&&c.config.before.call(e,a,e),b.before&&b.before.call(e.scope||e,a,e),e},run:function(a,b){a=Ext.get(a),b=b||{};var c=this,d=a.dom.style,e,f=b.after;c.running[a.id]&&c.onTransitionEnd(null,a,{config:b,after:f}),b=this.initConfig(a,b);if(this.disableAnimations){for(e in b.to){if(!b.to.hasOwnProperty(e))continue;d[e]=b.to[e]}return this.onTransitionEnd(null,a,{config:b,after:f}),c}a.un("webkitTransitionEnd",c.onTransitionEnd,c),d.webkitTransitionDuration="0ms";for(e in b.from){if(!b.from.hasOwnProperty(e))continue;d[e]=b.from[e]}return setTimeout(function(){if(!a.dom)return;b.is3d===!0&&a.parent().setStyle({"-webkit-perspective":"1200","-webkit-transform-style":"preserve-3d"}),d.webkitTransitionDuration=b.duration+"ms",d.webkitTransitionProperty="all",d.webkitTransitionTimingFunction=b.easing,a.on("webkitTransitionEnd",c.onTransitionEnd,c,{config:b,after:f});for(e in b.to){if(!b.to.hasOwnProperty(e))continue;d[e]=b.to[e]}},b.delay||5),c.running[a.id]=b,c},onTransitionEnd:function(a,b,c){b=Ext.get(b);if(this.running[b.id]===undefined)return;var d=b.dom.style,e=c.config,f,g=this;b.un("webkitTransitionEnd",g.onTransitionEnd,g);if(e.autoClear)for(f in e.to){if(!e.to.hasOwnProperty(f))continue;d[f]=""}d.webkitTransitionDuration=null,d.webkitTransitionProperty=null,d.webkitTransitionTimingFunction=null,e.is3d&&b.parent().setStyle({"-webkit-perspective":"","-webkit-transform-style":""}),g.config.after&&g.config.after.call(e,b,e),c.after&&c.after.call(e.scope||g,b,e),delete g.running[b.id]}}),Ext.Anim.seed=1e3,Ext.Anim.run=function(a,b,c){a.isComponent&&(a=a.el),c=c||{};if(b.isAnim)b.run(a,c);else{Ext.isObject(b)&&(c.before&&b.before&&(c.before=Ext.createInterceptor(c.before,b.before,b.scope)),c.after&&b.after&&(c.after=Ext.createInterceptor(c.after,b.after,b.scope)),c=Ext.apply({},c,b),b=b.type);if(!Ext.anims[b])throw b+" is not a valid animation type.";a&&a.dom&&Ext.anims[b].run(a,c)}},Ext.anims={fade:new Ext.Anim({before:function(a){var b=1,c=1,d=a.getStyle("z-index")=="auto"?0:a.getStyle("z-index"),e=d;this.out?c=0:(e=d+1,b=0),this.from={opacity:b,"z-index":e},this.to={opacity:c,"z-index":e}}}),slide:new Ext.Anim({direction:"left",cover:!1,reveal:!1,before:function(a){var b=a.getStyle("z-index")=="auto"?0:a.getStyle("z-index"),c=b+1,d=0,e=0,f=0,g=0,h=a.getHeight(),i=a.getWidth();if(this.direction=="left"||this.direction=="right")this.out==!0?d=-i:f=i;else if(this.direction=="up"||this.direction=="down")this.out==!0?e=-h:g=h;if(this.direction=="right"||this.direction=="down")e*=-1,d*=-1,g*=-1,f*=-1;this.cover&&this.out?(d=0,e=0,c=b):this.reveal&&!this.out&&(f=0,g=0,c=b),this.from={"-webkit-transform":"translate3d("+f+"px, "+g+"px, 0)","z-index":c,opacity:.99},this.to={"-webkit-transform":"translate3d("+d+"px, "+e+"px, 0)","z-index":c,opacity:1}}}),pop:new Ext.Anim({scaleOnExit:!0,before:function(a){var b=1,c=1,d=1,e=1,f=a.getStyle("z-index")=="auto"?0:a.getStyle("z-index"),g=f,h=f;this.out?this.scaleOnExit?(c=.01,e=0):e=.8:(b=.01,g=f+1,h=f+1,d=0),this.from={"-webkit-transform":"scale("+b+")","-webkit-transform-origin":"50% 50%",opacity:d,"z-index":g},this.to={"-webkit-transform":"scale("+c+")","-webkit-transform-origin":"50% 50%",opacity:e,"z-index":h}}})},Ext.apply(Ext.anims,{flip:new Ext.Anim({is3d:!0,direction:"left",before:function(a){var b="Y",c=1,d=1,e=0,f=0;this.out?(f=-180,d=.8):(e=180,c=.8);if(this.direction=="up"||this.direction=="down")b="X";if(this.direction=="right"||this.direction=="left")f*=-1,e*=-1;this.from={"-webkit-transform":"rotate"+b+"("+e+"deg) scale("+c+")","-webkit-backface-visibility":"hidden"},this.to={"-webkit-transform":"rotate"+b+"("+f+"deg) scale("+d+")","-webkit-backface-visibility":"hidden"}}}),cube:new Ext.Anim({is3d:!0,direction:"left",style:"outer",before:function(a){var b="0% 0%",c=0,d=0,e="Y",f=0,g=0,h=1,i=1,j,k=a.getWidth(),l=a.getHeight(),m=!0,n=" translateX(0)",o="";if(this.direction=="left"||this.direction=="right")this.out?(b="100% 100%",g=k,i=.5,d=-90):(b="0% 0%",f=k,h=.5,c=90);else if(this.direction=="up"||this.direction=="down")e="X",this.out?(b="100% 100%",g=l,d=90):(b="0% 0%",f=l,c=-90);if(this.direction=="down"||this.direction=="right")c*=-1,d*=-1,b=b=="0% 0%"?"100% 100%":"0% 0%";this.style=="inner"&&(f*=-1,g*=-1,c*=-1,d*=-1,this.out?(o=n,b="100% 50%"):(o=" translateX(0px)",b="0% 50%")),this.from={"-webkit-transform":"rotate"+e+"("+c+"deg)"+(m?" translateZ("+f+"px)":"")+n,"-webkit-transform-origin":b},this.to={"-webkit-transform":"rotate"+e+"("+d+"deg) translateZ("+g+"px)"+o,"-webkit-transform-origin":b}},duration:250}),wipe:new Ext.Anim({before:function(a){var b=a.getStyle("z-index"),c="",d="100%",e="100%";this.out||(zIndex=b+1,c="-webkit-gradient(linear, left bottom, right bottom, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))",d=a.getHeight()*100+"px",e=a.getHeight(),this.from={"-webkit-mask-image":c,"-webkit-mask-size":a.getWidth()*3+"px "+a.getHeight()+"px","z-index":zIndex,"-webkit-mask-position-x":0},this.to={"-webkit-mask-image":c,"-webkit-mask-size":a.getWidth()*3+"px "+a.getHeight()+"px","z-index":zIndex,"-webkit-mask-position-x":-a.getWidth()*2+"px"})},duration:500})}),Ext.apply(Ext,{version:"1.1.1",versionDetail:{major:1,minor:1,patch:1},setup:function(a){if(a&&typeof a=="object"){a.addMetaTags!==!1&&this.addMetaTags(a);if(Ext.isFunction(a.onReady)){var b=this;Ext.onReady(function(){var c=arguments;a.fullscreen!==!1?Ext.Viewport.init(function(){a.onReady.apply(b,c)}):a.onReady.apply(this,c)},a.scope)}}},getDom:function(a){return!a||!document?null:a.dom?a.dom:typeof a=="string"?document.getElementById(a):a},removeNode:function(a){a&&a.parentNode&&a.tagName!="BODY"&&(Ext.EventManager.removeAll(a),a.parentNode.removeChild(a),delete Ext.cache[a.id])},addMetaTags:function(a){if(!Ext.isObject(a))return;var b=Ext.get(document.getElementsByTagName("head")[0]),c,d;Ext.is.Desktop||(c=Ext.get(document.createElement("meta")),c.set({name:"viewport",content:"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0;"}),b.appendChild(c)),Ext.is.iOS&&(a.fullscreen!==!1&&(c=Ext.get(document.createElement("meta")),c.set({name:"apple-mobile-web-app-capable",content:"yes"}),b.appendChild(c),Ext.isString(a.statusBarStyle)&&(c=Ext.get(document.createElement("meta")),c.set({name:"apple-mobile-web-app-status-bar-style",content:a.statusBarStyle}),b.appendChild(c))),a.tabletStartupScreen&&Ext.is.iPad&&(c=Ext.get(document.createElement("link")),c.set({rel:"apple-touch-startup-image",href:a.tabletStartupScreen}),b.appendChild(c)),a.phoneStartupScreen&&!Ext.is.iPad&&(c=Ext.get(document.createElement("link")),c.set({rel:"apple-touch-startup-image",href:a.phoneStartupScreen}),b.appendChild(c)),a.icon&&(a.phoneIcon=a.tabletIcon=a.icon),d=a.glossOnIcon===!1?"-precomposed":"",Ext.is.iPad&&Ext.isString(a.tabletIcon)?(c=Ext.get(document.createElement("link")),c.set({rel:"apple-touch-icon"+d,href:a.tabletIcon}),b.appendChild(c)):!Ext.is.iPad&&Ext.isString(a.phoneIcon)&&(c=Ext.get(document.createElement("link")),c.set({rel:"apple-touch-icon"+d,href:a.phoneIcon}),b.appendChild(c)))}}),function(){var a=function(){var a=Ext.getBody(),b=[];if(!a)return!1;var c=Ext.is;return c.Phone?b.push("x-phone"):c.Tablet?b.push("x-tablet"):c.Desktop&&b.push("x-desktop"),c.iPad&&b.push("x-ipad"),c.iOS&&b.push("x-ios"),c.Android&&b.push("x-android","x-android-"+c.AndroidMajorVersion),c.Blackberry&&b.push("x-bb"),c.Standalone&&b.push("x-standalone"),b.length&&a.addCls(b),!0};a()||Ext.onReady(a)}(),Ext.Viewport=new(Ext.extend(Ext.util.Observable,{constructor:function(){var a=this;this.addEvents("orientationchange","resize"),this.stretchSizes={},Ext.supports.OrientationChange?window.addEventListener("orientationchange",Ext.createDelegate(a.onOrientationChange,a),!1):window.addEventListener("resize",Ext.createDelegate(a.onResize,a),!1),Ext.desktop||document.addEventListener("touchstart",Ext.createDelegate(a.onTouchStartCapturing,a),!0)},init:function(a,b){var c=this,d=Math.max(window.innerHeight,window.innerWidth)*2,e=Ext.getBody();c.updateOrientation(),this.initialHeight=window.innerHeight,this.initialOrientation=this.orientation,e.setHeight(d),Ext.gesture.Manager.freeze(),this.scrollToTop(),setTimeout(function(){c.scrollToTop(),setTimeout(function(){c.scrollToTop(),c.initialHeight=Math.max(c.initialHeight,window.innerHeight),a&&a.apply(b||window),c.updateBodySize(),Ext.gesture.Manager.thaw()},500)},500)},scrollToTop:function(){Ext.is.iOS?Ext.is.Phone&&(document.body.scrollTop=document.body.scrollHeight):Ext.is.Blackberry?window.scrollTo(0,1e3):window.scrollTo(0,1)},updateBodySize:function(){Ext.getBody().setSize(window.innerWidth,window.innerHeight)},updateOrientation:function(){this.lastSize=this.getSize(),this.orientation=this.getOrientation()},onTouchStartCapturing:function(a){!Ext.currentlyFocusedField&&Ext.is.iOS&&this.scrollToTop()},onOrientationChange:function(){var a=this,b=Ext.getBody();if(!Ext.is.Phone){b.setHeight(b.getWidth()),this.updateOrientation(),this.fireEvent("orientationchange",this,this.orientation),a.scrollToTop(),a.updateBodySize(),a.fireResizeEvent(),Ext.repaint();return}Ext.gesture.Manager.freeze(),b.setHeight(b.getWidth()),this.updateOrientation(),this.fireEvent("orientationchange",this,this.orientation),setTimeout(function(){a.scrollToTop(),setTimeout(function(){a.updateBodySize(),a.fireResizeEvent(),Ext.gesture.Manager.thaw(),Ext.repaint()},200)},200)},fireResizeEvent:function(){var a=this;Ext.is.iOS?a.fireEvent("resize",a,a.getSize()):(this.resizeEventTimer&&clearTimeout(this.resizeEventTimer),this.resizeEventTimer=setTimeout(function(){a.fireEvent("resize",a,a.getSize())},500))},onResize:function(){if(this.orientation!=this.getOrientation())this.onOrientationChange();else{var a=this.getSize();!Ext.is.iOS&&!Ext.is.Desktop?(a.width==this.lastSize.width&&a.height>this.lastSize.height||a.height==this.lastSize.height&&a.width>this.lastSize.width)&&this.fireEvent("resize",this,a):this.fireEvent("resize",this,a)}},getSize:function(){var a={width:window.innerWidth,height:window.innerHeight};return Ext.is.Desktop||(a.height=this.orientation==this.initialOrientation?Math.max(this.initialHeight,a.height):a.height),a},getOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},getOrientation:function(){var a=this,b=a.getSize(),c,d;if(window.hasOwnProperty("orientation"))return d=window.orientation,c=Ext.is.Android&&Ext.is.AndroidMajorVersion===3,d%180===0?c?"landscape":"portrait":c?"portrait":"landscape";if(!Ext.is.iOS&&!Ext.is.Desktop)if(b.width==a.lastSize.width&&b.height<a.lastSize.height||b.height==a.lastSize.height&&b.width<a.lastSize.width)return a.orientation;return window.innerHeight>window.innerWidth?"portrait":"landscape"}})),Ext.util.TapRepeater=Ext.extend(Ext.util.Observable,{constructor:function(a,b){this.el=Ext.get(a),Ext.apply(this,b),this.addEvents("touchstart","tap","touchend"),this.el.on({touchstart:this.onTouchStart,touchend:this.onTouchEnd,scope:this}),(this.preventDefault||this.stopDefault)&&this.el.on("tap",this.eventOptions,this),Ext.util.TapRepeater.superclass.constructor.call(this)},interval:10,delay:250,preventDefault:!0,stopDefault:!1,timer:0,eventOptions:function(a){this.preventDefault&&a.preventDefault(),this.stopDefault&&a.stopEvent()},destroy:function(){Ext.destroy(this.el),this.clearListeners()},onTouchStart:function(a){clearTimeout(this.timer),this.pressClass&&this.el.addCls(this.pressClass),this.tapStartTime=new Date,this.fireEvent("touchstart",this,a),this.fireEvent("tap",this,a),this.accelerate&&(this.delay=400),this.timer=Ext.defer(this.tap,this.delay||this.interval,this,[a])},tap:function(a){this.fireEvent("tap",this,a),this.timer=Ext.defer(this.tap,this.accelerate?this.easeOutExpo(Ext.util.Date.getElapsed(this.tapStartTime),400,-390,12e3):this.interval,this,[a])},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},onTouchEnd:function(a){clearTimeout(this.timer),this.el.removeCls(this.pressClass),this.fireEvent("touchend",this,a)}}),this.JSON||(this.JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}return e}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Ext.util.JSON={encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}},Ext.encode=Ext.util.JSON.encode,Ext.decode=Ext.util.JSON.decode,Ext.util.JSONP={queue:[],current:null,request:function(a){a=a||{};if(!a.url)return;var b=this;a.params=a.params||{},a.callbackKey&&(a.params[a.callbackKey]="Ext.util.JSONP.callback");var c=Ext.urlEncode(a.params),d=document.createElement("script");d.type="text/javascript",this.queue.push({url:a.url,script:d,callback:a.callback||function(){},scope:a.scope||window,params:c||null}),this.current||this.next()},next:function(){this.current=null,this.queue.length&&(this.current=this.queue.shift(),this.current.script.src=this.current.url+(this.current.params?"?"+this.current.params:""),document.getElementsByTagName("head")[0].appendChild(this.current.script))},callback:function(a){this.current.callback.call(this.current.scope,a),document.getElementsByTagName("head")[0].removeChild(this.current.script),this.next()}},Ext.util.Draggable=Ext.extend(Ext.util.Observable,{baseCls:"x-draggable",draggingCls:"x-dragging",proxyCls:"x-draggable-proxy",outOfBoundRestrictFactor:1,direction:"both",fps:Ext.is.Blackberry?25:Ext.is.iOS||Ext.is.Desktop?80:50,constrain:window,threshold:0,delay:0,cancelSelector:null,disabled:!1,revert:!1,group:"base",useCssTransform:!0,grid:null,snap:null,proxy:null,stack:!1,animationDuration:300,updateBoundaryOnTouchStart:!0,offsetBoundary:null,dragging:!1,vertical:!1,horizontal:!1,monitorOrientation:!0,constructor:function(a,b){return this.el=Ext.get(a),this.id=a.id,b=b||{},Ext.apply(this,b),this.addEvents("offsetchange","offsetboundaryupdate"),Ext.util.Draggable.superclass.constructor.call(this,b),this.eventTarget==="parent"?this.eventTarget=this.el.parent():this.eventTarget=this.eventTarget?Ext.get(this.eventTarget):this.el,this.direction=="both"?(this.horizontal=!0,this.vertical=!0):this.direction=="horizontal"?this.horizontal=!0:this.vertical=!0,this.el.addCls(this.baseCls),this.proxy&&this.getProxyEl().addCls(this.proxyCls),this.startEventName=this.delay>0?"taphold":"dragstart",this.dragOptions=this.delay>0?{holdThreshold:this.delay}:{direction:this.direction,dragThreshold:this.threshold},this.container=window,this.constrain&&(this.constrain==="parent"?this.container=this.el.parent():this.constrain!==window&&(this.container=Ext.get(this.constrain))),this.offset=new Ext.util.Offset,this.linearAnimation={x:new Ext.util.Draggable.Animation.Linear,y:new Ext.util.Draggable.Animation.Linear},this.updateBoundary(!0),this.setDragging(!1),this.disabled||this.enable(),this},enable:function(){return this.setEnabled(!0)},disable:function(){return this.setEnabled(!1)},setEnabled:function(a){return this.eventTarget[a?"on":"un"](this.startEventName,this.onStart,this,this.dragOptions),this.eventTarget[a?"on":"un"]("drag",this.onDrag,this,this.dragOptions),this.eventTarget[a?"on":"un"]("dragend",this.onDragEnd,this,this.dragOptions),this.eventTarget[a?"on":"un"]("touchstart",this.onTouchStart,this),a?Ext.EventManager.onOrientationChange(this.onOrientationChange,this):Ext.EventManager.orientationEvent.removeListener(this.onOrientationChange,this),this.disabled=!a,this},setUseCssTransform:function(a){typeof a=="undefined"&&(a=!0);if(a!=this.useCssTransform){this.useCssTransform=a;var b=new Ext.util.Offset;a==!1?(this.setStyleOffset(this.offset
),this.setTransformOffset(b,!0)):(this.setTransformOffset(this.offset),this.setStyleOffset(b))}return this},setOffset:function(a,b){return this.horizontal||(a.x=0),this.vertical||(a.y=0),a instanceof Ext.util.Offset||(a=Ext.util.Offset.fromObject(a)),a.round(),this.offset.equals(a)||(b?this.startAnimation(a,b):(this.offset=a,this.region=new Ext.util.Region(this.initialRegion.top+a.y,this.initialRegion.right+a.x,this.initialRegion.bottom+a.y,this.initialRegion.left+a.x),this.useCssTransform?this.setTransformOffset(a):this.setStyleOffset(a),this.fireEvent("offsetchange",this,this.offset))),this},setTransformOffset:function(a,b){return b?this.getProxyEl().dom.style.webkitTransform="":Ext.Element.cssTranslate(this.getProxyEl(),a),this},setStyleOffset:function(a){var b=this.getProxyEl();return b.dom.style.left=a.x+"px",b.dom.style.top=a.y+"px",this},startAnimation:function(a,b){var c=this;this.stopAnimation();var d=Date.now();return b=Ext.isNumber(b)?b:this.animationDuration,this.linearAnimation.x.set({startOffset:this.offset.x,endOffset:a.x,startTime:d,duration:b}),this.linearAnimation.y.set({startOffset:this.offset.y,endOffset:a.y,startTime:d,duration:b}),this.isAnimating=!0,this.animationTimer=setInterval(function(){c.handleAnimationFrame()},this.getFrameDuration()),this},getFrameDuration:function(){return 1e3/this.fps},stopAnimation:function(){return this.isAnimating&&(clearInterval(this.animationTimer),this.isAnimating=!1,this.setDragging(!1)),this},handleAnimationFrame:function(){if(!this.isAnimating)return;var a=new Ext.util.Offset;a.x=this.linearAnimation.x.getOffset(),a.y=this.linearAnimation.y.getOffset(),this.setOffset(a),a.x===this.linearAnimation.x.endOffset&&a.y===this.linearAnimation.y.endOffset&&this.stopAnimation()},getOffset:function(){var a=this.offset.copy();return a.y=-a.y,a.x=-a.x,a},updateBoundary:function(a){var b;typeof a=="undefined"&&(a=!1),this.size={width:this.el.dom.scrollWidth,height:this.el.dom.scrollHeight},this.container===window?this.containerBox={left:0,top:0,right:this.container.innerWidth,bottom:this.container.innerHeight,width:this.container.innerWidth,height:this.container.innerHeight}:this.containerBox=this.container.getPageBox();var c=this.el.getXY();this.elBox={left:c[0]-this.offset.x,top:c[1]-this.offset.y,width:this.size.width,height:this.size.height},this.elBox.bottom=this.elBox.top+this.elBox.height,this.elBox.right=this.elBox.left+this.elBox.width,this.initialRegion=this.region=new Ext.util.Region(c[1],c[0]+this.elBox.width,c[1]+this.elBox.height,c[0]);var d=0,e=0,f=0,g=0;this.elBox.left<this.containerBox.left?e+=this.containerBox.left-this.elBox.left:g-=this.elBox.left-this.containerBox.left,this.elBox.right>this.containerBox.right?g-=this.elBox.right-this.containerBox.right:e+=this.containerBox.right-this.elBox.right,this.elBox.top<this.containerBox.top?f+=this.containerBox.top-this.elBox.top:d-=this.elBox.top-this.containerBox.top,this.elBox.bottom>this.containerBox.bottom?d-=this.elBox.bottom-this.containerBox.bottom:f+=this.containerBox.bottom-this.elBox.bottom,b=(new Ext.util.Region(d,e,f,g)).round();if(this.offsetBoundary&&this.offsetBoundary.equals(b))return this;this.offsetBoundary=b,this.fireEvent("offsetboundaryupdate",this,this.offsetBoundary);var h;return this.useCssTransform&&(h=Ext.Element.getComputedTransformOffset(this.getProxyEl()),(!this.offset.equals(h)||a)&&this.setOffset(h)),this},onTouchStart:function(){},onStart:function(a){return this.updateBoundaryOnTouchStart&&this.updateBoundary(),this.stopAnimation(),this.setDragging(!0),this.startTouchPoint=new Ext.util.Point(a.startX,a.startY),this.startOffset=this.offset.copy(),this.fireEvent("dragstart",this,a),!0},getNewOffsetFromTouchPoint:function(a){var b=a.x-this.startTouchPoint.x,c=a.y-this.startTouchPoint.y,d=this.offset.copy();return b==0&&c==0?d:(this.horizontal&&(d.x=this.startOffset.x+b),this.vertical&&(d.y=this.startOffset.y+c),d)},onDrag:function(a){if(!this.dragging)return;this.lastTouchPoint=Ext.util.Point.fromEvent(a);var b=this.getNewOffsetFromTouchPoint(this.lastTouchPoint);return this.offsetBoundary!=null&&(b=this.offsetBoundary.restrict(b,this.outOfBoundRestrictFactor)),this.setOffset(b),this.fireEvent("drag",this,a),!0},onDragEnd:function(a){return this.dragging&&(this.fireEvent("beforedragend",this,a),this.revert&&!this.cancelRevert?this.setOffset(this.startOffset,!0):this.setDragging(!1),this.fireEvent("dragend",this,a)),!0},onOrientationChange:function(){this.updateBoundary()},setDragging:function(a){return a?this.dragging||(this.dragging=!0,this.getProxyEl().addCls(this.draggingCls)):this.dragging&&(this.dragging=!1,this.getProxyEl().removeCls(this.draggingCls)),this},getProxyEl:function(){return this.proxy||this.el},destroy:function(){this.el.removeCls(this.baseCls),this.getProxyEl().removeCls(this.proxyCls),this.clearListeners(),this.disable()},reset:function(){this.startOffset=new Ext.util.Offset(0,0),this.setOffset(this.startOffset);var a=this.initialRegion.copy();this.updateBoundary(),this.initialRegion=this.region=this.getProxyEl().getPageBox(!0),this.startTouchPoint.x+=this.initialRegion.left-a.left,this.startTouchPoint.y+=this.initialRegion.top-a.top},moveTo:function(a,b){return this.setOffset(new Ext.util.Offset(a-this.initialRegion.left,b-this.initialRegion.top)),this},isDragging:function(){return this.dragging},isVertical:function(){return this.vertical},isHorizontal:function(){return this.horizontal}}),Ext.util.Draggable.Animation={},Ext.util.Draggable.Animation.Abstract=Ext.extend(Object,{startTime:null,startOffset:0,constructor:function(a){a=a||{},this.set(a),this.startTime||(this.startTime=Date.now())},set:function(a,b){return Ext.isObject(a)?Ext.apply(this,a):this[a]=b,this},getOffset:Ext.emptyFn}),Ext.util.Draggable.Animation.Linear=Ext.extend(Ext.util.Draggable.Animation.Abstract,{duration:0,endOffset:0,getOffset:function(){var a=this.endOffset-this.startOffset,b=Date.now()-this.startTime,c=Math.min(1,b/this.duration);return this.startOffset+c*a}}),Ext.util.Droppable=Ext.extend(Ext.util.Observable,{baseCls:"x-droppable",activeCls:"x-drop-active",invalidCls:"x-drop-invalid",hoverCls:"x-drop-hover",validDropMode:"intersect",disabled:!1,group:"base",tolerance:null,monitoring:!1,constructor:function(a,b){b=b||{},Ext.apply(this,b),this.addEvents("dropactivate","dropdeactivate","dropenter","dropleave","drop"),this.el=Ext.get(a),Ext.util.Droppable.superclass.constructor.call(this),this.disabled||this.enable(),this.el.addCls(this.baseCls)},onDragStart:function(a,b){a.group===this.group?(this.monitoring=!0,this.el.addCls(this.activeCls),this.region=this.el.getPageBox(!0),a.on({drag:this.onDrag,beforedragend:this.onBeforeDragEnd,dragend:this.onDragEnd,scope:this}),this.isDragOver(a)&&this.setCanDrop(!0,a,b),this.fireEvent("dropactivate",this,a,b)):(a.on({dragend:function(){this.el.removeCls(this.invalidCls)},scope:this,single:!0}),this.el.addCls(this.invalidCls))},isDragOver:function(a,b){return this.region[this.validDropMode](a.region)},onDrag:function(a,b){this.setCanDrop(this.isDragOver(a),a,b)},setCanDrop:function(a,b,c){a&&!this.canDrop?(this.canDrop=!0,this.el.addCls(this.hoverCls),this.fireEvent("dropenter",this,b,c)):!a&&this.canDrop&&(this.canDrop=!1,this.el.removeCls(this.hoverCls),this.fireEvent("dropleave",this,b,c))},onBeforeDragEnd:function(a,b){a.cancelRevert=this.canDrop},onDragEnd:function(a,b){this.monitoring=!1,this.el.removeCls(this.activeCls),a.un({drag:this.onDrag,beforedragend:this.onBeforeDragEnd,dragend:this.onDragEnd,scope:this}),this.canDrop&&(this.canDrop=!1,this.el.removeCls(this.hoverCls),this.fireEvent("drop",this,a,b)),this.fireEvent("dropdeactivate",this,a,b)},enable:function(){this.mgr||(this.mgr=Ext.util.Observable.observe(Ext.util.Draggable)),this.mgr.on({dragstart:this.onDragStart,scope:this}),this.disabled=!1},disable:function(){this.mgr.un({dragstart:this.onDragStart,scope:this}),this.disabled=!0},isDisabled:function(){return this.disabled},isMonitoring:function(){return this.monitoring}}),function(){Ext.ScrollManager=new Ext.AbstractManager,Ext.util.ScrollView=Ext.extend(Ext.util.Observable,{useIndicators:!0,indicatorConfig:{},indicatorMargin:4,constructor:function(a,b){var c=[],d=["vertical","horizontal"];Ext.util.ScrollView.superclass.constructor.call(this),["useIndicators","indicatorConfig","indicatorMargin"].forEach(function(a){b.hasOwnProperty(a)&&(this[a]=b[a],delete b[a])},this),b.scrollView=this,this.scroller=new Ext.util.Scroller(a,b),this.useIndicators===!0?d.forEach(function(a){this.scroller[a]&&c.push(a)},this):d.indexOf(this.useIndicators)!==-1&&c.push(this.useIndicators),this.indicators={},this.indicatorOffsetExtras={},c.forEach(function(a){this.indicators[a]=new Ext.util.Scroller.Indicator(this.scroller.container,Ext.apply({},this.indicatorConfig,{type:a}))},this),this.mon(this.scroller,{scrollstart:this.onScrollStart,scrollend:this.onScrollEnd,scroll:this.onScroll,scope:this})},onScrollStart:function(){this.showIndicators()},onScrollEnd:function(){this.hideIndicators()},onScroll:function(a){if(a.offsetBoundary==null||!this.indicators.vertical&&!this.indicators.horizontal)return;var b,c,d,e=a.offsetBoundary,f=a.offset;this.containerSize=a.containerBox,this.scrollerSize=a.size,this.outOfBoundOffset=e.getOutOfBoundOffset(f),this.restrictedOffset=e.restrict(f),this.boundarySize=e.getSize(),this.indicatorSizes||(this.indicatorSizes={vertical:0,horizontal:0}),this.indicatorOffsets||(this.indicatorOffsets={vertical:0,horizontal:0}),Ext.iterate(this.indicators,function(a,g){b=a=="vertical"?"height":"width",c=a=="vertical"?"y":"x",d=a=="vertical"?"bottom":"right",this.scrollerSize[b]<this.containerSize[b]?this.indicatorSizes[a]=this.containerSize[b]*(this.scrollerSize[b]/this.containerSize[b]):this.indicatorSizes[a]=this.containerSize[b]*(this.containerSize[b]/this.scrollerSize[b]),this.indicatorSizes[a]-=Math.abs(this.outOfBoundOffset[c]),this.indicatorSizes[a]=Math.max(this.indicatorMargin*4,this.indicatorSizes[a]),this.boundarySize[b]!=0?this.indicatorOffsets[a]=(e[d]-this.restrictedOffset[c])/this.boundarySize[b]*(this.containerSize[b]-this.indicatorSizes[a]):f[c]<e[d]?this.indicatorOffsets[a]=this.containerSize[b]-this.indicatorSizes[a]:this.indicatorOffsets[a]=0,g.setOffset(this.indicatorOffsetExtras[a]+this.indicatorOffsets[a]+this.indicatorMargin),g.setSize(this.indicatorSizes[a]-this.indicatorMargin*2)},this)},showIndicators:function(){return Ext.iterate(this.indicators,function(a,b){b.show(),this.indicatorOffsetExtras[a]=b.el.dom.parentNode[a==="vertical"?"scrollTop":"scrollLeft"]},this),this},hideIndicators:function(){Ext.iterate(this.indicators,function(a,b){b.hide()},this)},destroy:function(){return this.scroller.destroy(),this.indicators&&Ext.iterate(this.indicators,function(a,b){b.destroy()},this),Ext.util.ScrollView.superclass.destroy.apply(this,arguments)}}),Ext.util.Scroller=Ext.extend(Ext.util.Draggable,{baseCls:"",draggingCls:"",direction:"both",constrain:"parent",outOfBoundRestrictFactor:.5,acceleration:20,autoAdjustFps:!1,friction:.5,startMomentumResetTime:350,springTension:.3,minVelocityForAnimation:1,bounces:!0,momentum:!0,cancelRevert:!0,threshold:5,constructor:function(a,b){a=Ext.get(a);var c=Ext.ScrollManager.get(a.id);if(c)return Ext.apply(c,b);Ext.util.Scroller.superclass.constructor.apply(this,arguments),this.addEvents("scrollstart","scroll","scrollend","bouncestart","bounceend"),this.on({dragstart:this.onDragStart,offsetchange:this.onOffsetChange,scope:this}),Ext.ScrollManager.register(this),this.el.addCls("x-scroller"),this.container.addCls("x-scroller-parent");if(this.bounces!==!1){var d=this.bounces==="both"||this.bounces===!0,e=d||this.bounces==="horizontal",f=d||this.bounces==="vertical";this.bounces={x:e,y:f}}return this.theta=Math.log(1-this.friction/10),this.bouncingVelocityFactor=this.springTension*Math.E,this.bouncingTimeFactor=1/this.springTension*this.acceleration,this.decelerationAnimation||(this.decelerationAnimation={}),this.bouncingAnimation||(this.bouncingAnimation={}),["x","y"].forEach(function(a){this.decelerationAnimation[a]||(this.decelerationAnimation[a]=new Ext.util.Scroller.Animation.Deceleration({acceleration:this.acceleration,theta:this.theta})),this.bouncingAnimation[a]||(this.bouncingAnimation[a]=new Ext.util.Scroller.Animation.Bouncing({acceleration:this.acceleration,springTension:this.springTension}))},this),this},updateBoundary:function(a){return Ext.util.Scroller.superclass.updateBoundary.apply(this,arguments),this.snapToBoundary(a),this},onOffsetChange:function(a,b){this.fireEvent("scroll",a,{x:-b.x,y:-b.y})},onTouchStart:function(a){Ext.util.Scroller.superclass.onTouchStart.apply(this,arguments),this.stopMomentumAnimation()},onDragStart:function(a){this.fireEvent("scrollstart",this,a)},setStartTime:function(a){this.startTime=a.time,this.originalStartTime=a.event.originalTimeStamp?a.event.originalTimeStamp:a.time},onStart:function(a){if(Ext.util.Scroller.superclass.onStart.apply(this,arguments)!==!0)return;this.setStartTime(a),this.lastEventTime=a.time,this.startTimeOffset=this.offset.copy(),this.isScrolling=!0,this.momentumAnimationFramesHandled=0},onDrag:function(a){if(Ext.util.Scroller.superclass.onDrag.apply(this,arguments)!==!0)return;this.lastEventTime=a.time,this.lastEventTime-this.startTime>this.startMomentumResetTime&&(this.setStartTime(a),this.startTimeOffset=this.offset.copy())},onDragEnd:function(a){if(Ext.util.Scroller.superclass.onDragEnd.apply(this,arguments)!==!0)return;this.startMomentumAnimation(a)||this.fireScrollEndEvent()},onOrientationChange:function(){Ext.util.Scroller.superclass.onOrientationChange.apply(this,arguments),this.snapToBoundary()},fireScrollEndEvent:function(){this.isScrolling=!1,this.isMomentumAnimating=!1,this.snapToBoundary(),this.fireEvent("scrollend",this,this.getOffset()),this.snapToSlot()},getLastActualFps:function(){var a=(this.momentumAnimationEndTime-this.momentumAnimationStartTime-this.momentumAnimationProcessingTime)/1e3;return this.momentumAnimationFramesHandled/a},scrollTo:function(a,b){this.stopMomentumAnimation();var c=this.offsetBoundary.restrict(new Ext.util.Offset(-a.x,-a.y));return this.setOffset(c,b),this},scrollBy:function(a,b){this.stopMomentumAnimation();var c=this.offset.copy();return c.x+=a.x,c.y+=a.y,this.setOffset(c,b),this},setSnap:function(a){this.snap=a},snapToBoundary:function(a){var b=this.offsetBoundary.restrict(this.offset);return this.setOffset(b,a),this},snapToSlot:function(){var a=this.offsetBoundary.restrict(this.offset);a.round(),this.snap&&(this.snap===!0?this.snap={x:50,y:50}:Ext.isNumber(this.snap)&&(this.snap={x:this.snap,y:this.snap}),this.snap.y&&(a.y=Math.round(a.y/this.snap.y)*this.snap.y),this.snap.x&&(a.x=Math.round(a.x/this.snap.x)*this.snap.x),this.offset.equals(a)||this.scrollTo({x:-a.x,y:-a.y},this.snapDuration))},startMomentumAnimation:function(a){var b=this,c=a.event.originalTimeStamp?a.event.originalTimeStamp:a.time,d=Math.max(40,c-this.originalStartTime);this.fireEvent("beforemomentumanimationstart");if(!!this.momentum&&d<=this.startMomentumResetTime||!!this.offsetBoundary.isOutOfBound(this.offset)){var e=this.minVelocityForAnimation,f,g=this.offset.copy(),h,i=d/this.acceleration;return this.isBouncing={x:!1,y:!1},this.isDecelerating={x:!1,y:!1},this.momentumAnimationStartTime=a.time,this.momentumAnimationProcessingTime=0,this.bouncingData={x:null,y:null},this.momentumAnimationStartVelocity={x:(this.offset.x-this.startTimeOffset.x)/i,y:(this.offset.y-this.startTimeOffset.y)/i},this.momentumAnimationStartOffset=g,["x","y"].forEach(function(a){this.isDecelerating[a]=Math.abs(this.momentumAnimationStartVelocity[a])>e,this.bounces&&this.bounces[a]&&(h=this.offsetBoundary.restrict(a,g[a]),h!==g[a]&&(f=(g[a]-h)*this.bouncingVelocityFactor,this.bouncingData[a]={axis:a,offset:h,time:this.momentumAnimationStartTime,velocity:f},this.isBouncing[a]=!0,this.isDecelerating[a]=!1,this.fireEvent("bouncestart",this,this.bouncingData[a]),this.bouncingAnimation[a].set({startTime:this.bouncingData[a].time-this.bouncingTimeFactor,startOffset:this.bouncingData[a].offset,startVelocity:this.bouncingData[a].velocity}))),this.isDecelerating[a]&&this.decelerationAnimation[a].set({startVelocity:this.momentumAnimationStartVelocity[a],startOffset:this.momentumAnimationStartOffset[a],startTime:this.momentumAnimationStartTime})},this),this.isDecelerating.x||this.isDecelerating.y||this.isBouncing.x||this.isBouncing.y?(this.isMomentumAnimating=!0,this.momentumAnimationFramesHandled=0,this.fireEvent("momentumanimationstart"),b.handleMomentumAnimationFrame(),this.momentumAnimationTimer=setInterval(function(){b.handleMomentumAnimationFrame()},this.getFrameDuration()),!0):!1}return!1},stopMomentumAnimation:function(){if(this.isMomentumAnimating){this.momentumAnimationTimer&&clearInterval(this.momentumAnimationTimer),this.momentumAnimationEndTime=Date.now();var a=this.getLastActualFps();if(!this.maxFps||a>this.maxFps)this.maxFps=a;this.autoAdjustFps&&(this.fps=this.maxFps),this.isDecelerating={},this.isBouncing={},this.fireEvent("momentumanimationend"),this.fireScrollEndEvent()}return this},handleMomentumAnimationFrame:function(){if(!this.isMomentumAnimating)return;var a=Date.now(),b=this.offset.copy(),c=this.offsetBoundary,d,e,f;["x","y"].forEach(function(g){this.isDecelerating[g]?(b[g]=this.decelerationAnimation[g].getOffset(),d=this.momentumAnimationStartVelocity[g]*this.decelerationAnimation[g].getFrictionFactor(),f=c.getOutOfBoundOffset(g,b[g]),f!==0?(e=c.restrict(g,b[g]),this.bounces&&this.bounces[g]&&(this.bouncingData[g]={axis:g,offset:e,time:a,velocity:d},this.fireEvent("bouncestart",this,this.bouncingData[g]),this.bouncingAnimation[g].set({startTime:this.bouncingData[g].time,startOffset:this.bouncingData[g].offset,startVelocity:this.bouncingData[g].velocity}),this.isBouncing[g]=!0),this.isDecelerating[g]=!1):Math.abs(d)<=1&&(this.isDecelerating[g]=!1)):this.isBouncing[g]&&(b[g]=this.bouncingAnimation[g].getOffset(),e=c.restrict(g,b[g]),Math.abs(b[g]-e)<=1&&(this.isBouncing[g]=!1,this.fireEvent("bounceend",this,{axis:g}),b[g]=e))},this);if(!this.isDecelerating.x&&!this.isDecelerating.y&&!this.isBouncing.x&&!this.isBouncing.y){this.stopMomentumAnimation();return}this.momentumAnimationFramesHandled++,this.momentumAnimationProcessingTime+=Date.now()-a,this.setOffset(b)},destroy:function(){return Ext.ScrollManager.unregister(this),Ext.util.Scroller.superclass.destroy.apply(this,arguments)}}),Ext.util.Scroller.Animation={},Ext.util.Scroller.Animation.Deceleration=Ext.extend(Ext.util.Draggable.Animation.Abstract,{acceleration:30,theta:null,startVelocity:null,getOffset:function(){return this.startOffset-this.startVelocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Date.now()-this.startTime;return Math.exp(a/this.acceleration*this.theta)}}),Ext.util.Scroller.Animation.Bouncing=Ext.extend(Ext.util.Draggable.Animation.Abstract,{springTension:.3,acceleration:30,startVelocity:null,getOffset:function(){var a=Date.now()-this.startTime,b=a/this.acceleration*Math.pow(Math.E,-this.springTension*(a/this.acceleration));return this.startOffset+this.startVelocity*b}}),Ext.util.Scroller.Indicator=Ext.extend(Object,{baseCls:"x-scrollbar",ui:"dark",type:"horizontal",constructor:function(a,b){this.container=a,Ext.apply(this,b),this.el=this.container.createChild({cls:[this.baseCls,this.baseCls+"-"+this.type,this.baseCls+"-"+this.ui].join(" ")}),this.offset=new Ext.util.Offset,this.hide()},hide:function(){var a=this;return this.hideTimer&&clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){a.el.setStyle("opacity",0)},100),this},show:function(){return this.hideTimer&&clearTimeout(this.hideTimer),this.el.setStyle("opacity",1),this},setVisibility:function(a){return this[a?"show":"hide"]()},setSize:function(a){return this.size&&a>this.size&&(a=Math.round(a)),this.el.dom.style[this.type=="horizontal"?"width":"height"]=a+"px",this.size=a,this},setOffset:function(a){return this.type=="vertical"?this.offset.y=a:this.offset.x=a,!Ext.is.iOS&&!Ext.is.Desktop?this.type=="vertical"?this.el.dom.style.top=this.offset.y+"px":this.el.dom.style.left=this.offset.x+"px":Ext.Element.cssTranslate(this.el,this.offset),this}})}(),Ext.util.Sortable=Ext.extend(Ext.util.Observable,{baseCls:"x-sortable",direction:"vertical",cancelSelector:null,constrain:window,group:"base",revert:!0,itemSelector:null,handleSelector:null,disabled:!1,delay:0,sorting:!1,vertical:!1,vertical:!1,constructor:function(a,b){b=b||{},Ext.apply(this,b),this.addEvents("sortstart","sortend","sortchange"),this.el=Ext.get(a),Ext.util.Sortable.superclass.constructor.call(this),this.direction=="horizontal"?this.horizontal=!0:this.direction=="vertical"?this.vertical=!0:this.horizontal=this.vertical=!0,this.el.addCls(this.baseCls),this.startEventName=this.delay>0?"taphold":"tapstart",this.disabled||this.enable()},onStart:function(a,b){if(this.cancelSelector&&a.getTarget(this.cancelSelector))return;if(this.handleSelector&&!a.getTarget(this.handleSelector))return;this.sorting||this.onSortStart(a,b)},onSortStart:function(a,b){this.sorting=!0;var c=new Ext.util.Draggable(b,{threshold:0,revert:this.revert,direction:this.direction,constrain:this.constrain===!0?this.el:this.constrain,animationDuration:100});c.on({drag:this.onDrag,dragend:this.onDragEnd,scope:this}),this.dragEl=b,this.calculateBoxes(),c.dragging||c.onStart(a),this.fireEvent("sortstart",this,a)},calculateBoxes:function(){this.items=[];var a=this.el.select(this.itemSelector,!1),b=a.length,c,d,e,f;for(c=0;c<b;c++)e=a[c],e!=this.dragEl&&(d=Ext.fly(e).getPageBox(!0),d.el=e,this.items.push(d))},onDrag:function(a,b){var c=this.items,d=c.length,e=a.region,f=!1,g,h,i,j;for(g=0;g<d;g++){j=c[g],h=e.intersect(j);if(h){this.vertical&&Math.abs(h.top-h.bottom)>(e.bottom-e.top)/2?(e.bottom>j.top&&j.top>e.top?a.el.insertAfter(j.el):a.el.insertBefore(j.el),f=!0):this.horizontal&&Math.abs(h.left-h.right)>(e.right-e.left)/2&&(e.right>j.left&&j.left>e.left?a.el.insertAfter(j.el):a.el.insertBefore(j.el),f=!0);if(f){a.reset(),a.moveTo(e.left,e.top),this.calculateBoxes(),this.fireEvent("sortchange",this,a.el,this.el.select(this.itemSelector,!1).indexOf(a.el.dom));return}}}},onDragEnd:function(a,b){a.destroy(),this.sorting=!1,this.fireEvent("sortend",this,a,b)},enable:function(){this.el.on(this.startEventName,this.onStart,this,{delegate:this.itemSelector,holdThreshold:this.delay}),this.disabled=!1},disable:function(){this.el.un(this.startEventName,this.onStart,this),this.disabled=!0},isDisabled:function(){return this.disabled},isSorting:function(){return this.sorting},isVertical:function(){return this.vertical},isHorizontal:function(){return this.horizontal}}),function(){function a(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,d){return b[d]})}Date.useStrict=!1,Date.formatCodeToRegex=function(b,c){var d=Date.parseCodes[b];return d&&(d=typeof d=="function"?d():d,Date.parseCodes[b]=d),d?Ext.applyIf({c:d.c?a(d.c,c||"{0}"):d.c},d):{g:0,c:null,s:Ext.util.Format.escapeRegex(b)}};var b=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{M$:function(a,b){var c=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),d=(a||"").match(c);return d?new Date(((d[1]||"")+d[2])*1):null}},parseRegexes:[],formatFunctions:{M$:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(a){return Date.monthNames[a].substring(0,3)},getShortDayName:function(a){return Date.dayNames[a].substring(0,3)},getMonthNumber:function(a){return Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]},formatCodes:{d:"Ext.util.Format.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"Ext.util.Format.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"Ext.util.Format.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"this.getFullYear()",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.util.Format.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.util.Format.leftPad(this.getHours(), 2, '0')",i:"Ext.util.Format.leftPad(this.getMinutes(), 2, '0')",s:"Ext.util.Format.leftPad(this.getSeconds(), 2, '0')",u:"Ext.util.Format.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var a="Y-m-dTH:i:sP",b=[],c=0,d=a.length;c<d;++c){var e=a.charAt(c);b.push(e=="T"?"'T'":Date.getFormatCode(e))}return b.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(a,b,c,d,e,f,g){d=d||0,e=e||0,f=f||0,g=g||0;var h=new Date(a,b-1,c,d,e,f,g);return a==h.getFullYear()&&b==h.getMonth()+1&&c==h.getDate()&&d==h.getHours()&&e==h.getMinutes()&&f==h.getSeconds()&&g==h.getMilliseconds()},parseDate:function(a,b,c){var d=Date.parseFunctions;return d[b]==null&&Date.createParser(b),d[b](a,Ext.isDefined(c)?c:Date.useStrict)},getFormatCode:function(a){var b=Date.formatCodes[a];return b&&(b=typeof b=="function"?b():b,Date.formatCodes[a]=b),b||"'"+Ext.util.Format.escape(a)+"'"},createFormat:function(a){var b=[],c=!1,d="";for(var e=0;e<a.length;++e)d=a.charAt(e),!c&&d=="\\"?c=!0:c?(c=!1,b.push("'"+Ext.util.Format.escape(d)+"'")):b.push(Date.getFormatCode(d));Date.formatFunctions[a]=new Function("return "+b.join("+"))},createParser:function(){var c=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));","m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));","d = Ext.num(d, Ext.num(def.d, dt.getDate()));","h  = Ext.num(h, Ext.num(def.h, dt.getHours()));","i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));","s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));","ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = new Date(y, 0, 1, h, i, s, ms);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y, m, d, h, i, s, ms);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(d){var e=Date.parseRegexes.length,f=1,g=[],h=[],i=!1,j="",k=0,l,m;for(;k<d.length;++k)j=d.charAt(k),!i&&j=="\\"?i=!0:i?(i=!1,h.push(Ext.util.Format.escape(j))):(l=b(j,f),f+=l.g,h.push(l.s),l.g&&l.c&&(l.last?m=l:g.push(l.c)));m&&g.push(m),Date.parseRegexes[e]=new RegExp("^"+h.join("")+"$"),Date.parseFunctions[d]=new Function("input","strict",a(c,e,g.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var a=[],b=0;b<7;a.push(Date.getShortDayName(b)),++b);return{g:0,c:null,s:"(?:"+a.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var a=[],c=0;c<12;a.push(Date.getShortMonthName(c)),++c);return Ext.applyIf({s:"("+a.join("|")+")"},b("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return b("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:function(){return b("A")},A:{calcLast:!0,g:1,c:"if (results[{0}] == 'AM') {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM)"},g:function(){return b("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return b("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.util.Format.leftPad(hr, 2, '0') + Ext.util.Format.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.util.Format.leftPad(hr, 2, '0') + Ext.util.Format.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var a=[],c=[b("Y",1),b("m",2),b("d",3),b("h",4),b("i",5),b("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",b("P",8).c,"}else{",b("O",8).c,"}","}"].join("\n")}];for(var d=0,e=c.length;d<e;++d)a.push(c[d].c);return{g:1,c:a.join(""),s:[c[0].s,"(?:","-",c[1].s,"(?:","-",c[2].s,"(?:","(?:T| )?",c[3].s,":",c[4].s,"(?::",c[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}(),Ext.apply(Date.prototype,{dateFormat:function(a){return Date.formatFunctions[a]==null&&Date.createFormat(a),Date.formatFunctions[a].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(a){return(this.getTimezoneOffset()>0?"-":"+")+Ext.util.Format.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(a?":":"")+Ext.util.Format.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var a=0,b=this.clone(),c=this.getMonth(),d;for(d=0,b.setDate(1),b.setMonth(0);d<c;b.setMonth(++d))a+=b.getDaysInMonth();return a+this.getDate()-1},getWeekOfYear:function(){var a=864e5,b=7*a;return function(){var c=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/a,d=Math.floor(c/7),e=(new Date(d*b)).getUTCFullYear();return d-Math.floor(Date.UTC(e,0,7)/b)+1}}(),isLeapYear:function(){var a=this.getFullYear();return(a&3)==0&&!!(a%100||a%400==0&&a)},getFirstDayOfMonth:function(){var a=(this.getDay()-(this.getDate()-1))%7;return a<0?a+7:a},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var b=this.getMonth();return b==1&&this.isLeapYear()?29:a[b]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return(new Date(this.getFullYear(),0,1)).getTimezoneOffset
()!=this.getTimezoneOffset()},clearTime:function(a){if(a)return this.clone().clearTime();var b=this.getDate();this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0);if(this.getDate()!=b){for(var c=1,d=this.add(Date.HOUR,c);d.getDate()!=b;c++,d=this.add(Date.HOUR,c));this.setDate(b),this.setHours(d.getHours())}return this},add:function(a,b){var c=this.clone();if(!a||b===0)return c;switch(a.toLowerCase()){case Date.MILLI:c.setMilliseconds(this.getMilliseconds()+b);break;case Date.SECOND:c.setSeconds(this.getSeconds()+b);break;case Date.MINUTE:c.setMinutes(this.getMinutes()+b);break;case Date.HOUR:c.setHours(this.getHours()+b);break;case Date.DAY:c.setDate(this.getDate()+b);break;case Date.MONTH:var d=this.getDate();d>28&&(d=Math.min(d,this.getFirstDateOfMonth().add("mo",b).getLastDateOfMonth().getDate())),c.setDate(d),c.setMonth(this.getMonth()+b);break;case Date.YEAR:c.setFullYear(this.getFullYear()+b)}return c},between:function(a,b){var c=this.getTime();return a.getTime()<=c&&c<=b.getTime()}}),Date.prototype.format=Date.prototype.dateFormat,Ext.data.Connection=Ext.extend(Ext.util.Observable,{method:"post",url:null,disableCaching:!0,disableCachingParam:"_dc",timeout:3e4,useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",constructor:function(a){a=a||{},Ext.apply(this,a),this.addEvents("beforerequest","requestcomplete","requestexception"),this.requests={},Ext.data.Connection.superclass.constructor.call(this)},request:function(a){var b=this;if(b.fireEvent("beforerequest",b,a)!==!1){var c=a.params,d=a.url||b.url,e=a.urlParams,f=b.extraParams,g,h,i,j,k,l;Ext.isFunction(c)&&(c=c.call(a.scope||window,a)),Ext.isFunction(d)&&(d=d.call(a.scope||window,a)),h=a.rawData||a.xmlData||a.jsonData||null,a.jsonData&&!Ext.isPrimitive(a.jsonData)&&(h=Ext.encode(h)),c=Ext.urlEncode(f,Ext.isObject(c)?Ext.urlEncode(c):c),e=Ext.isObject(e)?Ext.urlEncode(e):e,j=(a.method||(c||h?"POST":"GET")).toUpperCase(),j==="GET"&&a.disableCaching!==!1&&b.disableCaching&&(d=Ext.urlAppend(d,a.disableCachingParam||b.disableCachingParam+"="+(new Date).getTime())),(j=="GET"||h)&&c&&(d=Ext.urlAppend(d,c),c=null),e&&(d=Ext.urlAppend(d,e)),(a.autoAbort===!0||b.autoAbort)&&b.abort(),l=this.getXhrInstance(),l.open(j.toUpperCase(),d,!0),i=Ext.apply({},a.headers||{},b.defaultHeaders||{});if(!i["Content-Type"]&&(h||c)){var m=b.defaultPostHeader,n=a.jsonData,o=a.xmlData;h&&(a.rawData?m="text/plain":o&&Ext.isDefined(o)?m="text/xml":n&&Ext.isDefined(n)&&(m="application/json")),i["Content-Type"]=m}b.useDefaultXhrHeader&&!i["X-Requested-With"]&&(i["X-Requested-With"]=b.defaultXhrHeader);for(k in i)if(i.hasOwnProperty(k))try{l.setRequestHeader(k,i[k])}catch(p){b.fireEvent("exception",k,i[k])}return g={id:++Ext.data.Connection.requestId,xhr:l,headers:i,options:a,timeout:setTimeout(function(){g.timedout=!0,b.abort(g)},a.timeout||b.timeout)},b.requests[g.id]=g,l.onreadystatechange=Ext.createDelegate(b.onStateChange,b,[g]),l.send(h||c||null),g}return a.callback?a.callback.apply(a.scope,[a,undefined,undefined]):null},getXhrInstance:function(){return new XMLHttpRequest},isLoading:function(a){return a&&!{0:!0,4:!0}[a.xhr.readyState]},abort:function(a){if(a&&this.isLoading(a))a.timedout||(a.aborted=!0),a.xhr.abort();else if(!a){var b;for(b in this.requests){if(!this.requests.hasOwnProperty(b))continue;this.abort(this.requests[b])}}},onStateChange:function(a){a.xhr.readyState==4&&(clearTimeout(a.timeout),delete a.timeout,this.onComplete(a))},onComplete:function(a){var b=a.xhr.status,c=a.options,d=!0,e;if(b>=200&&b<300||b==304)e=this.createResponse(a),this.fireEvent("requestcomplete",this,e,c),c.success&&(c.scope?c.success.call(c.scope,e,c):c.success(e,c));else{d=!1;switch(b){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:e=this.createException(a);break;default:e=this.createResponse(a)}this.fireEvent("requestexception",this,e,c),c.failure&&(c.scope?c.failure.call(c.scope,e,c):c.failure(e,c))}c.callback&&(c.scope?c.callback.call(c.scope,c,d,e):c.callback(c,d,e)),delete this.requests[a.id]},createResponse:function(a){var b=a.xhr,c={},d=b.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),e=d.length,f,g,h,i;while(e--)f=d[e],g=f.indexOf(":"),g>=0&&(h=f.substr(0,g).toLowerCase(),f.charAt(g+1)==" "&&++g,c[h]=f.substr(g+1));return delete a.xhr,{request:a,requestId:a.id,status:b.status,statusText:b.statusText,getResponseHeader:function(a){return c[a.toLowerCase()]},getAllResponseHeaders:function(){return c},responseText:b.responseText,responseXML:b.responseXML}},createException:function(a){return{request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?"transaction aborted":"communication failure",aborted:a.aborted,timedout:a.timedout}}}),Ext.data.Connection.requestId=0,Ext.Ajax=new Ext.data.Connection({autoAbort:!1}),Ext.util.EventSimulator=Ext.extend(Object,{supportedEvents:{touch:["touchstart","touchmove","touchend","gesturestart","gesturechange","gestureend"],mouse:["mousedown","mousemove","mouseup","click"]},getEventTypeByName:function(a){var b=null;return Ext.iterate(this.supportedEvents,function(c,d){d.indexOf(a)!=-1&&(b=c)}),b},fire:function(a,b,c){a=a.toLowerCase(),arguments.length==2&&(c=b,b=document);switch(this.getEventTypeByName(a)){case"touch":this.fireTouchEvent.call(this,a,b,c);break;case"mouse":this.fireMouseEvent.call(this,a,b,c);break;default:throw new Error("Event type "+a+" is currently not supported")}return this},createEvent:function(a,b){},createEventData:function(a,b){switch(this.getEventTypeByName(a.type)){case"touch":return this.createTouchEventData(a.type,a.target,a,b);case"mouse":return this.createMouseEventData(a.type,a.target,a,b);default:throw new Error("Event type "+a.type+" is currently not supported")}},fireTouchEvent:function(a,b,c){var d=this.createTouchEventData(a,b,c),e=this.createTouchEvent(a,d);return e.isSimulated=!0,b.dispatchEvent(e)},createTouchEventData:function(a,b,c,d){var e={type:a,timeStamp:Date.now(),bubbles:!0,cancelable:!0,detail:1,screenX:0,screenY:0,pageX:0,pageY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,scale:1,rotation:0};return d||(e.target=b,e.view=document.defaultView),c&&Ext.iterate(e,function(a,b){c.hasOwnProperty(a)&&(e[a]=c[a])}),["touches","targetTouches","changedTouches"].forEach(function(a){c.hasOwnProperty(a)?e[a]=this.createTouchList(c[a],b,d):e[a]=this.createTouchList(e,b,d)},this),e},createTouchEvent:function(a,b){typeof a!="string"&&(b=a,a=a.type);var c=document.createEvent("TouchEvent");return c.initTouchEvent.length==9?c.initTouchEvent(b.touches,b.targetTouches,b.changedTouches,a,b.view,b.screenX,b.screenY,b.clientX,b.clientY):c.initTouchEvent(a,b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.pageX,b.pageY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.touches,b.targetTouches,b.changedTouches,b.scale,b.rotation),c},createTouch:function(a,b,c){return!document.createTouch||c?{pageX:b.pageX,pageY:b.pageY,clientX:b.pageX,clientY:b.pageY,screenX:b.pageX,screenY:b.pageY,identifier:+b.identifier||0}:document.createTouch(document.defaultView,a,+b.identifier||0,+b.pageX||0,+b.pageY||0,+b.screenX||0,+b.screenY||0)},createTouchList:function(a,b,c){var d,e=[];Ext.isObject(a)&&typeof a.target!="undefined"&&(a=[a]);if(a)for(var f=0;f<a.length;f++)!c&&!a[f].target&&(a[f].target=b),d=this.createTouch(a[f].target,a[f],c),e.push(d);return!document.createTouchList||c?e:document.createTouchList.apply(document,e)},fireMouseEvent:function(a,b,c){var d=this.createMouseEventData(a,b,c),e=this.createMouseEvent(a,d);return e.isSimulated=!0,e.originalTimeStamp=d.timeStamp,b.dispatchEvent(e)},createMouseEventData:function(a,b,c,d){var e={type:a,timeStamp:Date.now(),bubbles:!0,cancelable:a!="mousemove",detail:1,screenX:0,screenY:0,pageX:0,pageY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},f=["screen","client","page"],g={x:0,y:0};return d||(e.target=b,e.view=window),c&&Ext.iterate(e,function(a,b){c.hasOwnProperty(a)&&(e[a]=c[a])}),f.forEach(function(a){e[a+"X"]!=0&&(g.x=e[a+"X"]),e[a+"Y"]!=0&&(g.y=e[a+"Y"])}),f.forEach(function(a){e[a+"X"]==0&&g.x!=0&&(e[a+"X"]=g.x),e[a+"Y"]==0&&g.y!=0&&(e[a+"Y"]=g.y)}),e},createMouseEvent:function(a,b){var c=document.createEvent("MouseEvents");return c.initMouseEvent(a,b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget),c}}),Ext.util.EventRecorder=Ext.extend(Ext.util.Observable,{eventCollection:null,currentEventSetName:null,constructor:function(){return this.addEvents("replaystart","beforecalculatetarget","beforefire","afterfire","aftercalculatetarget","replayend","interrupted"),this.eventSets={},this.interruptedIndexes={},this},getEventSet:function(a){if(typeof a!="string"){if(this.currentEventSetName==null)throw new Error("No EventSet is currently used");a=this.currentEventSetName}return typeof this.eventSets[a]=="undefined"&&(this.eventSets[a]=[]),this.eventSets[a]},start:function(a){this.currentEventSetName=a},record:function(a,b){if(typeof a!="string"){if(this.currentEventSetName==null)return;b=a,a=this.currentEventSetName}var c=this.getEventSimulator().createEventData(b,!0);this.getEventSet(a).push(c)},setEventSet:function(a,b){this.eventSets[a]=b},erase:function(a){this.getEventSet(a).length=0},stopReplay:function(){this.interruptFlag=!0},resumeReplay:function(a){var b=this.interruptedIndexes[a]||0;this.replay(a,b)},replay:function(a,b){var c=this.getEventSimulator(),d=this.getEventSet(a),e,f=0,g=0,h,i,j,k=["touchmove","touchend","mousemove","mouseup"],l=this;typeof b=="undefined"&&(b=0),g=b,e=d.length,this.interruptFlag=!1,e>0&&(this.fireEvent("replaystart",a,b),setTimeout(function(){h=d[g];if(h){k.indexOf(h.type)===-1&&(l.fireEvent("beforecalculatetarget",h.type,h),i=Ext.util.Point.fromEvent(h),j=document.elementFromPoint(i.x,i.y),l.fireEvent("aftercalculatetarget",h.type,j,h));if(j){if(l.interruptFlag===!0){l.interruptFlag=!1,l.interruptedIndexes[a]=g,l.fireEvent("interrupted",g),l.fireEvent("replayend",a,!0);return}l.fireEvent("beforefire",h.type,j,h),c.fire(h.type,j,h),l.fireEvent("afterfire",h.type,j,h)}++g<e?setTimeout(arguments.callee,d[g].timeStamp-h.timeStamp):l.fireEvent("replayend",a,!1)}},f))},end:function(){this.currentEventSetName=null},getEventSimulator:function(){return this._eventSimulator||(this._eventSimulator=new Ext.util.EventSimulator),this._eventSimulator},setEventSimulator:function(a){if(a instanceof Ext.util.EventSimulator)this._eventSimulator=a;else throw new Error("eventSimulator must be an instance of Ext.util.EventSimulator")},save:function(a){}}),Ext.gesture.Manager=new Ext.AbstractManager({eventNames:{start:"touchstart",move:"touchmove",end:"touchend"},defaultPreventedMouseEvents:["click"],clickMoveThreshold:5,init:function(){this.targets=[],this.followTouches=[],this.currentGestures=[],this.currentTargets=[],Ext.supports.Touch||Ext.apply(this.eventNames,{start:"mousedown",move:"mousemove",end:"mouseup"}),this.listenerWrappers={start:Ext.createDelegate(this.onTouchStart,this),move:Ext.createDelegate(this.onTouchMove,this),end:Ext.createDelegate(this.onTouchEnd,this),mouse:Ext.createDelegate(this.onMouseEvent,this)},this.attachListeners()},freeze:function(){this.isFrozen=!0},thaw:function(){this.isFrozen=!1},getEventSimulator:function(){return this.eventSimulator||(this.eventSimulator=new Ext.util.EventSimulator),this.eventSimulator},attachListeners:function(){Ext.iterate(this.eventNames,function(a,b){document.addEventListener(b,this.listenerWrappers[a],!1)},this),Ext.supports.Touch&&this.defaultPreventedMouseEvents.forEach(function(a){document.addEventListener(a,this.listenerWrappers.mouse,!0)},this)},detachListeners:function(){Ext.iterate(this.eventNames,function(a,b){document.removeEventListener(b,this.listenerWrappers[a],!1)},this),Ext.supports.Touch&&this.defaultPreventedMouseEvents.forEach(function(a){document.removeEventListener(a,this.listenerWrappers.mouse,!0)},this)},onMouseEvent:function(a){a.isSimulated||(a.preventDefault(),a.stopPropagation())},onTouchStart:function(a){var b=[],c=a.target;if(a.stopped===!0)return;Ext.is.Android&&(!c.tagName||["input","textarea","select"].indexOf(c.tagName.toLowerCase())===-1)&&a.preventDefault();if(this.isFrozen)return;this.startEvent&&this.onTouchEnd(a),this.locks={},this.currentTargets=[c];while(c)this.targets.indexOf(c)!==-1&&b.unshift(c),c=c.parentNode,this.currentTargets.push(c);this.startEvent=a,this.startPoint=Ext.util.Point.fromEvent(a),this.lastMovePoint=null,this.isClick=!0,this.handleTargets(b,a)},onTouchMove:function(a){Ext.is.MultiTouch&&a.preventDefault();if(!this.startEvent)return;Ext.is.Desktop&&(a.target=this.startEvent.target);if(this.isFrozen)return;var b=this.currentGestures,c,d=a.changedTouches?a.changedTouches[0]:a;this.lastMovePoint=Ext.util.Point.fromEvent(a),Ext.supports.Touch&&this.isClick&&!this.lastMovePoint.isWithin(this.startPoint,this.clickMoveThreshold)&&(this.isClick=!1);for(var e=0;e<b.length;e++){if(a.stopped)break;c=b[e],c.listenForMove&&c.onTouchMove(a,d)}},onTouchEnd:function(a){Ext.is.Blackberry&&a.preventDefault();if(this.isFrozen)return;var b=this.currentGestures.slice(0),c=b.length,d,e,f,g=!1,h=a.changedTouches?a.changedTouches[0]:a;this.startPoint&&(f=Ext.util.Point.fromEvent(a),(this.lastMovePoint||this.startPoint).equals(f)||(g=!0));for(d=0;d<c;d++)e=b[d],!a.stopped&&e.listenForEnd&&(g&&e.onTouchMove(a,h),e.onTouchEnd(a,h)),this.stopGesture(e);Ext.supports.Touch&&this.isClick&&(this.isClick=!1,this.getEventSimulator().fire("click",this.startEvent.target,h)),this.lastMovePoint=null,this.followTouches=[],this.startedChangedTouch=!1,this.currentTargets=[],this.startEvent=null,this.startPoint=null},handleTargets:function(a,b){var c=a.length,d;this.startedChangedTouch=!1,this.startedTouches=Ext.supports.Touch?b.touches:[b];for(d=0;d<c;d++){if(b.stopped)break;this.handleTarget(a[d],b,!0)}for(d=c-1;d>=0;d--){if(b.stopped)break;this.handleTarget(a[d],b,!1)}this.startedChangedTouch&&(this.followTouches=this.followTouches.concat(Ext.supports.Touch&&b.targetTouches?Ext.toArray(b.targetTouches):[b]))},handleTarget:function(a,b,c){var d=Ext.Element.data(a,"x-gestures")||[],e=d.length,f,g;for(f=0;f<e;f++){g=d[f];if(!!g.capture==!!c&&this.followTouches.length<g.touches&&(Ext.supports.Touch&&b.targetTouches?b.targetTouches.length===g.touches:!0)){this.startedChangedTouch=!0,this.startGesture(g),g.listenForStart&&g.onTouchStart(b,b.changedTouches?b.changedTouches[0]:b);if(b.stopped)break}}},startGesture:function(a){a.started=!0,this.currentGestures.push(a)},stopGesture:function(a){a.started=!1,this.currentGestures.remove(a)},addEventListener:function(a,b,c,d){a=Ext.getDom(a),d=d||{};var e=this.targets,f=this.getGestureName(b),g=Ext.Element.data(a,"x-gestures"),h;g||(g=[],Ext.Element.data(a,"x-gestures",g));if(!f)throw new Error("Trying to subscribe to unknown event "+b);e.indexOf(a)===-1&&this.targets.push(a),h=this.get(a.id+"-"+f),h||(h=this.create(Ext.apply({},d,{target:a,type:f})),g.push(h)),h.addListener(b,c),this.startedChangedTouch&&this.currentTargets.contains(a)&&!h.started&&!d.subsequent&&(this.startGesture(h),h.listenForStart&&h.onTouchStart(this.startEvent,this.startedTouches[0]))},removeEventListener:function(a,b,c){a=Ext.getDom(a);var d=this.getGestureName(b),e=Ext.Element.data(a,"x-gestures")||[],f;f=this.get(a.id+"-"+d);if(f){f.removeListener(b,c);for(d in f.listeners)return;f.destroy(),e.remove(f),Ext.Element.data(a,"x-gestures",e)}},getGestureName:function(a){return this.names&&this.names[a]},registerType:function(a,b){var c=b.prototype.handles,d,e;this.types[a]=b,b[this.typeName]=a,c||(c=b.prototype.handles=[a]),this.names=this.names||{};for(d=0,e=c.length;d<e;d++)this.names[c[d]]=a}}),Ext.regGesture=function(){return Ext.gesture.Manager.registerType.apply(Ext.gesture.Manager,arguments)},Ext.TouchEventObjectImpl=Ext.extend(Object,{constructor:function(a,b){a&&this.setEvent(a,b)},setEvent:function(a,b){return Ext.apply(this,{event:a,time:a.timeStamp}),this.touches=a.touches||[a],this.changedTouches=a.changedTouches||[a],this.targetTouches=a.targetTouches||[a],b?(this.target=b.target,Ext.apply(this,b)):this.target=a.target,this},stopEvent:function(){this.stopPropagation(),this.preventDefault()},stopPropagation:function(){this.event.stopped=!0},preventDefault:function(){this.event.preventDefault()},getTarget:function(a,b,c){return a?Ext.fly(this.target).findParent(a,b,c):c?Ext.get(this.target):this.target}}),Ext.TouchEventObject=new Ext.TouchEventObjectImpl,Ext.gesture.Gesture=Ext.extend(Object,{listenForStart:!0,listenForEnd:!0,listenForMove:!0,disableLocking:!1,touches:1,constructor:function(a){a=a||{},Ext.apply(this,a),this.target=Ext.getDom(this.target),this.listeners={};if(!this.target)throw new Error("Trying to bind a "+this.type+" event to element that does'nt exist: "+this.target);this.id=this.target.id+"-"+this.type,Ext.gesture.Gesture.superclass.constructor.call(this),Ext.gesture.Manager.register(this)},addListener:function(a,b){this.listeners[a]=this.listeners[a]||[],this.listeners[a].push(b)},removeListener:function(a,b){var c=this.listeners[a];if(c){c.remove(b),c.length==0&&delete this.listeners[a];for(a in this.listeners)if(this.listeners.hasOwnProperty(a))return;this.listeners={}}},fire:function(a,b,c){var d=this.listeners&&this.listeners[a],e=d&&d.length,f;if(!this.disableLocking&&this.isLocked(a))return!1;if(e){c=Ext.apply(c||{},{time:b.timeStamp,type:a,gesture:this,target:b.target.nodeType==3?b.target.parentNode:b.target});for(f=0;f<e;f++)d[f](b,c)}return!0},stop:function(){Ext.gesture.Manager.stopGesture(this)},lock:function(){if(!this.disableLocking){var a=arguments,b=a.length,c;for(c=0;c<b;c++)Ext.gesture.Manager.locks[a[c]]=this.id}},unlock:function(){if(!this.disableLocking){var a=arguments,b=a.length,c;for(c=0;c<b;c++)Ext.gesture.Manager.locks[a[c]]==this.id&&delete Ext.gesture.Manager.locks[a[c]]}},isLocked:function(a){var b=Ext.gesture.Manager.locks[a];return!!b&&b!==this.id},getLockingGesture:function(a){var b=Ext.gesture.Manager.locks[a];return b?Ext.gesture.Manager.get(b)||null:null},onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,destroy:function(){this.stop(),this.listeners=null,Ext.gesture.Manager.unregister(this)}}),Ext.gesture.Touch=Ext.extend(Ext.gesture.Gesture,{handles:["touchstart","touchmove","touchend","touchdown"],touchDownInterval:500,onTouchStart:function(a,b){this.startX=this.previousX=b.pageX,this.startY=this.previousY=b.pageY,this.startTime=this.previousTime=a.timeStamp,this.fire("touchstart",a),this.lastEvent=a,this.listeners&&this.listeners.touchdown&&(this.touchDownIntervalId=setInterval(Ext.createDelegate(this.touchDownHandler,this),this.touchDownInterval))},onTouchMove:function(a,b){this.fire("touchmove",a,this.getInfo(b)),this.lastEvent=a},onTouchEnd:function(a){this.fire("touchend",a,this.lastInfo),clearInterval(this.touchDownIntervalId)},touchDownHandler:function(){this.fire("touchdown",this.lastEvent,this.lastInfo)},getInfo:function(a){var b=Date.now(),c=a.pageX-this.startX,d=a.pageY-this.startY,e={startX:this.startX,startY:this.startY,previousX:this.previousX,previousY:this.previousY,pageX:a.pageX,pageY:a.pageY,deltaX:c,deltaY:d,absDeltaX:Math.abs(c),absDeltaY:Math.abs(d),previousDeltaX:a.pageX-this.previousX,previousDeltaY:a.pageY-this.previousY,time:b,startTime:this.startTime,previousTime:this.previousTime,deltaTime:b-this.startTime,previousDeltaTime:b-this.previousTime};return this.previousTime=e.time,this.previousX=e.pageX,this.previousY=e.pageY,this.lastInfo=e,e}}),Ext.regGesture("touch",Ext.gesture.Touch),Ext.gesture.Tap=Ext.extend(Ext.gesture.Gesture,{handles:["tapstart","tapcancel","tap","doubletap","taphold","singletap"],cancelThreshold:10,doubleTapThreshold:800,singleTapThreshold:400,holdThreshold:1e3,fireClickEvent:!1,onTouchStart:function(a,b){var c=this;c.startX=b.pageX,c.startY=b.pageY,c.fire("tapstart",a,c.getInfo(b)),this.listeners.taphold&&(c.timeout=setTimeout(function(){c.fire("taphold",a,c.getInfo(b)),delete c.timeout},c.holdThreshold)),c.lastTouch=b},onTouchMove:function(a,b){var c=this;c.isCancel(b)&&(c.fire("tapcancel",a,c.getInfo(b)),c.timeout&&(clearTimeout(c.timeout),delete c.timeout),c.stop()),c.lastTouch=b},onTouchEnd:function(a){var b=this,c=b.getInfo(b.lastTouch);this.fireTapEvent(a,c),b.lastTapTime&&a.timeStamp-b.lastTapTime<=b.doubleTapThreshold?(b.lastTapTime=null,a.preventDefault(),b.fire("doubletap",a,c)):b.lastTapTime=a.timeStamp,b.listeners&&b.listeners.singletap&&b.singleTapThreshold&&!b.preventSingleTap&&(b.fire("singletap",a,c),b.preventSingleTap=!0,setTimeout(function(){b.preventSingleTap=!1},b.singleTapThreshold)),b.timeout&&(clearTimeout(b.timeout),delete b.timeout)},fireTapEvent:function(a,b){this.fire("tap",a,b),a.event&&(a=a.event);var c=(a.changedTouches?a.changedTouches[0]:a).target;if(!c.disabled&&this.fireClickEvent){var d=document.createEvent("MouseEvent");d.initMouseEvent("click",a.bubbles,a.cancelable,document.defaultView,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.metaKey,a.button,a.relatedTarget),d.isSimulated=!0,c.dispatchEvent(d)}},getInfo:function(a){var b=a.pageX,c=a.pageY;return{pageX:b,pageY:c,startX:b,startY:c}},isCancel:function(a){var b=this;return Math.abs(a.pageX-b.startX)>=b.cancelThreshold||Math.abs(a.pageY-b.startY)>=b.cancelThreshold}}),Ext.regGesture("tap",Ext.gesture.Tap),Ext.gesture.Swipe=Ext.extend(Ext.gesture.Gesture,{listenForEnd:!1,swipeThreshold:35,swipeTime:1e3,onTouchStart:function(a,b){this.startTime=a.timeStamp,this.startX=b.pageX,this.startY=b.pageY,this.lock("scroll","scrollstart","scrollend")},onTouchMove:function(a,b){var c=b.pageY-this.startY,d=b.pageX-this.startX,e=Math.abs(c),f=Math.abs(d),g=a.timeStamp-this.startTime;e-f>3||g>this.swipeTime?(this.unlock("drag","dragstart","dragend"),this.stop()):f>this.swipeThreshold&&f>e&&(this.fire("swipe",a,{direction:d<0?"left":"right",distance:f,deltaTime:g,deltaX:d}),this.stop())}}),Ext.regGesture("swipe",Ext.gesture.Swipe),Ext.gesture.Drag=Ext.extend(Ext.gesture.Touch,{handles:["dragstart","drag","dragend"],dragThreshold:5,direction:"both",horizontal:!1,vertical:!1,constructor:function(){var a=this;return Ext.gesture.Drag.superclass.constructor.apply(a,arguments),a.direction=="both"?(a.horizontal=!0,a.vertical=!0):a.direction=="horizontal"?a.horizontal=!0:a.vertical=!0,a},onTouchStart:function(a,b){var c=this;c.startX=c.previousX=b.pageX,c.startY=c.previousY=b.pageY,c.startTime=c.previousTime=a.timeStamp,c.dragging=!1},onTouchMove:function(a,b){var c=this;if(c.isLocked("drag"))return;var d=c.getInfo(b);c.dragging?c.fire("drag",a,d):(!a.touches||a.touches.length<2)&&c.isDragging(d)&&c.fire("dragstart",a,d)&&(c.dragging=!0,c.lock("drag","dragstart","dragend"),c.fire("drag",a,d))},onTouchEnd:function(a){var b=this;b.dragging&&b.fire("dragend",a,b.lastInfo),b.dragging=!1},isDragging:function(a){var b=this;return b.horizontal&&a.absDeltaX>=b.dragThreshold||b.vertical&&a.absDeltaY>=b.dragThreshold},isVertical:function(){return this.vertical},isHorizontal:function(){return this.horizontal}}),Ext.regGesture("drag",Ext.gesture.Drag),Ext.gesture.Pinch=Ext.extend(Ext.gesture.Gesture,{handles:["pinchstart","pinch","pinchend"],touches:2,onTouchStart:function(a){var b=this;if(this.isMultiTouch(a)){b.lock("swipe","scroll","scrollstart","scrollend","touchmove","touchend","touchstart","tap","tapstart","taphold","tapcancel","doubletap"),b.pinching=!0;var c=a.targetTouches;b.startFirstTouch=c[0],b.startSecondTouch=c[1],b.previousDistance=b.startDistance=b.getDistance(b.startFirstTouch,b.startSecondTouch),b.previousScale=1,b.fire("pinchstart",a,{distance:b.startDistance,scale:b.previousScale})}else b.pinching&&(b.unlock("swipe","scroll","scrollstart","scrollend","touchmove","touchend","touchstart","tap","tapstart","taphold","tapcancel","doubletap"),b.pinching=!1)},isMultiTouch:function(a){return a&&Ext.supports.Touch&&a.targetTouches&&a.targetTouches.length>1},onTouchMove:function(a){if(!this.isMultiTouch(a)){this.onTouchEnd(a);return}this.pinching&&this.fire("pinch",a,this.getPinchInfo(a))},onTouchEnd:function(a){this.pinching&&this.fire("pinchend",a)},getPinchInfo:function(a){var b=this,c=a.targetTouches,d=c[0],e=c[1],f=b.getDistance(d,e),g=f/b.startDistance,h={scale:g,deltaScale:g-1,previousScale:b.previousScale,previousDeltaScale:g-b.previousScale,distance:f,deltaDistance:f-b.startDistance,startDistance:b.startDistance,previousDistance:b.previousDistance,previousDeltaDistance:f-b.previousDistance,firstTouch:d,secondTouch:e,firstPageX:d.pageX,firstPageY:d.pageY,secondPageX:e.pageX,secondPageY:e.pageY,midPointX:(d.pageX+e.pageX)/2,midPointY:(d.pageY+e.pageY)/2};return b.previousScale=g,b.previousDistance=f,h},getDistance:function(a,b){return Math.sqrt(Math.pow(Math.abs(a.pageX-b.pageX),2)+Math.pow(Math.abs(a.pageY-b.pageY),2))}}),Ext.regGesture("pinch",Ext.gesture.Pinch),Ext.lib.Component=Ext.extend(Ext.util.Observable,{isComponent:!0,renderTpl:null,tplWriteMode:"overwrite",baseCls:"x-component",disabledCls:"x-item-disabled",hidden:!1,disabled:!1,draggable:!1,floating:!1,styleHtmlContent:!1,styleHtmlCls:"x-html",allowDomMove:!0,autoShow:!1,autoRender:!1,needsLayout:!1,rendered:!1,constructor:function(a){a=a||{},this.initialConfig=a,Ext.apply(this,a),this.addEvents("beforeactivate","activate","beforedeactivate","deactivate","added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","resize","move","beforestaterestore","staterestore","beforestatesave","statesave"),this.getId(),this.mons=[],this.additionalCls=[],this.renderData=this.renderData||{},this.renderSelectors=this.renderSelectors||{},this.initComponent(),Ext.ComponentMgr.register(this),Ext.lib.Component.superclass.constructor.call(this);if(this.plugins){this.plugins=[].concat(this.plugins);for(var b=0,c=this.plugins.length;b<c;b++)this.plugins[b]=this.initPlugin(this.plugins[b])}this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo);if(Ext.isDefined(this.disabledClass))throw"Component: disabledClass has been deprecated. Please use disabledCls."},initComponent:Ext.emptyFn,applyToMarkup:Ext.emptyFn,show:Ext.emptyFn,onShow:function(){var a=this.needsLayout;Ext.isObject(a)&&this.doComponentLayout(a.width,a.height,a.isSetSize)},initPlugin:function(a){return a.ptype&&typeof a.init!="function"?a=Ext.PluginMgr.create(a):typeof a=="string"&&(a=Ext.PluginMgr.create({ptype:a})),a.init(this),a},render:function(a,b){return!this.rendered&&this.fireEvent("beforerender",this)!==!1&&(this.el&&(this.el=Ext.get(this.el)),a=this.initContainer(a),this.onRender(a,b),this.fireEvent("render",this),this.initContent(),this.afterRender(a),this.fireEvent("afterrender",this),this.initEvents(),this.autoShow&&this.show(),this.hidden&&this.onHide(!1),this.disabled&&this.disable(!0)),this},onRender:function(a,b){var c=this.el,d,e;b=this.getInsertPosition(b),c?this.allowDomMove!==!1&&a.dom.insertBefore(c.dom,b):b?c=Ext.DomHelper.insertBefore(b,this.getElConfig(),!0):c=Ext.DomHelper.append(a,this.getElConfig(),!0),c.addCls(this.initCls()),c.setStyle(this.initStyles()),d=this.initRenderTpl(),d&&(e=this.initRenderData(),d.append(c,e)),this.el=c,this.applyRenderSelectors(),this.rendered=!0},initCls:function(){var a=[this.baseCls];return this.componentCls?a.push(this.componentCls):this.componentCls=this.baseCls,this.cls&&(a.push(this.cls),delete this.cls),this.ui&&a.push(this.componentCls+"-"+this.ui),a.concat(this.additionalCls)},afterRender:function(){this.getComponentLayout(),(this.x||this.y)&&this.setPosition(this.x,this.y),this.styleHtmlContent&&this.getTargetEl().addCls(this.styleHtmlCls),this.ownerCt||this.setSize(this.width,this.height)},getElConfig:function(){return{tag:"div",id:this.id}},getInsertPosition:function(a){return a!==undefined&&(Ext.isNumber(a)?a=this.container.dom.childNodes[a]:a=Ext.getDom(a)),a},initContainer:function(a){return!a&&this.el&&(a=this.el.dom.parentNode,this.allowDomMove=!1),this.container=Ext.get(a),this.ctCls&&this.container.addCls(this.ctCls),this.container},initRenderData:function(){return Ext.applyIf(this.renderData,{baseCls:this.baseCls,componentCls:this.componentCls})},initRenderTpl:function(){var a=this.renderTpl;if(a)if(this.proto.renderTpl!==a){if(Ext.isArray(a)||typeof a=="string")a=new Ext.XTemplate(a)}else Ext.isArray(this.proto.renderTpl)&&(a=this.proto.renderTpl=new Ext.XTemplate(a));return a},initStyles:function(){var a={},b=Ext.Element,c,d,e,f;if(Ext.isString(this.style)){e=this.style.split(";");for(c=0,d=e.length;c<d;c++)Ext.isEmpty(e[c])||(f=e[c].split(":"),a[Ext.util.Format.trim(f[0])]=Ext.util.Format.trim(f[1]))}else a=Ext.apply({},this.style);return this.padding!=undefined&&(a.padding=b.unitizeBox(this.padding===!0?5:this.padding)),this.margin!=undefined&&(a.margin=b.unitizeBox(this.margin===!0?5:this.margin)),this.border!=undefined&&(a.borderWidth=b.unitizeBox(this.border===!0?1:this.border)),delete this.style,a},initContent:function(){var a=this.getTargetEl();this.html&&(a.update(Ext.DomHelper.markup(this.html)),delete this.html);if(this.contentEl){var b=Ext.get(this.contentEl);b.show(),a.appendChild(b.dom)}this.tpl&&(this.tpl.isTemplate||(this.tpl=new Ext.XTemplate(this.tpl)),this.data&&(this.tpl[this.tplWriteMode](a,this.data),delete this.data))},initEvents:function(){var a=this.afterRenderEvents,b,c;if(a)for(b in a){if(!a.hasOwnProperty(b))continue;c=a[b],this[b]&&this[b].on&&this.mon(this[b],c)}},applyRenderSelectors:function(){var a=this.renderSelectors||{},b=this.el.dom,c;for(c in a){if(!a.hasOwnProperty(c))continue;this[c]=Ext.get(Ext.DomQuery.selectNode(a[c],b))}},is:function(a){return Ext.ComponentQuery.is(this,a)},up:function(a){var b=this.ownerCt;if(a)for(;b;b=b.ownerCt)if(Ext.ComponentQuery.is(b,a))return b;return b},nextSibling:function(a){var b=this.ownerCt,c,d,e,f;if(b){c=b.items,e=c.indexOf(this)+1;if(e)if(a){for(d=c.getCount();e<d;e++)if((f=c.getAt(e)).is(a))return f}else if(e<c.getCount())return c.getAt(e)}return null},previousSibling:function(a){var b=this.ownerCt,c,d,e;if(b){c=b.items,d=c.indexOf(this);if(d!=-1)if(a){for(--d;d>=0;d--)if((e=c.getAt(d)).is(a))return e}else if(d)return c.getAt(--d)}return null},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.lib.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.id},getEl:function(){return this.el},getTargetEl:function(){return this.el},isXType:function(a,b){return Ext.isFunction(a)?a=a.xtype:Ext.isObject(a)&&(a=a.constructor.xtype),b?this.constructor.xtype==a:("/"+this.getXTypes()+"/").indexOf("/"+a+"/")!=-1},getXTypes:function(){var a=this.constructor,b=[],c=this,d;if(!a.xtypes){while(c)d=c.constructor.xtype,d!=undefined&&b.unshift(d),c=c.constructor.superclass;a.xtypeChain=b,a.xtypes=b.join("/")}return a.xtypes},update:function(a,b,c){this.tpl&&!Ext.isString(a)?(this.data=a,this.rendered&&this.tpl[this.tplWriteMode](this.getTargetEl(),a||{})):(this.html=Ext.isObject(a)?Ext.DomHelper.markup(a):a,this.rendered&&this.getTargetEl().update(this.html,b,c)),this.rendered&&this.doComponentLayout()},setVisible:function(a){return this[a?"show":"hide"]()},isVisible:function(){var a=!this.hidden,b=this.ownerCt;this.hiddenOwnerCt=!1;if(this.destroyed)return!1;if(a&&this.rendered&&b)while(b){if(b.hidden||b.collapsed){this.hiddenOwnerCt=b,a=!1;break}b=b.ownerCt}return a},enable:function(a){return this.rendered&&(this.el.removeCls(this.disabledCls),this.el.dom.disabled=!1,this.onEnable()),this.disabled=!1,a!==!0&&this.fireEvent("enable",this),this},disable:function(a){return this.rendered&&(this.el.addCls(this.disabledCls),this.el.dom.disabled=!0,this.onDisable()),this.disabled=!0,a!==!0&&this.fireEvent("disable",this),this},isDisabled:function(){return this.disabled},setDisabled:function(a){return this[a?"disable":"enable"]()},isHidden:function(){return this.hidden},addCls:function(){var a=this,b=Ext.toArray(arguments);return a.rendered?a.el.addCls(b):a.additionalCls=a.additionalCls.concat(b),a},addClass:function(){throw"Component: addClass has been deprecated. Please use addCls."},removeCls:function(){var a=this,b=Ext.toArray(arguments);return a.rendered?a.el.removeCls(b):a.additionalCls.length&&Ext.each(b,function(b){a.additionalCls.remove(b)}),a},removeClass:function(){throw"Component: removeClass has been deprecated. Please use removeCls."},addListener:function(a,b,c,d){if(Ext.isString(a)&&(Ext.isObject(b)||d&&d.element)){if(d.element){var e=b,f;b={},b[a]=e,a=d.element,c&&(b.scope=c);for(f in d){if(!d.hasOwnProperty(f))continue;
this.eventOptionsRe.test(f)&&(b[f]=d[f])}}this[a]&&this[a].on?this.mon(this[a],b):(this.afterRenderEvents=this.afterRenderEvents||{},this.afterRenderEvents[a]=b)}return Ext.lib.Component.superclass.addListener.apply(this,arguments)},getBubbleTarget:function(){return this.ownerCt},isFloating:function(){return this.floating},isDraggable:function(){return!!this.draggable},isDroppable:function(){return!!this.droppable},onAdded:function(a,b){this.ownerCt=a,this.fireEvent("added",this,a,b)},onRemoved:function(){this.fireEvent("removed",this,this.ownerCt),delete this.ownerCt},onEnable:Ext.emptyFn,onDisable:Ext.emptyFn,beforeDestroy:Ext.emptyFn,onResize:Ext.emptyFn,setSize:function(a,b){Ext.isObject(a)&&(b=a.height,a=a.width);if(!this.rendered||!this.isVisible()){if(this.hiddenOwnerCt){var c=this.hiddenOwnerCt.layoutOnShow;c.remove(this),c.add(this)}return this.needsLayout={width:a,height:b,isSetSize:!0},this.rendered||(this.width=a!==undefined?a:this.width,this.height=b!==undefined?b:this.height),this}return this.doComponentLayout(a,b,!0),this},setCalculatedSize:function(a,b){Ext.isObject(a)&&(b=a.height,a=a.width);if(!this.rendered||!this.isVisible()){if(this.hiddenOwnerCt){var c=this.hiddenOwnerCt.layoutOnShow;c.remove(this),c.add(this)}return this.needsLayout={width:a,height:b,isSetSize:!1},this}return this.doComponentLayout(a,b),this},doComponentLayout:function(a,b,c){var d=this.getComponentLayout();return this.rendered&&d&&(a=a!==undefined||this.collapsed===!0?a:this.width,b=b!==undefined||this.collapsed===!0?b:this.height,c&&(this.width=a,this.height=b),d.layout(a,b)),this},setComponentLayout:function(a){var b=this.componentLayout;b&&b.isLayout&&b!=a&&b.setOwner(null),this.componentLayout=a,a.setOwner(this)},getComponentLayout:function(){return(!this.componentLayout||!this.componentLayout.isLayout)&&this.setComponentLayout(Ext.layout.LayoutManager.create(this.componentLayout,"autocomponent")),this.componentLayout},afterComponentLayout:Ext.emptyFn,setPosition:function(a,b){Ext.isObject(a)&&(b=a.y,a=a.x);if(!this.rendered)return this;if(a!==undefined||b!==undefined)this.el.setBox(a,b),this.onPosition(a,b),this.fireEvent("move",this,a,b);return this},onPosition:Ext.emptyFn,setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return this.el.getSize()},getWidth:function(){return this.el.getWidth()},getHeight:function(){return this.el.getHeight()},setLoading:function(a,b){return this.rendered&&(a?(this.loadMask=this.loadMask||new Ext.LoadMask(b?this.getTargetEl():this.el,Ext.applyIf(Ext.isObject(a)?a:{})),this.loadMask.show()):(Ext.destroy(this.loadMask),this.loadMask=null)),this.loadMask},setDocked:function(a,b){return this.dock=a,b&&this.ownerCt&&this.rendered&&this.ownerCt.doComponentLayout(),this},onDestroy:function(){this.monitorResize&&Ext.EventManager.resizeEvent&&Ext.EventManager.resizeEvent.removeListener(this.setSize,this),Ext.destroy(this.componentLayout,this.loadMask)},destroy:function(){this.isDestroyed||this.fireEvent("beforedestroy",this)!==!1&&(this.destroying=!0,this.beforeDestroy(),this.ownerCt&&this.ownerCt.remove&&this.ownerCt.remove(this,!1),this.rendered&&this.el.remove(),this.onDestroy(),Ext.ComponentMgr.unregister(this),this.fireEvent("destroy",this),this.clearListeners(),this.destroying=!1,this.isDestroyed=!0)}}),Ext.lib.Component.prototype.on=Ext.lib.Component.prototype.addListener,Ext.lib.Component.prototype.prev=Ext.lib.Component.prototype.previousSibling,Ext.lib.Component.prototype.next=Ext.lib.Component.prototype.nextSibling,Ext.lib.Component.AUTO_ID=1e3,Ext.Component=Ext.extend(Ext.lib.Component,{}),Ext.reg("component",Ext.Component),Ext.Component=Ext.extend(Ext.lib.Component,{showAnimation:null,monitorOrientation:!1,floatingCls:"x-floating",hideOnMaskTap:!0,stopMaskTapEvent:!0,centered:!1,modal:!1,fullscreen:!1,layoutOnOrientationChange:null,initComponent:function(){this.addEvents("beforeorientationchange","orientationchange");if(this.fullscreen||this.floating)this.monitorOrientation=!0,this.autoRender=!0;if(this.fullscreen){var a=Ext.Viewport.getSize();this.width=a.width,this.height=a.height,this.cls=(this.cls||"")+" x-fullscreen",this.renderTo=document.body}},onRender:function(){Ext.Component.superclass.onRender.apply(this,arguments),this.monitorOrientation&&this.el.addCls("x-"+Ext.Viewport.orientation),this.floating&&this.setFloating(!0),this.draggable&&this.setDraggable(this.draggable),this.scroll&&this.setScrollable(this.scroll)},afterRender:function(){this.fullscreen&&this.layoutOrientation(Ext.Viewport.orientation,this.width,this.height),Ext.Component.superclass.afterRender.call(this)},initEvents:function(){Ext.Component.superclass.initEvents.call(this),this.monitorOrientation&&Ext.EventManager.onOrientationChange(this.setOrientation,this)},afterComponentLayout:function(){var a=this.scrollEl,b=this.scroller,c;a&&(c=a.parent(),b.horizontal&&(a.setStyle("min-width",c.getWidth(!0)+"px"),a.setHeight(c.getHeight(!0)||null)),b.vertical&&(a.setStyle("min-height",c.getHeight(!0)+"px"),a.setWidth(c.getWidth(!0)||null)),b.updateBoundary(!0)),this.fullscreen&&Ext.is.iPad&&Ext.repaint()},layoutOrientation:Ext.emptyFn,update:function(){Ext.Component.superclass.update.apply(this,arguments);var a=this.scroller;a&&a.updateBoundary&&a.updateBoundary(!0)},show:function(a){var b=this.rendered;return(this.hidden||!b)&&this.fireEvent("beforeshow",this)!==!1&&(this.anchorEl&&this.anchorEl.hide(),!b&&this.autoRender&&this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender),this.hidden=!1,this.rendered&&(this.onShow(a),this.fireEvent("show",this))),this},showBy:function(a,b,c,d){if(!this.floating)return this;a.isComponent?a=a.el:a=Ext.get(a),this.x=0,this.y=0,this.show(b),d!==!1&&(this.anchorEl||(this.anchorEl=this.el.createChild({cls:"x-anchor"})),this.anchorEl.show()),this.alignTo(a,c,20)},alignTo:function(a,b,c){var d=a.getPageBox(),e={width:window.innerWidth,height:window.innerHeight},f=this.getSize(),g={width:Math.min(f.width,e.width),height:Math.min(f.height,e.height)},h,i=2,j=["tl-bl","t-b","tr-br","l-r","l-r","r-l","bl-tl","b-t","br-tr"],k=this.anchorEl,l=[0,c],m,n,o=!1,p=[0,0],q=d.left+d.width/2,r=d.top+d.height/2;return q<=e.width*(1/3)?(i=1,p[0]=25):q>=e.width*(2/3)&&(i=3,p[0]=-30),r>=e.height*(2/3)?(i+=6,l=[0,-c],p[1]=-10):b!==!1&&r>=e.height*(1/3)?(i+=3,l=i<=5?[c,0]:[-c,0],p=i<=5?[10,0]:[-10,0],o=!0):p[1]=10,h=j[i-1],m=this.el.getAlignToXY(a,h,l),o?m[0]<0?g.width=d.left-c:m[0]+g.width>e.width&&(g.width=e.width-d.right-c):m[1]<0?g.height=d.top-c:m[1]+g.height>e.height&&(g.height=e.height-d.bottom-c),g.width!=f.width?this.setSize(g.width):g.height!=f.height&&this.setSize(undefined,g.height),m=this.el.getAlignToXY(a,h,l),this.setPosition(m[0],m[1]),k&&(k.removeCls(["x-anchor-bottom","x-anchor-left","x-anchor-right","x-anchor-top"]),l[1]==c?n="x-anchor-top":l[1]==-c?n="x-anchor-bottom":l[0]==c?n="x-anchor-left":n="x-anchor-right",m=k.getAlignToXY(a,h,p),k.setXY(m),k.addCls(n)),h},setCentered:function(a,b){this.centered=a;if(this.rendered&&b){var c,d;this.ownerCt?(c=this.ownerCt.getTargetEl().getWidth()/2-this.getWidth()/2,d=this.ownerCt.getTargetEl().getHeight()/2-this.getHeight()/2):(c=Ext.Element.getViewportWidth()/2-this.getWidth()/2,d=Ext.Element.getViewportHeight()/2-this.getHeight()/2),this.setPosition(c,d)}return this},hide:function(a){return!this.hidden&&this.fireEvent("beforehide",this)!==!1&&(this.hidden=!0,this.rendered&&this.onHide(a,!0)),this},onShow:function(a){this.el.show(),Ext.Component.superclass.onShow.call(this,a);if(a===undefined||a===!0)a=this.showAnimation;this.floating&&(this.el.dom.parentNode||this.el.appendTo(document.body),a&&this.el.setStyle("opacity",.01),this.centered?this.setCentered(!0,!0):this.setPosition(this.x,this.y),this.modal&&this.el.parent().mask(null,"x-mask-gray"),this.hideOnMaskTap&&Ext.getDoc().on("touchstart",this.onFloatingTouchStart,this,{capture:!0,subsequent:!0})),a&&(Ext.Anim.run(this,a,{out:!1,autoClear:!0}),this.showAnimation=a)},onFloatingTouchStart:function(a){this.el.contains(a.target)||(this.hide(),(this.stopMaskTapEvent||Ext.fly(a.target).hasCls("x-mask"))&&a.stopEvent())},onHide:function(a,b){if(a===undefined||a===!0)a=this.showAnimation;this.hideOnMaskTap&&this.floating&&Ext.getDoc().un("touchstart",this.onFloatingTouchStart,this,{capture:!0,subsequent:!0}),a?Ext.Anim.run(this,a,{out:!0,reverse:!0,autoClear:!0,scope:this,fireHideEvent:b,after:this.doHide}):this.doHide(null,{fireHideEvent:b})},doHide:function(a,b){var c=this.el.parent();this.el.hide(),c&&this.floating&&this.modal&&c.unmask(),b&&b.fireHideEvent&&this.fireEvent("hide",this)},setScrollable:function(a){var b=this,c;if(!b.rendered){b.scroll=a;return}Ext.destroy(b.scroller),b.scroller=null,b.originalGetTargetEl&&(b.getTargetEl=b.originalGetTargetEl),a!==!1&&(c=Ext.isObject(a)?a.direction:a,a=Ext.apply({},Ext.isObject(a)?a:{},{direction:c}),b.scrollEl||(b.scrollEl=b.getTargetEl().createChild()),b.originalGetTargetEl=b.getTargetEl,b.getTargetEl=function(){return b.scrollEl},b.scroller=(new Ext.util.ScrollView(b.scrollEl,a)).scroller)},setFloating:function(a,b){this.floating=!!a,this.hidden=!0,this.rendered?a!==!1?(this.el.addCls(this.floatingCls),b&&this.show()):(this.el.removeCls(this.floatingCls),Ext.getDoc().un("touchstart",this.onFloatingTouchStart,this)):a!==!1&&(this.layoutOnOrientationChange!==!1&&(this.layoutOnOrientationChange=!0),this.autoRender=!0)},setDraggable:function(a,b){this.isDraggable=a,this.rendered&&(a===!1?this.dragObj&&this.dragObj.disable():(b&&this.show(),this.dragObj?this.dragObj.enable():(this.dragObj=new Ext.util.Draggable(this.el,Ext.apply({},this.draggable||{})),this.relayEvents(this.dragObj,["dragstart","beforedragend","drag","dragend"]))))},setOrientation:function(a,b,c){this.fireEvent("beforeorientationchange",this,a,b,c)!==!1&&(this.orientation!=a&&(this.el.removeCls("x-"+this.orientation),this.el.addCls("x-"+a)),this.orientation=a,this.layoutOrientation(a,b,c),this.fullscreen?this.setSize(b,c):this.layoutOnOrientationChange&&this.doComponentLayout(),this.floating&&this.centered&&this.setCentered(!0,!0),this.onOrientationChange(a,b,c),this.fireEvent("orientationchange",this,a,b,c))},onOrientationChange:Ext.emptyFn,beforeDestroy:function(){this.floating&&this.modal&&!this.hidden&&this.el.parent().unmask(),Ext.destroy(this.scroller),Ext.Component.superclass.beforeDestroy.call(this)},onDestroy:function(){this.monitorOrientation&&Ext.EventManager.orientationEvent&&Ext.EventManager.orientationEvent.removeListener(this.setOrientation,this),Ext.Component.superclass.onDestroy.call(this)}}),Ext.BoxComponent=Ext.Component,Ext.reg("component",Ext.Component),Ext.reg("box",Ext.BoxComponent),Ext.lib.Container=Ext.extend(Ext.Component,{autoDestroy:!0,defaultType:"panel",isContainer:!0,baseCls:"x-container",bubbleEvents:["add","remove"],initComponent:function(){this.addEvents("afterlayout","beforeadd","beforeremove","add","remove","beforecardswitch","cardswitch"),this.layoutOnShow=new Ext.util.MixedCollection,Ext.lib.Container.superclass.initComponent.call(this),this.initItems()},initItems:function(){var a=this.items;this.items=new Ext.util.MixedCollection(!1,this.getComponentId),a&&(Ext.isArray(a)||(a=[a]),this.add(a))},afterRender:function(){this.getLayout(),Ext.lib.Container.superclass.afterRender.apply(this,arguments)},setLayout:function(a){var b=this.layout;b&&b.isLayout&&b!=a&&b.setOwner(null),this.layout=a,a.setOwner(this)},getLayout:function(){return(!this.layout||!this.layout.isLayout)&&this.setLayout(Ext.layout.LayoutManager.create(this.layout,"autocontainer")),this.layout},doLayout:function(){var a=this.getLayout();return this.rendered&&a&&a.layout(),this},afterLayout:function(a){this.fireEvent("afterlayout",this,a)},prepareItems:function(a,b){Ext.isArray(a)||(a=[a]);var c,d,e;for(d=0,e=a.length;d<e;d++)c=a[d],b&&(c=this.applyDefaults(c)),a[d]=this.lookupComponent(c);return a},applyDefaults:function(a){var b=this.defaults;return b&&(Ext.isFunction(b)&&(b=b.call(this,a)),Ext.isString(a)?(a=Ext.ComponentMgr.get(a),Ext.apply(a,b)):a.isComponent?Ext.apply(a,b):Ext.applyIf(a,b)),a},lookupComponent:function(a){return Ext.isString(a)?Ext.ComponentMgr.get(a):this.createComponent(a)},createComponent:function(a,b){return a.isComponent?a:Ext.create(a,b||this.defaultType)},getComponentId:function(a){return a.getItemId()},add:function(){var a=Array.prototype.slice.call(arguments),b=-1;typeof a[0]=="number"&&(b=a.shift());var c=a.length>1;if(c||Ext.isArray(a[0])){var d=c?a:a[0],e=[],f,g,h;for(f=0,g=d.length;f<g;f++){h=d[f];if(!h)throw"Trying to add a null item as a child of Container with itemId/id: "+this.getItemId();b!=-1?h=this.add(b+f,h):h=this.add(h),e.push(h)}return e}var i=this.prepareItems(a[0],!0)[0];return b=b!==-1?b:this.items.length,this.fireEvent("beforeadd",this,i,b)!==!1&&this.onBeforeAdd(i)!==!1&&(this.items.insert(b,i),i.onAdded(this,b),this.onAdd(i,b),this.fireEvent("add",this,i,b)),i},onAdd:Ext.emptyFn,onRemove:Ext.emptyFn,insert:function(a,b){return this.add(a,b)},onBeforeAdd:function(a){a.ownerCt&&a.ownerCt.remove(a,!1),this.hideBorders===!0&&(a.border=a.border===!0)},remove:function(a,b){var c=this.getComponent(a);return c||console.warn("Attempted to remove a component that does not exist. Ext.Container: remove takes an argument of the component to remove. cmp.remove() is incorrect usage."),c&&this.fireEvent("beforeremove",this,c)!==!1&&(this.doRemove(c,b),this.fireEvent("remove",this,c)),c},doRemove:function(a,b){var c=this.layout,d=c&&this.rendered;this.items.remove(a),a.onRemoved(),d&&c.onRemove(a),this.onRemove(a,b),(b===!0||b!==!1&&this.autoDestroy)&&a.destroy(),d&&!b&&c.afterRemove(a)},removeAll:function(a){var b,c=this.items.items.slice(),d=[],e=c.length,f;for(f=0;f<e;f++)b=c[f],this.remove(b,a),b.ownerCt!==this&&d.push(b);return d},getRefItems:function(a){var b=this.items.items.slice(),c=b.length,d,e;if(a)for(d=0;d<c;d++)e=b[d],e.getRefItems&&(b=b.concat(e.getRefItems(!0)));return b},getComponent:function(a){return Ext.isObject(a)&&(a=a.getItemId()),this.items.get(a)},query:function(a){return Ext.ComponentQuery.query(a,this)},child:function(a){return this.query("> "+a)[0]||null},down:function(a){return this.query(a)[0]||null},show:function(){Ext.lib.Container.superclass.show.apply(this,arguments);var a=this.layoutOnShow,b=a.getCount(),c=0,d,e;for(;c<b;c++)e=a.get(c),d=e.needsLayout,Ext.isObject(d)&&e.doComponentLayout(d.width,d.height,d.isSetSize);a.clear()},beforeDestroy:function(){var a=this.items,b;if(a)while(b=a.first())this.doRemove(b,!0);Ext.destroy(this.layout),Ext.lib.Container.superclass.beforeDestroy.call(this)}}),Ext.Container=Ext.extend(Ext.lib.Container,{}),Ext.reg("container",Ext.Container),Ext.Container=Ext.extend(Ext.lib.Container,{cardSwitchAnimation:null,initComponent:function(){this.scroll&&(this.fields=new Ext.util.MixedCollection,Ext.is.Blackberry||this.fields.on({add:this.onFieldAdd,remove:this.onFieldRemove,scope:this}),this.on({add:this.onItemAdd,remove:this.onItemRemove,scope:this})),Ext.Container.superclass.initComponent.apply(this,arguments)},afterRender:function(){Ext.Container.superclass.afterRender.apply(this,arguments),this.scroller&&(Ext.is.Android&&this.containsFormFields&&this.scroller.setUseCssTransform(!1),this.scroller.on("scrollstart",this.onFieldScrollStart,this))},onFieldScrollStart:function(){var a=this.focusedField;a&&Ext.is.iOS&&a.blur()},onItemAdd:function(a,b){this.fields.addAll(Ext.ComponentQuery.query("[isField]",b))},onItemRemove:function(a,b){this.fields.removeAll(Ext.ComponentQuery.query("[isField]",b))},onFieldAdd:function(a,b){this.handleFieldEventListener(!0,b)},onFieldRemove:function(a,b){this.handleFieldEventListener(!1,b)},handleFieldEventListener:function(a,b){this.fieldEventWrap||(this.fieldEventWrap={}),["textfield","passwordfield","emailfield","textareafield","searchfield","urlfield","numberfield","spinnerfield"].indexOf(b.xtype)!==-1&&(a&&(this.fieldEventWrap[b.id]={beforefocus:function(a){this.onFieldBeforeFocus(b,a)},focus:function(a){this.onFieldFocus(b,a)},blur:function(a){this.onFieldBlur(b,a)},keyup:function(a){this.onFieldKeyUp(b,a)},scope:this},this.containsFormFields=!0),b[a?"on":"un"](this.fieldEventWrap[b.id]),a||delete this.fieldEventWrap[b.id])},onFieldKeyUp:function(a,b){(Ext.is.iOS||Ext.is.Desktop)&&this.resetLastWindowScroll()},onFieldBeforeFocus:function(a,b){this.focusingField=a},getLastWindowScroll:function(){return this.lastWindowScroll||this.resetLastWindowScroll(),{x:this.lastWindowScroll.x,y:this.lastWindowScroll.y}},resetLastWindowScroll:function(){this.lastWindowScroll={x:window.pageXOffset,y:window.pageYOffset}},adjustScroller:function(a){var b=this.getClosestScroller(),c=this.getLastWindowScroll();b.setOffset(a),Ext.is.iOS&&window.scrollTo(c.x,c.y),this.resetLastWindowScroll()},onFieldFocus:function(a,b){if(!Ext.is.iOS&&!Ext.is.Desktop){var c=a.fieldEl.dom;c.scrollIntoViewIfNeeded&&c.scrollIntoViewIfNeeded(!0)}else{var d=this.getClosestScroller(),e=Ext.util.Region.from(d.containerBox),f=a.fieldEl.getPageBox(!0);if(this.focusingField==a||!Ext.is.iOS){Ext.is.iOS&&window.pageYOffset==0&&window.scrollTo(0,0);var g=new Ext.util.Offset;f.left<e.left&&(g.x=e.left-f.left),f.top<e.top&&(g.y=e.top-f.top);if(!g.isZero()){var h=this.getLastWindowScroll();d.scrollBy(g),Ext.is.iOS&&window.scrollTo(h.x,h.y),this.resetLastWindowScroll()}}else if(this.lastFocusedField){var i=f.top-this.lastFocusedField.fieldEl.getY(),j=d.offset.y-i,k=!1;!e.contains(f)&&(j!=0||j==0&&d.offset.y!=0)&&(k=!0),j>0&&(j=0),k&&this.adjustScroller(new Ext.util.Offset(d.offset.x,j))}this.resetLastWindowScroll()}this.lastFocusedField=a,this.focusedField=a,this.focusingField=null},getClosestScroller:function(){return this.closestScroller||(this.closestScroller=this.scroller||this.el.getScrollParent()),this.closestScroller},onFieldBlur:function(a,b){this.focusingField==a&&(this.focusingField=null),this.focusedField==a&&(this.focusedField=null)},afterLayout:function(a){this.floating&&this.centered&&this.setCentered(!0,!0),this.scroller&&this.scroller.updateBoundary(),Ext.Container.superclass.afterLayout.call(this,a)},getActiveItem:function(){return this.layout&&this.layout.type=="card"?this.layout.activeItem:null},setActiveItem:function(a,b){return this.layout.setActiveItem(a,b),this},onBeforeCardSwitch:function(a,b,c,d){return this.fireEvent("beforecardswitch",this,a,b,c,d)},onCardSwitch:function(a,b,c,d){return this.fireEvent("cardswitch",this,a,b,c,d)},disable:function(){Ext.Container.superclass.disable.call(this),this.el.mask(null,"x-mask-gray")},enable:function(){Ext.Container.superclass.enable.call(this),this.el.unmask()}}),Ext.reg("container",Ext.Container),Ext.lib.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",isPanel:!0,componentLayout:"dock",renderTpl:['<div class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>'],initComponent:function(){this.addEvents("bodyresize"),Ext.applyIf(this.renderSelectors,{body:"."+this.baseCls+"-body"}),Ext.lib.Panel.superclass.initComponent.call(this)},initItems:function(){Ext.lib.Panel.superclass.initItems.call(this);var a=this.dockedItems;this.dockedItems=new Ext.util.MixedCollection(!1,this.getComponentId),a&&this.addDocked(a)},getDockedComponent:function(a){return Ext.isObject(a)&&(a=a.getItemId()),this.dockedItems.get(a)},getComponent:function(a){var b=Ext.lib.Panel.superclass.getComponent.call(this,a);return b==undefined&&(b=this.getDockedComponent(a)),b},initBodyStyles:function(){var a=Ext.isString(this.bodyStyle)?this.bodyStyle.split(";"):[],b=Ext.Element;return this.bodyPadding!=undefined&&a.push("padding: "+b.unitizeBox(this.bodyPadding===!0?5:this.bodyPadding)),this.bodyMargin!=undefined&&a.push("margin: "+b.unitizeBox(this.bodyMargin===!0?5:this.bodyMargin)),this.bodyBorder!=undefined&&a.push("border-width: "+b.unitizeBox(this.bodyBorder===!0?1:this.bodyBorder)),delete this.bodyStyle,a.length?a.join(";"):undefined},initRenderData:function(){return Ext.applyIf(Ext.lib.Panel.superclass.initRenderData.call(this),{bodyStyle:this.initBodyStyles(),bodyCls:this.bodyCls})},addDocked:function(a,b){a=this.prepareItems(a);var c,d,e;for(d=0,e=a.length;d<e;d++)c=a[d],c.dock=c.dock||"top",b!==undefined?this.dockedItems.insert(b+d,c):this.dockedItems.add(c),c.onAdded(this,d),this.onDockedAdd(c);this.rendered&&this.doComponentLayout()},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,insertDocked:function(a,b){this.addDocked(b,a)},removeDocked:function(a,b){if(!this.dockedItems.contains(a))return a;var c=this.componentLayout,d=c&&this.rendered;return d&&c.onRemove(a),this.dockedItems.remove(a),a.onRemoved(),this.onDockedRemove(a),(b===!0||b!==!1&&this.autoDestroy)&&a.destroy(),d&&!b&&c.afterRemove(a),this.doComponentLayout(),a},getDockedItems:function(){return this.dockedItems&&this.dockedItems.items.length?this.dockedItems.items.slice():[]},getTargetEl:function(){return this.body},getRefItems:function(a){var b=Ext.lib.Panel.superclass.getRefItems.call(this,a),c=this.getDockedItems(),d=c.length,e=0,f;b=b.concat(c);if(a)for(;e<d;e++)f=c[e],f.getRefItems&&(b=b.concat(f.getRefItems(!0)));return b},beforeDestroy:function(){var a=this.dockedItems,b;if(a)while(b=a.first())this.removeDocked(b,!0);Ext.lib.Panel.superclass.beforeDestroy.call(this)}}),Ext.Panel=Ext.extend(Ext.lib.Panel,{}),Ext.reg("panel",Ext.Panel),Ext.Panel=Ext.extend(Ext.lib.Panel,{scroll:!1}),Ext.reg("panel",Ext.Panel),Ext.Button=Ext.extend(Ext.Component,{initComponent:function(){this.addEvents("tap","beforetap"),Ext.Button.superclass.initComponent.call(this),this.createAutoHandler()},iconAlign:"left",baseCls:"x-button",pressedCls:"x-button-pressed",badgeText:"",badgeCls:"x-badge",hasBadgeCls:"x-hasbadge",labelCls:"x-button-label",ui:"normal",isButton:!0,pressedDelay:0,iconMaskCls:"x-icon-mask",iconMask:!1,afterRender:function(a,b){var c=this;Ext.Button.superclass.afterRender.call(c,a,b);var d=c.text,e=c.icon,f=c.iconCls,g=c.badgeText;c.text=c.icon=c.iconCls=c.badgeText=null,c.setText(d),c.setIcon(e),c.setIconClass(f),c.iconMask&&c.iconEl&&c.iconEl.addCls(c.iconMaskCls),c.setBadge(g)},initEvents:function(){var a=this;Ext.Button.superclass.initEvents.call(a),a.mon(a.el,{scope:a,tap:a.onPress,tapstart:a.onTapStart,tapcancel:a.onTapCancel})},onTapStart:function(){var a=this;a.disabled||(a.pressedDelay?a.pressedTimeout=setTimeout(function(){a.el.addCls(a.pressedCls)},Ext.isNumber(a.pressedDelay)?a.pressedDelay:100):a.el.addCls(a.pressedCls))},onTapCancel:function(){var a=this;a.pressedTimeout&&(clearTimeout(a.pressedTimeout),delete a.pressedTimeout),a.el.removeCls(a.pressedCls)},setHandler:function(a,b){return this.handler=a,this.scope=b,this},setText:function(a){var b=this;return b.rendered&&(!b.textEl&&a?b.textEl=b.el.createChild({tag:"span",html:a,cls:this.labelCls}):b.textEl&&a!=b.text&&(a?b.textEl.setHTML(a):(b.textEl.remove(),b.textEl=null))),b.text=a,b},setIcon:function(a){var b=this;return b.rendered&&(!b.iconEl&&a?(b.iconEl=b.el.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,style:"background-image: "+(a?"url("+a+")":"")}),b.setIconAlign(b.iconAlign)):b.iconEl&&a!=b.icon&&(a?(b.iconEl.setStyle("background-image",a?"url("+a+")":""),b.setIconAlign(b.iconAlign)):(b.setIconAlign(!1),b.iconEl.remove(),b.iconEl=null))),b.icon=a,b},setIconClass:function(a){var b=this;return b.rendered&&(!b.iconEl&&a?(b.iconEl=b.el.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,cls:a}),b.setIconAlign(b.iconAlign)):b.iconEl&&a!=b.iconCls&&(a?(b.iconCls&&b.iconEl.removeCls(b.iconCls),b.iconEl.addCls(a),b.setIconAlign(b.iconAlign)):(b.setIconAlign(!1),b.iconEl.remove(),b.iconEl=null))),b.iconCls=a,b},setIconAlign:function(a){var b=this,c=["top","right","bottom","left"],a=(c.indexOf(a)==-1||!a)&&a!==!1?b.iconAlign:a,d;return b.rendered&&b.iconEl&&(b.el.removeCls("x-iconalign-"+b.iconAlign),a&&b.el.addCls("x-iconalign-"+a)),b.iconAlign=a===!1?b.iconAlign:a,b},setBadge:function(a){var b=this;return b.rendered&&(!b.badgeEl&&a?(b.badgeEl=b.el.createChild({tag:"span",cls:b.badgeCls,html:a}),b.el.addCls(b.hasBadgeCls)):b.badgeEl&&a!=b.badgeText&&(a?(b.badgeEl.setHTML(a),b.el.addCls(b.hasBadgeCls)):(b.badgeEl.remove(),b.badgeEl=null,b.el.removeCls(b.hasBadgeCls)))),b.badgeText=a,b},getText:function(){return this.text},getBadgeText:function(){return this.badgeText},onDisable:function(){this.onDisableChange(!0)},onEnable:function(){this.onDisableChange(!1)},onDisableChange:function(a){var b=this;b.el&&(b.el[a?"addCls":"removeCls"](b.disabledCls),b.el.dom.disabled=a),b.disabled=a},onPress:function(a){var b=this;!b.disabled&&this.fireEvent("beforetap")!==!1&&setTimeout(function(){b.preventCancel||b.onTapCancel(),b.callHandler(a),b.fireEvent("tap",b,a)},10)},callHandler:function(a){var b=this;b.handler&&b.handler.call(b.scope||b,b,a)},createAutoHandler:function(){var a=this,b=a.autoEvent;b&&(typeof b=="string"&&(b={name:b,scope:a.scope||a}),a.addEvents(b.name),a.setHandler(function(){b.scope.fireEvent(b.name,b.scope,a)},b.scope))}}),Ext.reg("button",Ext.Button),Ext.SegmentedButton=Ext.extend(Ext.Container,{defaultType:"button",componentCls:"x-segmentedbutton",pressedCls:"x-button-pressed",allowMultiple:!1,initComponent:function(){this.layout=Ext.apply({},this.layout||{},{type:"hbox",align:"stretch"}),Ext.SegmentedButton.superclass.initComponent.call(this),this.allowDepress===undefined&&(this.allowDepress=this.allowMultiple),this.addEvents("toggle")},initEvents:function(){Ext.SegmentedButton.superclass.initEvents.call(this),this.mon(this.el,{tap:this.onTap,capture:!0,scope:this})},afterLayout:function(a){var b=this;Ext.SegmentedButton.superclass.afterLayout.call(b,a),b.initialized||(b.items.each(function(a,c){b.setPressed(a,!!a.pressed,!0)}),b.allowMultiple&&(b.pressedButtons=b.getPressedButtons()),b.initialized=!0)},onTap:function(a,b){!this.disabled&&(b=a.getTarget(".x-button"))&&this.setPressed(b.id,this.allowDepress?undefined:!0)},getPressed:function(){return this.allowMultiple?this.getPressedButtons():this.pressedButton},setPressed:function(a,b,c){var d=this;a=d.getComponent(a);if(!a||!a.isButton||a.disabled){!d.allowMultiple&&d.pressedButton&&d.setPressed(d.pressedButton,!1);return}Ext.isBoolean(b)||(b=!a.pressed),b?(d.allowMultiple||(d.pressedButton&&d.pressedButton!==a&&(d.pressedButton.el.removeCls(d.pressedCls),d.pressedButton.pressed=!1,c!==!0&&d.fireEvent("toggle",d,d.pressedButton,!1)),d.pressedButton=a),a.el.addCls(d.pressedCls),a.pressed=!0,a.preventCancel=!0,d.initialized&&c!==!0&&d.fireEvent("toggle",d,a,!0)):b||(!d.allowMultiple&&a===d.pressedButton&&(d.pressedButton=null),a.pressed&&(a.el.removeCls(d.pressedCls),a.pressed=!1,c!==!0&&d.fireEvent("toggle",d,a,!1))),d.allowMultiple&&d.initialized&&(d.pressedButtons=d.getPressedButtons())},getPressedButtons:function(a){var b=this.items.filterBy(function(a){return a.isButton&&!a.disabled&&a.pressed});return b.items},disable:function(){this.items.each(function(a){a.disable()}),Ext.SegmentedButton.superclass.disable.apply(this,arguments)},enable:function(){this.items.each(function(a){a.enable()},this),Ext.SegmentedButton.superclass.enable.apply(this,arguments)}}),Ext.reg("segmentedbutton",Ext.SegmentedButton),Ext.AbstractStoreSelectionModel=Ext.extend(Ext.util.Observable,{allowDeselect:!1,selected:null,constructor:function(a){a=a||{},Ext.apply(this,a),this.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0},this.setSelectionMode(a.mode),this.selected=new Ext.util.MixedCollection,Ext.AbstractStoreSelectionModel.superclass.constructor.call(this,a)},bind:function(a,b){!b&&this.store&&(a!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("add",this.onStoreAdd,this),this.store.un("clear",this.onStoreClear,this),this.store.un("remove",this.onStoreRemove,this),this.store.un("update",this.onStoreUpdate,this))),a&&(a=Ext.StoreMgr.lookup(a),a.on({add:this.onStoreAdd,clear:this.onStoreClear,remove:this.onStoreRemove,update:this.onStoreUpdate,scope:this})),this.store=a,a&&!b&&this.refresh()},selectAll:function(a){var b=this.store.getRange();for(var c=0,d=b.length;c<d;c++)this.doSelect(b[c],!0,a)},deselectAll:function(){var a=this.getSelection();for(var b=0,c=a.length;b<c;b++)this.doDeselect(a[b])},selectWithEvent:function(a,b){switch(this.selectionMode){case"MULTI":b.ctrlKey&&this.isSelected(a)?this.doDeselect(a,!1):b.shiftKey&&this.lastFocused?this.selectRange(this.lastFocused,a,b.ctrlKey):b.ctrlKey?this.doSelect(a,!0,!1):this.isSelected(a)&&!b.shiftKey&&!b.ctrlKey&&this.selected.getCount()>1?this.doSelect(a,!1,!1):this.doSelect(a,!1);break;case"SIMPLE":this.isSelected(a)?this.doDeselect(a):this.doSelect(a,!0);break;case"SINGLE":this.allowDeselect&&this.isSelected(a)?this.doDeselect(a):this.doSelect(a,!1)}},selectRange:function(a,b,c,d){var e,f=this.store.indexOf(a),g=this.store.indexOf(b),h,i=0,j;if(this.isLocked())return;f>g&&(h=g,g=f,f=h);for(e=f;e<=g;e++)this.isSelected(this.store.getAt(e))&&i++;d?j=d=="up"?f:g:j=-1;for(e=f;e<=g;e++)i==g-f+1?e!=j&&this.doDeselect(e,!0):this.doSelect(e,!0)},select:function(a,b,c){this.doSelect(a,b,c)},deselect:function(a,b){this.doDeselect(a,b)},doSelect:function(a,b,c){if(this.locked)return;typeof a=="number"&&(a=[this.store.getAt(a)]);if(this.selectionMode=="SINGLE"&&a){var d=a.length?a[0]:a;this.doSingleSelect(d,c)}else this.doMultiSelect(a,b,c)},doMultiSelect:function(a,b,c){if(this.locked)return;var d=this.selected,e=!1,f;a=Ext.isArray(a)?a:[a],!b&&d.getCount()>0&&(e=!0,this.doDeselect(this.getSelection(),!0));for(var g=0,h=a.length;g<h;g++){f=a[g];if(b&&this.isSelected(f))continue;e=!0,this.lastSelected=f,d.add(f),c||this.setLastFocused(f),this.onSelectChange(f,!0,c)}this.maybeFireSelectionChange(e&&!c)},doDeselect:function(a,b){if(this.locked)return;typeof a=="number"&&(a=[this.store.getAt(a)]);var c=!1,d=this.selected,e;a=Ext.isArray(a)?a:[a];for(var f=0,g=a.length;f<g;f++)e=a[f],d.remove(e)&&(this.lastSelected==e&&(this.lastSelected=d.last()),this.onSelectChange(e,!1,b),c=!0);this.maybeFireSelectionChange(c&&!b)},doSingleSelect:function(a,b){if(this.locked)return;if(this.isSelected(a))return;var c=this.selected;c.getCount()>0&&this.doDeselect(this.lastSelected,b),c.add(a),this.lastSelected=a,this.onSelectChange(a,!0,b),this.setLastFocused(a),this.maybeFireSelectionChange(!b)},setLastFocused:function(a){var b=this.lastFocused;this.lastFocused=a,this.onLastFocusChanged(b,a)},maybeFireSelectionChange:function(a){a&&this.fireEvent("selectionchange",this,this.getSelection())},getLastSelected:function(){return this.lastSelected},getLastFocused:function(){return this.lastFocused},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE",this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isSelected:function(a){return a=Ext.isNumber(a)?this.store.getAt(a):a,this.selected.indexOf(a)!==-1},hasSelection:function(){return this.selected.getCount()>0},refresh:function(){var a=[],b=this.getSelection(),c=b.length,d,e,f=0;for(;f<c;f++)d=b[f],this.store.indexOf(d)!=-1&&a.push(d);this.selected.getCount()!=a.length&&(e=!0),this.clearSelections(),a.length&&this.doSelect(a,!1,!0),this.maybeFireSelectionChange(e)},clearSelections:function(){this.selected.clear(),this.lastSelected=null,this.setLastFocused(null)},onStoreAdd:function(){},onStoreClear:function(){var a=this.selected;a.getCount>0&&(a.clear(),this.lastSelected=null,this.setLastFocused(null),this.maybeFireSelectionChange(!0))},onStoreRemove:function(a,b){if(this.locked)return;var c=this.selected;c.remove(b)&&(this.lastSelected==b&&(this.lastSelected=null),this.getLastFocused()==b&&this.setLastFocused(null),this.maybeFireSelectionChange(!0))},getCount:function(){return this.selected.getCount()},destroy:function(){},onStoreUpdate:function(){},onSelectChange:function(a,b,c){},onLastFocusChanged:function(a,b){},onEditorKey:function(a,b){},bindComponent:function(a){}}),Ext.DataViewSelectionModel=Ext.extend(Ext.AbstractStoreSelectionModel,{deselectOnContainerClick:!0,bindComponent:function(a){this.view=a,this.bind(a.getStore());var b={refresh:this.refresh,scope:this,el:{scope:this}};b.el[a.triggerEvent]=this.onItemClick,b.el[a.triggerCtEvent]=this.onContainerClick,a.on(b)},onItemClick:function(a){var b=this.view,c=b.findTargetByEvent(a);if(c)this.selectWithEvent(b.getRecord(c),a);else return!1},onContainerClick:function(){this.deselectOnContainerClick&&this.deselectAll()},onSelectChange:function(a,b,c){var d=this.view;b?(d.onItemSelect(a),c||this.fireEvent("select",this,a)):(d.onItemDeselect(a),c||this.fireEvent("deselect",this,a))}}),Ext.DataView=Ext.extend(Ext.Component,{loadingText:"Loading...",selectedItemCls
:"x-item-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,last:!1,triggerEvent:"click",triggerCtEvent:"containerclick",addCmpEvents:function(){},initComponent:function(){var a=Ext.isDefined;if(!a(this.tpl)||!a(this.store)||!a(this.itemSelector))throw"DataView requires tpl, store and itemSelector configurations to be defined.";Ext.DataView.superclass.initComponent.call(this);if(Ext.isString(this.tpl)||Ext.isArray(this.tpl))this.tpl=new Ext.XTemplate(this.tpl);if(Ext.isDefined(this.overCls)||Ext.isDefined(this.overClass))throw this.overItemCls=this.overCls||this.overClass,delete this.overCls,delete this.overClass,"Using the deprecated overCls or overClass configuration. Use overItemCls.";if(Ext.isDefined(this.selectedCls)||Ext.isDefined(this.selectedClass))throw this.selectedItemCls=this.selectedCls||this.selectedClass,delete this.selectedCls,delete this.selectedClass,"Using the deprecated selectedCls or selectedClass configuration. Use selectedItemCls.";this.addEvents("beforerefresh","refresh"),this.addCmpEvents(),this.store=Ext.StoreMgr.lookup(this.store),this.all=new Ext.CompositeElementLite,this.getSelectionModel().bindComponent(this)},onRender:function(){Ext.DataView.superclass.onRender.apply(this,arguments),this.loadingText&&(this.loadMask=new Ext.LoadMask(this.el,{msg:this.loadingText}))},getSelectionModel:function(){this.selModel||(this.selModel={});var a;switch(!0){case this.simpleSelect:a="SIMPLE";break;case this.multiSelect:a="MULTI";break;case this.singleSelect:default:a="SINGLE"}return Ext.applyIf(this.selModel,{allowDeselect:this.allowDeselect,mode:a}),this.selModel.events||(this.selModel=new Ext.DataViewSelectionModel(this.selModel)),this.selModel.hasRelaySetup||(this.relayEvents(this.selModel,["selectionchange","select","deselect"]),this.selModel.hasRelaySetup=!0),this.disableSelection&&(this.selModel.locked=!0),this.selModel},refresh:function(){if(!this.rendered)return;this.fireEvent("beforerefresh",this);var a=this.getTargetEl(),b=this.store.getRange();a.update(""),b.length<1?((!this.deferEmptyText||this.hasSkippedEmptyText)&&a.update(this.emptyText),this.all.clear()):(this.tpl.overwrite(a,this.collectData(b,0)),this.all.fill(Ext.query(this.itemSelector,a.dom)),this.updateIndexes(0)),this.hasSkippedEmptyText=!0,this.fireEvent("refresh",this)},prepareData:function(a,b,c){return c&&Ext.apply(a,this.prepareAssociatedData(c)),a},prepareAssociatedData:function(a,b){b=b||[];var c=a.associations.items,d=c.length,e={},f,g,h,i,j,k,l,m,n;for(m=0;m<d;m++){k=c[m],f=a[k.storeName],e[k.name]=[];if(f&&f.data.length>0){h=f.data.items,j=h.length;for(n=0;n<j;n++)i=h[n],l=i.internalId,b.indexOf(l)==-1&&(b.push(l),e[k.name][n]=i.data,Ext.apply(e[k.name][n],this.prepareAssociatedData(i,b)))}}return e},collectData:function(a,b){var c=[],d=0,e=a.length;for(;d<e;d++)c[c.length]=this.prepareData(a[d].data,b+d,a[d]);return c},bufferRender:function(a,b){var c=document.createElement("div");return this.tpl.overwrite(c,this.collectData(a,b)),Ext.query(this.itemSelector,c)},onUpdate:function(a,b){var c=this.store.indexOf(b),d,e;c>-1&&(d=this.all.elements[c],e=this.bufferRender([b],c)[0],this.all.replaceElement(c,e,!0),this.updateIndexes(c,c),this.selModel.refresh())},onAdd:function(a,b,c){if(this.all.getCount()===0){this.refresh();return}var d=this.bufferRender(b,c),e,f=this.all.elements;c<this.all.getCount()?(e=this.all.item(c).insertSibling(d,"before",!0),f.splice.apply(f,[c,0].concat(d))):(e=this.all.last().insertSibling(d,"after",!0),f.push.apply(f,d)),this.updateIndexes(c)},onRemove:function(a,b,c){this.all.removeElement(c,!0),this.updateIndexes(c),this.store.getCount()===0&&this.refresh()},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(a,b){var c=this.all.elements;a=a||0,b=b||(b===0?0:c.length-1);for(var d=a;d<=b;d++)c[d].viewIndex=d},getStore:function(){return this.store},bindStore:function(a,b){!b&&this.store&&(a!==this.store&&this.store.autoDestroy?this.store.destroy():this.mun(this.store,{scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh}),a||(this.loadMask&&this.loadMask.bindStore(null),this.store=null)),a&&(a=Ext.StoreMgr.lookup(a),this.mon(a,{scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh}),this.loadMask&&this.loadMask.bindStore(a)),this.store=a,this.getSelectionModel().bind(a),a&&this.refresh()},onDataChanged:function(){this.blockRefresh!==!0&&this.refresh.apply(this,arguments)},findItemByChild:function(a){return Ext.fly(a).findParent(this.itemSelector,this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.itemSelector,this.getTargetEl())},getSelectedNodes:function(){var a=[],b=this.selModel.getSelection(),c=b.length,d=0;for(;d<c;d++)a.push(this.getNode(b[d]));return a},getRecords:function(a){var b=[],c=0,d=a.length;for(;c<d;c++)b[b.length]=this.store.getAt(a[c].viewIndex);return r},getRecord:function(a){return this.store.getAt(a.viewIndex)},isSelected:function(a){var b=this.getRecord(a);return this.selModel.isSelected(b)},select:function(a,b,c){this.selModel.select(a,b,c)},deselect:function(a,b){this.selModel.deselect(a,b)},getNode:function(a){if(Ext.isString(a))return document.getElementById(a);if(Ext.isNumber(a))return this.all.elements[a];if(a instanceof Ext.data.Model){var b=this.store.indexOf(a);return this.all.elements[b]}return a},getNodes:function(a,b){var c=this.all.elements,d=[],e;a=a||0,b=Ext.isDefined(b)?b:Math.max(c.length-1,0);if(a<=b)for(e=a;e<=b&&c[e];e++)d.push(c[e]);else for(e=a;e>=b&&c[e];e--)d.push(c[e]);return d},indexOf:function(a){return a=this.getNode(a),Ext.isNumber(a.viewIndex)?a.viewIndex:this.all.indexOf(a)},onBeforeLoad:function(){this.loadingText&&(this.getTargetEl().update(""),this.all.clear())},onDestroy:function(){this.all.clear(),Ext.DataView.superclass.onDestroy.call(this),this.bindStore(null),this.selModel.destroy()},onItemSelect:function(a){var b=this.getNode(a);Ext.fly(b).addCls(this.selectedItemCls)},onItemDeselect:function(a){var b=this.getNode(a);Ext.fly(b).removeCls(this.selectedItemCls)},select:function(a,b,c){console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()");var d=this.getSelectionModel();return d.select.apply(d,arguments)},clearSelections:function(){console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()");var a=this.getSelectionModel();return a.deselectAll()}}),Ext.reg("dataview",Ext.DataView),Ext.DataView.override({getSelectionCount:function(){return this.selModel.getSelection().length},getSelectedRecords:function(){return this.selModel.getSelection()}}),Ext.DataView.override({scroll:"vertical",pressedCls:"x-item-pressed",pressedDelay:100,allowDeselect:!0,triggerEvent:"singletap",triggerCtEvent:"containertap",addCmpEvents:function(){this.addEvents("itemtap","itemdoubletap","itemswipe","containertap","selectionchange","beforeselect")},afterRender:function(){var a=this;Ext.DataView.superclass.afterRender.call(a);var b={tapstart:a.onTapStart,tapcancel:a.onTapCancel,touchend:a.onTapCancel,doubletap:a.onDoubleTap,swipe:a.onSwipe,scope:a};b[this.triggerEvent]=a.onTap,a.mon(a.getTargetEl(),b),this.store&&this.bindStore(this.store,!0)},onTap:function(a){var b=this.findTargetByEvent(a);if(b){Ext.fly(b).removeCls(this.pressedCls);var c=this.indexOf(b);this.onItemTap(b,c,a)!==!1&&this.fireEvent("itemtap",this,c,b,a)}else this.fireEvent("containertap",this,a)!==!1&&this.onContainerTap(a)},onTapStart:function(a,b){var c=this,d=this.findTargetByEvent(a);d&&(c.pressedDelay?(c.pressedTimeout&&clearTimeout(c.pressedTimeout),c.pressedTimeout=setTimeout(function(){Ext.fly(d).addCls(c.pressedCls)},Ext.isNumber(c.pressedDelay)?c.pressedDelay:100)):Ext.fly(d).addCls(c.pressedCls))},onTapCancel:function(a,b){var c=this,d=this.findTargetByEvent(a);c.pressedTimeout&&(clearTimeout(c.pressedTimeout),delete c.pressedTimeout),d&&Ext.fly(d).removeCls(c.pressedCls)},onContainerTap:function(a){},onDoubleTap:function(a){var b=this.findTargetByEvent(a);b&&this.fireEvent("itemdoubletap",this,this.indexOf(b),b,a)},onSwipe:function(a){var b=this.findTargetByEvent(a);b&&this.fireEvent("itemswipe",this,this.indexOf(b),b,a)},onItemTap:function(a,b,c){return this.pressedTimeout&&(clearTimeout(this.pressedTimeout),delete this.pressedTimeout),!0}}),Ext.List=Ext.extend(Ext.DataView,{componentCls:"x-list",pinHeaders:Ext.is.iOS||Ext.is.Desktop,indexBar:!1,grouped:!1,clearSelectionOnDeactivate:!0,renderTpl:['<tpl if="grouped"><h3 class="x-list-header x-list-header-swap x-hidden-display"></h3></tpl>'],groupTpl:['<tpl for=".">','<div class="x-list-group x-group-{id}">','<h3 class="x-list-header">{group}</h3>','<div class="x-list-group-items">',"{items}","</div>","</div>","</tpl>"],itemSelector:".x-list-item",itemCls:"",onItemDisclosure:!1,preventSelectionOnDisclose:!0,initComponent:function(){var a={};Ext.isArray(this.itemTpl)?this.itemTpl=this.itemTpl.join(""):this.itemTpl&&this.itemTpl.html&&(Ext.apply(a,this.itemTpl.initialConfig),this.itemTpl=this.itemTpl.html);if(!Ext.isDefined(this.itemTpl))throw new Error("Ext.List: itemTpl is a required configuration.");if(this.itemTpl&&this.itemTpl.indexOf('"x-list-item"')!==-1)throw new Error("Ext.List: Using a CSS class of x-list-item within your own tpl will break Ext.Lists. Remove the x-list-item from the tpl/itemTpl");this.tpl='<tpl for="."><div class="x-list-item '+this.itemCls+'"><div class="x-list-item-body">'+this.itemTpl+"</div>",this.onItemDisclosure&&(this.tpl+='<div class="x-list-disclosure"></div>'),this.tpl+="</div></tpl>",this.tpl=new Ext.XTemplate(this.tpl,a);if(this.grouped){this.listItemTpl=this.tpl;if(Ext.isString(this.listItemTpl)||Ext.isArray(this.listItemTpl))this.listItemTpl=new Ext.XTemplate(this.listItemTpl,a);if(Ext.isString(this.groupTpl)||Ext.isArray(this.groupTpl))this.tpl=new Ext.XTemplate(this.groupTpl)}else this.indexBar=!1;this.scroll!==!1&&(this.scroll={direction:"vertical",useIndicators:!this.indexBar}),Ext.List.superclass.initComponent.call(this),this.onItemDisclosure&&Ext.isFunction(this.onItemDisclosure)&&(this.onItemDisclosure={scope:this,handler:this.onItemDisclosure}),this.on("deactivate",this.onDeactivate,this),this.addEvents("disclose","update")},onRender:function(){this.grouped&&(Ext.applyIf(this.renderData,{grouped:!0}),this.scroll&&Ext.applyIf(this.renderSelectors,{header:".x-list-header-swap"})),Ext.List.superclass.onRender.apply(this,arguments)},onDeactivate:function(){this.clearSelectionOnDeactivate&&this.getSelectionModel().deselectAll()},afterRender:function(){this.grouped||this.el.addCls("x-list-flat"),this.getTargetEl().addCls("x-list-parent"),this.indexBar&&(this.indexBar=new Ext.IndexBar(Ext.apply({},Ext.isObject(this.indexBar)?this.indexBar:{},{xtype:"indexbar",alphabet:!0,renderTo:this.el})),this.addCls("x-list-indexed")),Ext.List.superclass.afterRender.call(this),this.onItemDisclosure&&this.mon(this.getTargetEl(),"singletap",this.handleItemDisclosure,this,{delegate:".x-list-disclosure"})},initEvents:function(){Ext.List.superclass.initEvents.call(this),this.grouped&&(this.pinHeaders&&this.scroll&&this.mon(this.scroller,{scrollstart:this.onScrollStart,scroll:this.onScroll,scope:this}),this.indexBar&&this.mon(this.indexBar,{index:this.onIndex,scope:this}))},handleItemDisclosure:function(a,b){var c=this.findItemByChild(b),d,e;c&&(d=this.getRecord(c),e=this.indexOf(c),this.preventSelectionOnDisclose&&a.stopEvent(),this.fireEvent("disclose",d,c,e,a),Ext.isObject(this.onItemDisclosure)&&this.onItemDisclosure.handler&&this.onItemDisclosure.handler.call(this,d,c,e))},setActiveGroup:function(a){var b=this;if(a){if(!b.activeGroup||b.activeGroup.header!=a.header)b.header.setHTML(a.header.getHTML()),b.header.show()}else b.header.hide();this.activeGroup=a},getClosestGroups:function(a){this.groupOffsets||this.updateOffsets();var b=this.groupOffsets,c=b.length,d,e,f,g;for(e=0;e<c;e++){d=b[e];if(d.offset>a.y){g=d;break}f=d}return{current:f,next:g}},updateIndexes:function(){Ext.List.superclass.updateIndexes.apply(this,arguments),this.updateList()},afterComponentLayout:function(){Ext.List.superclass.afterComponentLayout.apply(this,arguments),this.updateList()},updateList:function(){this.fireEvent("update",this),this.updateOffsets()},updateOffsets:function(){if(this.grouped){this.groupOffsets=[];var a=this.getTargetEl().query("h3.x-list-header"),b=a.length,c,d;for(d=0;d<b;d++)c=Ext.get(a[d]),c.setVisibilityMode(Ext.Element.VISIBILITY),this.groupOffsets.push({header:c,offset:c.dom.offsetTop})}},onScrollStart:function(){var a=this.scroller.getOffset();this.closest=this.getClosestGroups(a),this.setActiveGroup(this.closest.current)},onScroll:function(a,b,c){this.closest||(this.closest=this.getClosestGroups(b)),this.headerHeight||(this.headerHeight=this.header.getHeight());if(b.y<=0){this.activeGroup&&(this.setActiveGroup(!1),this.closest.next=this.closest.current);return}if(this.closest.next&&b.y>this.closest.next.offset||b.y<this.closest.current.offset)this.closest=this.getClosestGroups(b),this.setActiveGroup(this.closest.current);if(this.closest.next&&b.y>0&&this.closest.next.offset-b.y<=this.headerHeight){var d=this.headerHeight-(this.closest.next.offset-b.y);Ext.Element.cssTranslate(this.header,{x:0,y:-d}),this.transformed=!0}else this.transformed&&(this.header.setStyle("-webkit-transform",null),this.transformed=!1)},onIndex:function(a,b,c){var d=a.get("key").toLowerCase(),e=this.store.getGroups(),f=e.length,g,h,i,j;for(h=0;h<f;h++){g=e[h],j=this.getGroupId(g);if(j==d||j>d){i=j;break}i=j}i=this.getTargetEl().down(".x-group-"+j),i&&this.scroller.scrollTo({x:0,y:i.getOffsetsTo(this.scrollEl)[1]},!1,null,!0)},getGroupId:function(a){return a.name.toLowerCase()},collectData:function(a,b){if(!this.grouped)return Ext.List.superclass.collectData.call(this,a,b);var c=[],d=this.store.getGroups(),e=d.length,f,g,h,i,j;for(j=0,e=d.length;j<e;j++){i=d[j],f=i.children;for(h=0,g=f.length;h<g;h++)f[h]=f[h].data;c.push({group:i.name,id:this.getGroupId(i),items:this.listItemTpl.apply(f)})}return c},onUpdate:function(a,b){this.grouped?this.refresh():Ext.List.superclass.onUpdate.apply(this,arguments)},onAdd:function(a,b,c){this.grouped?this.refresh():Ext.List.superclass.onAdd.apply(this,arguments)},onRemove:function(a,b,c){this.grouped?this.refresh():Ext.List.superclass.onRemove.apply(this,arguments)}}),Ext.reg("list",Ext.List),Ext.IndexBar=Ext.extend(Ext.DataView,{componentCls:"x-indexbar",direction:"vertical",tpl:'<tpl for="."><div class="x-indexbar-item">{value}</div></tpl>',itemSelector:"div.x-indexbar-item",letters:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],listPrefix:"",componentLayout:"autocomponent",scroll:!1,initComponent:function(){this.componentLayout=this.getComponentLayout(),this.store||(this.store=new Ext.data.Store({model:"IndexBarModel"})),this.alphabet==!0&&(this.ui=this.ui||"alphabet"),this.direction=="horizontal"?this.horizontal=!0:this.vertical=!0,this.addEvents("index"),Ext.apply(this.renderData,{componentCls:this.componentCls}),Ext.apply(this.renderSelectors,{body:"."+this.componentCls+"-body"}),Ext.IndexBar.superclass.initComponent.call(this)},renderTpl:['<div class="{componentCls}-body"></div>'],getTargetEl:function(){return this.body},afterRender:function(){Ext.IndexBar.superclass.afterRender.call(this),this.alphabet===!0&&this.loadAlphabet(),this.vertical?this.el.addCls(this.componentCls+"-vertical"):this.horizontal&&this.el.addCls(this.componentCls+"-horizontal")},loadAlphabet:function(){var a=this.letters,b=a.length,c=[],d,e;for(d=0;d<b;d++)e=a[d],c.push({key:e.toLowerCase(),value:e});this.store.loadData(c)},refresh:function(){var a=this.getTargetEl(),b=this.store.getRange();a.update(""),b.length<1?((!this.deferEmptyText||this.hasSkippedEmptyText)&&a.update(this.emptyText),this.all.clear()):(this.tpl.overwrite(a,this.collectData(b,0)),this.all.fill(Ext.query(this.itemSelector,a.dom)),this.updateIndexes(0)),this.hasSkippedEmptyText=!0,this.fireEvent("refresh")},collectData:function(){var a=Ext.IndexBar.superclass.collectData.apply(this,arguments);return this.listPrefix.length>0&&a.unshift({key:"",value:this.listPrefix}),a},initEvents:function(){Ext.IndexBar.superclass.initEvents.call(this),this.mon(this.el,{touchstart:this.onTouchStart,touchend:this.onTouchEnd,touchmove:this.onTouchMove,scope:this})},onTouchStart:function(a,b){a.stopEvent(),this.el.addCls(this.componentCls+"-pressed"),this.pageBox=this.el.getPageBox(),this.onTouchMove(a)},onTouchEnd:function(a,b){a.stopEvent(),this.el.removeCls(this.componentCls+"-pressed")},onTouchMove:function(a){a.stopPropagation();var b=Ext.util.Point.fromEvent(a),c,d,e=this.pageBox;e||(e=this.pageBox=this.el.getPageBox());if(this.vertical){if(b.y>e.bottom||b.y<e.top)return;c=Ext.Element.fromPoint(e.left+e.width/2,b.y)}else if(this.horizontal){if(b.x>e.right||b.x<e.left)return;c=Ext.Element.fromPoint(b.x,e.top+e.height/2)}c&&(d=this.getRecord(c.dom),d&&this.fireEvent("index",d,c,this.indexOf(c)))},isVertical:function(){return this.vertical},isHorizontal:function(){return this.horizontal}}),Ext.reg("indexbar",Ext.IndexBar),Ext.regModel("IndexBarModel",{fields:["key","value"]}),Ext.Toolbar=Ext.extend(Ext.Container,{isToolbar:!0,defaultType:"button",baseCls:"x-toolbar",titleCls:"x-toolbar-title",ui:"dark",layout:null,titleEl:null,initComponent:function(){this.layout=Ext.apply({},this.layout||{},{type:"hbox",align:"center"}),Ext.Toolbar.superclass.initComponent.call(this)},afterRender:function(){Ext.Toolbar.superclass.afterRender.call(this),this.title&&(this.titleEl=this.el.createChild({cls:this.titleCls,html:this.title}))},setTitle:function(a){this.title=a,this.rendered&&(this.titleEl||(this.titleEl=this.el.createChild({cls:this.titleCls,html:this.title})),this.titleEl.setHTML(a))},showTitle:function(){this.titleEl&&this.titleEl.show()},hideTitle:function(){this.titleEl&&this.titleEl.hide()}}),Ext.reg("toolbar",Ext.Toolbar),Ext.Spacer=Ext.extend(Ext.Component,{initComponent:function(){this.width||(this.flex=1),Ext.Spacer.superclass.initComponent.call(this)},onRender:function(){Ext.Spacer.superclass.onRender.apply(this,arguments),this.flex&&this.el.setStyle("-webkit-box-flex",this.flex)}}),Ext.reg("spacer",Ext.Spacer),Ext.Sheet=Ext.extend(Ext.Panel,{baseCls:"x-sheet",centered:!1,floating:!0,modal:!0,draggable:!1,monitorOrientation:!0,hidden:!0,hideOnMaskTap:!1,enter:"bottom",exit:"bottom",enterAnimation:"slide",exitAnimation:"slide",transitions:{bottom:"up",top:"down",right:"left",left:"right"},animSheet:function(a){var b=null,c=this,d=c.transitions,e=Ext.Anim.prototype.opposites||{};return a&&this[a]&&(a=="enter"?b=typeof c.enterAnimation=="string"?{type:c.enterAnimation||"slide",direction:d[c.enter]||"up"}:c.enterAnimation:a=="exit"&&(b=typeof c.exitAnimation=="string"?{type:c.exitAnimation||"slide",direction:d[c.exit]||"down"}:c.exitAnimation)),b},orient:function(a,b,c){if(!this.container||this.centered||!this.floating)return this;var d=this,e=d.initialConfig||{},f={width:e.width,height:e.height},g={x:e.x,y:e.y},h=d.el.getPageBox(),i,j=0;return d.container.dom==document.body?(i={width:window.innerWidth,height:window.innerHeight},j=document.body.scrollTop):i=d.container.getPageBox(),i.centerY=i.height/2,i.centerX=i.width/2,g.x!=undefined||g.y!=undefined?(g.x=g.x||0,g.y=g.y||0):/^(bottom|top)/i.test(d.enter)?(f.width=d.stretchX?i.width:Math.min(200,Math.max(f.width||h.width||i.width,i.width)),f.height=Math.min(f.height||0,i.height)||undefined,f=d.setSize(f).getSize(),g.x=i.centerX-f.width/2,g.y=d.enter=="top"?0:i.height-f.height+j):/^(left|right)/i.test(d.enter)&&(f.height=d.stretchY?i.height:Math.min(200,Math.max(f.height||h.height||i.height,i.height)),f.width=Math.min(f.width||0,i.width)||undefined,f=d.setSize(f).getSize(),g.y=0,g.x=d.enter=="left"?0:i.width-f.width),d.setPosition(g),this},afterRender:function(){Ext.Sheet.superclass.afterRender.apply(this,arguments),this.el.setVisibilityMode(Ext.Element.OFFSETS)},onShow:function(a){return this.orient(),Ext.Sheet.superclass.onShow.call(this,a||this.animSheet("enter"))},onOrientationChange:function(a,b,c){this.orient(),Ext.Sheet.superclass.onOrientationChange.apply(this,arguments)},beforeDestroy:function(){delete this.showAnimation,this.hide(!1),Ext.Sheet.superclass.beforeDestroy.call(this)}}),Ext.reg("sheet",Ext.Sheet),Ext.ActionSheet=Ext.extend(Ext.Sheet,{componentCls:"x-sheet-action",stretchY:!0,stretchX:!0,defaultType:"button",constructor:function(a){a=a||{},Ext.ActionSheet.superclass.constructor.call(this,Ext.applyIf({floating:!0},a))}}),Ext.reg("actionsheet",Ext.ActionSheet),Ext.TabBar=Ext.extend(Ext.Panel,{componentCls:"x-tabbar",activeTab:null,defaultType:"tab",sortable:!1,sortHoldThreshold:350,initComponent:function(){this.addEvents("change"),this.layout=Ext.apply({},this.layout||{},{type:"hbox",align:"middle"}),Ext.TabBar.superclass.initComponent.call(this)},initEvents:function(){this.sortable&&(this.sortable=new Ext.util.Sortable(this.el,{itemSelector:".x-tab",direction:"horizontal",delay:this.sortHoldThreshold,constrain:!0}),this.mon(this.sortable,"sortchange",this.onSortChange,this)),this.mon(this.el,{touchstart:this.onTouchStart,scope:this}),Ext.TabBar.superclass.initEvents.call(this)},onTouchStart:function(a,b){b=a.getTarget(".x-tab"),b&&this.onTabTap(Ext.getCmp(b.id))},onSortChange:function(a,b,c){},onTabTap:function(a){if(!a.disabled){if(this.cardLayout){if(this.cardSwitchAnimation){var b={reverse:this.items.indexOf(a)<this.items.indexOf(this.activeTab)?!0:!1};Ext.isObject(this.cardSwitchAnimation)?Ext.apply(b,this.cardSwitchAnimation):Ext.apply(b,{type:this.cardSwitchAnimation})}this.cardLayout.setActiveItem(a.card,b||this.cardSwitchAnimation)}this.activeTab=a,this.fireEvent("change",this,a,a.card)}},getCardLayout:function(){return this.cardLayout}}),Ext.reg("tabbar",Ext.TabBar),Ext.Tab=Ext.extend(Ext.Button,{isTab:!0,baseCls:"x-tab",pressedCls:"x-tab-pressed",activeCls:"x-tab-active",active:!1,initComponent:function(){this.addEvents("activate","deactivate"),Ext.Tab.superclass.initComponent.call(this);var a=this.card;a&&(this.card=null,this.setCard(a))},setCard:function(a){this.card&&this.mun(this.card,{activate:this.activate,deactivate:this.deactivate,scope:this}),this.card=a,a&&(Ext.apply(this,a.tab||{}),this.setText(this.title||a.title||this.text),this.setIconClass(this.iconCls||a.iconCls),this.setBadge(this.badgeText||a.badgeText),this.mon(a,{beforeactivate:this.activate,beforedeactivate:this.deactivate,scope:this}))},onRender:function(){Ext.Tab.superclass.onRender.apply(this,arguments),this.active&&this.el.addCls(this.activeCls)},getCard:function(){return this.card},activate:function(){this.active=!0,this.el&&this.el.addCls(this.activeCls),this.fireEvent("activate",this)},deactivate:function(){this.active=!1,this.el&&this.el.removeCls(this.activeCls),this.fireEvent("deactivate",this)}}),Ext.reg("tab",Ext.Tab),Ext.TabPanel=Ext.extend(Ext.Panel,{cardSwitchAnimation:"slide",tabBarDock:"top",componentCls:"x-tabpanel",ui:"dark",initComponent:function(){var a=new Ext.layout.CardLayout(this.layout||{});this.layout=null,this.setLayout(a),this.tabBar=new Ext.TabBar(Ext.apply({},this.tabBar||{},{cardLayout:a,cardSwitchAnimation:this.cardSwitchAnimation,dock:this.tabBarDock,ui:this.ui,sortable:this.sortable})),this.dockedItems&&!Ext.isArray(this.dockedItems)?this.dockedItems=[this.dockedItems]:this.dockedItems||(this.dockedItems=[]),this.dockedItems.push(this.tabBar),Ext.TabPanel.superclass.initComponent.call(this)},getTabBar:function(){return this.tabBar},onAdd:function(a,b){var c=this.tabBar;a.tab=c.insert(b,{xtype:"tab",card:a}),c.doLayout()},onRemove:function(a,b){this.destroying||(this.tabBar.remove(a.tab,b),this.tabBar.doLayout())}}),Ext.reg("tabpanel",Ext.TabPanel),Ext.Carousel=Ext.extend(Ext.Panel,{baseCls:"x-carousel",indicator:!0,ui:"dark",direction:"horizontal",horizontal:!1,vertical:!1,initComponent:function(){this.layout={type:"card",sizeAllCards:!0,hideInactive:!1,itemCls:"x-carousel-item",targetCls:"x-carousel-body",setOwner:function(a){Ext.layout.CardLayout.superclass.setOwner.call(this,a)}};if(this.indicator){var a=Ext.isObject(this.indicator)?this.indicator:{};this.indicator=new Ext.Carousel.Indicator(Ext.apply({},a,{direction:this.direction,carousel:this,ui:this.ui}))}this.direction=="horizontal"?this.horizontal=!0:this.vertical=!0,Ext.Carousel.superclass.initComponent.call(this)},afterRender:function(){Ext.Carousel.superclass.afterRender.call(this),this.mon(this.body,{drag:this.onDrag,dragThreshold:5,dragend:this.onDragEnd,direction:this.direction,scope:this}),this.el.addCls(this.baseCls+"-"+this.direction)},onAdd:function(){Ext.Carousel.superclass.onAdd.apply(this,arguments);var a=this.indicator;a&&a.onCardAdd()},onRemove:function(){Ext.Carousel.superclass.onRemove.apply(this,arguments);var a=this.indicator;a&&a.onCardRemove()},afterLayout:function(){Ext.Carousel.superclass.afterLayout.apply(this,arguments),this.currentSize=this.body.getSize(),this.currentScroll={x:0,y:0},this.updateCardPositions();var a=this.layout.getActiveItem();a&&this.indicator&&this.indicator.onBeforeCardSwitch(this,a,null,this.items.indexOf(a))},onDrag:function(a){this.currentScroll={x:a.deltaX,y:a.deltaY};var b=this.items.items.indexOf(this.layout.activeItem);if(this.horizontal){if(b==0&&a.deltaX>0||b==this.items.length-1&&a.deltaX<0)this.currentScroll.x=a.deltaX/2}else this.vertical&&(b==0&&a.deltaY>0||b==this.items.length-1&&a.deltaY<0)&&(this.currentScroll.y=a.deltaY/2);this.updateCardPositions()},updateCardPositions:function(a){var b=this.items.items,c=b.length,d,e,f,g,h;for(e=0;e<c;e++)f=b[e],this.isCardInRange(f)?(f.hidden&&f.show(),g=f.el,h=g.dom.style,a?(f===this.layout.activeItem&&g.on("webkitTransitionEnd",this.onTransitionEnd,this,{single:!0}),h.webkitTransitionDuration="300ms"):h.webkitTransitionDuration="0ms",d=this.getCardOffset(f),this.horizontal?Ext.Element.cssTransform(g,{translate:[d,0]}):Ext.Element.cssTransform(g,{translate:[0,d]})):f.hidden||f.hide()},getCardOffset:function(a){var b=this.getCardIndexOffset(a),c=this.currentSize,d=this.currentScroll;return this.horizontal?b*c.width+d.x:b*c.height+d.y},getCardIndexOffset:function(a){return this.items.items.indexOf(a)-this.getActiveIndex()},isCardInRange:function(a){return Math.abs(this.getCardIndexOffset(a))<=2},getActiveIndex:function(){return this.items.indexOf(this.layout.activeItem)},onDragEnd:function(a,b){var c,d;this.horizontal?(d=a.deltaX,c=a.previousDeltaX):(d=a.deltaY,c=a.previousDeltaY),d<0&&Math.abs(d)>3&&c<=0&&this.layout.getNext()?this.next():d>0&&Math.abs(d)>3&&c>=0&&this.layout.getPrev()?this.prev():this.scrollToCard(this.layout.activeItem)},onBeforeCardSwitch:function(a){if(!this.customDrag&&this.items.indexOf(a)!=-1){var b=a.el.dom.style;b.webkitTransitionDuration=null,b.webkitTransform=null}return Ext.Carousel.superclass.onBeforeCardSwitch.apply(this,arguments)},scrollToCard:function(a){this.currentScroll={x:0,y:0},this.oldCard=this.layout.activeItem,a!=this.oldCard&&this.isCardInRange(a)&&this.onBeforeCardSwitch(a,this.oldCard,this.items.indexOf(a),!0)!==!1&&(this.layout.activeItem=a,this.horizontal?this.currentScroll.x=-this.getCardOffset(a):this.currentScroll.y=-this.getCardOffset(a)),this.updateCardPositions(!0)},onTransitionEnd:function(a,b){this.customDrag=!1,this.currentScroll={x:0,y:0},this.oldCard&&this.layout.activeItem!=this.oldCard&&this.onCardSwitch(this.layout.activeItem,this.oldCard,this.items.indexOf(this.layout.activeItem),!0),delete this.oldCard},onCardSwitch:function(a,b,c,d){this.currentScroll={x:0,y:0},this.updateCardPositions(),Ext.Carousel.superclass.onCardSwitch.apply(this,arguments),a.fireEvent("activate",a)},next:function(){var a=this.layout.getNext();return a&&(this.customDrag=!0,this.scrollToCard(a)),this},prev:function(){var a=this.layout.getPrev();return a&&(this.customDrag=!0,this.scrollToCard(a)),this},isVertical:function(){return this.vertical},isHorizontal:function(){return this.horizontal},beforeDestroy:function(){Ext.destroy(this.indicator),Ext.Carousel.superclass.beforeDestroy.call(this)}}),Ext.reg("carousel",Ext.Carousel),Ext.Carousel.Indicator=Ext.extend(Ext.Component,{baseCls:"x-carousel-indicator",initComponent:function(){this.carousel.rendered?(this.render(this.carousel.body),this.onBeforeCardSwitch(null,null,this.carousel.items.indexOf(this.carousel.layout.getActiveItem()))):this.carousel.on("render",function(){this.render(this.carousel.body)},this,{single:!0}),Ext.Carousel.Indicator.superclass.initComponent.call(this)},onRender:function(){Ext.Carousel.Indicator.superclass.onRender.apply(this,arguments);for(var a=0,b=this.carousel.items.length;a<b;a++)this.createIndicator();this.mon(this.carousel,{beforecardswitch:this.onBeforeCardSwitch,scope:this}),this.mon(this.el,{tap:this.onTap,scope:this}),this.el.addCls(this.baseCls+"-"+this.direction)},onTap:function(a,b){var c=this.el.getPageBox(),d=c.left+c.width/2,e=c.top+c.height/2,f=this.carousel;f.isHorizontal()&&a.pageX>d||f.isVertical()&&a.pageY>e?this.carousel.next():this.carousel.prev()},createIndicator:function(){this.indicators=this.indicators||[],this.indicators.push(this.el.createChild({tag:"span"}))},onBeforeCardSwitch:function(a,b,c,d){Ext.isNumber(d)&&d!=-1&&this.indicators[d]&&this.indicators[d].radioCls("x-carousel-indicator-active")},onCardAdd:function(){this.rendered&&this.createIndicator()},onCardRemove:function(){this.rendered&&this.indicators.pop().remove()}}),Ext.reg("carouselindicator",Ext.Carousel.Indicator),Ext.Map=Ext.extend(Ext.Component,{baseCls:"x-map",useCurrentLocation:!1,monitorResize:!0,map:null,geo:null,maskMap:!1,maskMapCls:"x-mask-map",initComponent:function(){this.mapOptions=this.mapOptions||{},this.scroll=!1,(window.google||{}).maps?this.useCurrentLocation&&(this.geo=this.geo||new Ext.util.GeoLocation({autoLoad:!1}),this.geo.on({locationupdate:this.onGeoUpdate,locationerror:this.onGeoError,scope:this})):this.html="Google Maps API is required",Ext.Map.superclass.initComponent.call(this),this.addEvents("maprender","centerchange","typechange","zoomchange"),this.geo&&(this.on({activate:this.onUpdate,scope:this,single:!0}),this.geo.updateLocation())},onRender:function(a,b){Ext.Map.superclass.onRender.apply(this,arguments),this.el.setVisibilityMode(Ext.Element.OFFSETS)},afterRender:function(){Ext.Map.superclass.afterRender.apply(this,arguments),this.renderMap()},onResize:function(a,b){Ext.Map.superclass.onResize.apply(this,arguments),this.map&&google.maps.event.trigger(this.map,"resize")},afterComponentLayout:function(){this.maskMap&&!this.mask&&(this.el.mask(null,this.maskMapCls),this.mask=!0)},renderMap:function(){var a=this,b=(window.google||{}).maps;if(b){Ext.is.iPad&&Ext.applyIf(a.mapOptions,{navigationControlOptions:{style:b.NavigationControlStyle.ZOOM_PAN}}),Ext.applyIf(a.mapOptions,{center:new b.LatLng(37.381592,-122.135672),zoom:12,mapTypeId:b.MapTypeId.ROADMAP}),a.maskMap&&!a.mask&&(a.el.mask(null,this.maskMapCls),a.mask=!0),a.el&&a.el.dom&&a.el.dom.firstChild&&Ext.fly(a.el.dom.firstChild).remove(),a.map&&b.event.clearInstanceListeners(a.map),a.map=new b.Map(a.el.dom,a.mapOptions);var c=b.event;c.addListener(a.map,"zoom_changed",Ext.createDelegate(a.onZoom,a)),c.addListener(a.map,"maptypeid_changed",Ext.createDelegate(a.onTypeChange,a)),c.addListener(a.map,"center_changed",Ext.createDelegate(a.onCenterChange,a)),a.fireEvent("maprender",a,a.map)}},onGeoUpdate:function(a){var b;a&&(b=this.mapOptions.center=new google.maps.LatLng(a.latitude,a.longitude)),this.rendered?this.update(b):this.on("activate",this.onUpdate,this,{single:!0,data:b})},onGeoError:function(a){},onUpdate:function(a,b,c){this.update((c||{}).data)},update:function(a){var b=this,c=(window.google||{}).maps;c&&(a=a||b.coords||new c.LatLng(37.381592,-122.135672),a&&!(a instanceof c.LatLng)&&"longitude"in a&&(a=new c.LatLng(a.latitude,a.longitude)),!b.hidden&&b.rendered?(b.map||b.renderMap(),b.map&&a instanceof c.LatLng&&b.map.panTo(a)):b.on("activate",b.onUpdate,b,{single:!0,data:a}))},onZoom:function(){this.mapOptions.zoom=(this.map&&this.map.getZoom?this.map.getZoom():this.mapOptions.zoom)||10,this.fireEvent("zoomchange",this,this.map,this.mapOptions.zoom)},onTypeChange:function(){this.mapOptions.mapTypeId=this.map&&this.map.getMapTypeId?this.map.getMapTypeId():this.mapOptions.mapTypeId,this.fireEvent("typechange",this,this.map,this.mapOptions.mapTypeId)},onCenterChange:function(){this.mapOptions.center=this.map&&this.map.getCenter?this.map
.getCenter():this.mapOptions.center,this.fireEvent("centerchange",this,this.map,this.mapOptions.center)},getState:function(){return this.mapOptions},onDestroy:function(){Ext.destroy(this.geo),this.maskMap&&this.mask&&this.el.unmask(),this.map&&(window.google||{}).maps&&google.maps.event.clearInstanceListeners(this.map),Ext.Map.superclass.onDestroy.call(this)}}),Ext.reg("map",Ext.Map),Ext.NestedList=Ext.extend(Ext.Panel,{componentCls:"x-nested-list",layout:"card",cardSwitchAnimation:"slide",backButton:null,backText:"Back",useTitleAsBackText:!0,updateTitleText:!0,displayField:"text",loadingText:"Loading...",emptyText:"No items available.",onItemDisclosure:!1,clearSelectionDelay:200,allowDeselect:!1,getItemTextTpl:function(a){return"{"+this.displayField+"}"},getTitleTextTpl:function(a){return"{"+this.displayField+"}"},renderTitleText:function(a){a.titleTpl||(a.titleTpl=new Ext.XTemplate(this.getTitleTextTpl(a)));var b=a.getRecord();if(b)return a.titleTpl.applyTemplate(b.data);if(a.isRoot)return this.title||this.backText;throw new Error("No RecordNode passed into renderTitleText")},useToolbar:!0,getDetailCard:function(a,b){return!1},initComponent:function(){var a=Ext.StoreMgr.lookup(this.store),b=a.getRootNode(),c=b.getRecord()?this.renderTitleText(b):this.title||"";this.store=a,this.useToolbar&&(this.backButton=new Ext.Button({text:this.backText,ui:"back",handler:this.onBackTap,scope:this,hidden:!0}),!this.toolbar||!this.toolbar.isComponent?(this.toolbar=Ext.apply({},this.toolbar||{},{dock:"top",xtype:"toolbar",ui:"light",title:c,items:[]}),this.toolbar.items.unshift(this.backButton),this.toolbar=new Ext.Toolbar(this.toolbar),this.dockedItems=this.dockedItems||[],this.dockedItems.push(this.toolbar)):this.toolbar.insert(0,this.backButton)),this.items=[this.getSubList(b)],Ext.NestedList.superclass.initComponent.call(this),this.on("itemtap",this.onItemTap,this),this.addEvents("listchange","leafitemtap")},getListConfig:function(a){var b=a.internalId,c=this.emptyText;return{itemId:b,xtype:"list",autoDestroy:!0,recordNode:a,store:this.store.getSubStore(a),loadingText:this.loadingText,onItemDisclosure:this.onItemDisclosure,displayField:this.displayField,singleSelect:!0,clearSelectionOnDeactivate:!1,bubbleEvents:["itemtap","containertap","beforeselect","itemdoubletap","selectionchange"],itemTpl:'<span<tpl if="leaf == true"> class="x-list-item-leaf"</tpl>>'+this.getItemTextTpl(a)+"</span>",deferEmptyText:!0,allowDeselect:this.allowDeselect,refresh:function(){this.hasSkippedEmptyText&&(this.emptyText=c),Ext.List.prototype.refresh.apply(this,arguments)}}},getSubList:function(a){var b=this.items,c,d=a.internalId;return b&&b.get&&(c=b.get(d)),c?c:this.getListConfig(a)},addNextCard:function(a,b){var c,d=a?a.parentNode:null,e;return a.leaf?(e=this.getDetailCard(a,d),e&&(c=this.add(e))):(c=this.getSubList(a),c=this.add(c)),c},setActivePath:function(a){var b=a.substr(0,1)==="/",c=0,d=this.store,e=d.tree,f,g,h,i,j;b&&(a=a.substr(1)),i=Ext.toArray(a.split("/")),j=i.length;if(b){var k=this.items,l=this.items.items,m=k.length;for(;m>1;m--)this.remove(l[m-1],!0);var n=l[0].recordNode;if(n.id!==i[0])throw new Error("rootNode doesn't match!");c=1}for(;c<j;c++)i[c]!==""&&(f=e.getNodeById(i[c]),g=this.addNextCard(f),g&&(h=g));if(!h)throw new Error("Card was not found when trying to add to NestedList.");this.setActiveItem(h,!1),this.fireEvent("listchange",this,h),this.syncToolbar()},syncToolbar:function(a){var b=a||this.getActiveItem(),c=this.items.indexOf(b),d=b.recordNode,e=d?d.parentNode:null,f=this.backButton,g=this.useTitleAsBackText&&e?this.renderTitleText(e):this.backText,h=c!==0?"show":"hide";f&&(f[h](),e&&f.setText(g)),this.toolbar&&this.updateTitleText&&(this.toolbar.setTitle(d&&d.getRecord()?this.renderTitleText(d):this.title||""),this.toolbar.doLayout())},onItemTap:function(a,b,c,d){var e=a.getStore(),f=e.getAt(b),g=f.node,h=g?g.parentNode:null,i=this.displayField,j,k,l;l=this.addNextCard(g),g.leaf&&this.fireEvent("leafitemtap",a,b,c,d,l),l&&(k=this.items.indexOf(l),this.setActiveItem(l,{type:this.cardSwitchAnimation}),this.syncToolbar(l))},onBackTap:function(){var a=this.getActiveItem(),b=this.items.indexOf(a);if(b!=0){var c=b-1,d=this.items.getAt(c),e=d.recordNode,f=e.getRecord(),g=e?e.parentNode:null,h=this.backButton,i=c!==0?"show":"hide",j;this.on("cardswitch",function(b,c){var e=d.getSelectionModel();this.remove(a),this.clearSelectionDelay&&Ext.defer(e.deselectAll,this.clearSelectionDelay,e)},this,{single:!0}),this.setActiveItem(d,{type:this.cardSwitchAnimation,reverse:!0,scope:this}),this.syncToolbar(d)}}}),Ext.reg("nestedlist",Ext.NestedList),Ext.Picker=Ext.extend(Ext.Sheet,{componentCls:"x-picker",stretchX:!0,stretchY:!0,hideOnMaskTap:!1,doneButton:"Done",cancelButton:"Cancel",height:220,useTitles:!1,defaultType:"pickerslot",initComponent:function(){this.addEvents("pick","change","cancel"),this.layout={type:"hbox",align:"stretch"},this.slots&&(this.items=this.items?Ext.isArray(this.items)?this.items:[this.items]:[],this.items=this.items.concat(this.slots)),this.useTitles&&(this.defaults=Ext.applyIf(this.defaults||{},{title:""})),this.on("slotpick",this.onSlotPick,this);if(this.doneButton||this.cancelButton){var a=[];this.cancelButton&&a.push(Ext.apply({handler:this.onCancelButtonTap,scope:this},Ext.isObject(this.cancelButton)?this.cancelButton:{text:String(this.cancelButton)})),a.push({xtype:"spacer"}),this.doneButton&&a.push(Ext.apply({ui:"action",handler:this.onDoneButtonTap,scope:this},Ext.isObject(this.doneButton)?this.doneButton:{text:String(this.doneButton)})),this.toolbar=new Ext.Toolbar(Ext.applyIf(this.buttonBar||{dock:"top",items:a,defaults:{xtype:"button"}})),this.dockedItems=this.dockedItems?Ext.isArray(this.dockedItems)?this.dockedItems:[this.dockedItems]:[],this.dockedItems.push(this.toolbar)}Ext.Picker.superclass.initComponent.call(this)},afterRender:function(){Ext.Picker.superclass.afterRender.apply(this,arguments),this.value&&this.setValue(this.value,!1)},onDoneButtonTap:function(){var a=this.animSheet("exit");Ext.apply(a,{after:function(){this.fireEvent("change",this,this.getValue())},scope:this}),this.hide(a)},onCancelButtonTap:function(){var a=this.animSheet("exit");Ext.apply(a,{after:function(){this.setValue(this.values),this.fireEvent("cancel",this)},scope:this}),this.hide(a)},onSlotPick:function(a,b,c){return this.fireEvent("pick",this,this.getValue(),a),!1},setValue:function(a,b){var c,d=this.items.items,e=d.length;if(!a){for(var f=0;f<e;f++)d[f].setSelectedNode(0);return this}return Ext.iterate(a,function(a,d){c=this.child("[name="+a+"]"),c&&c.setValue(d,b)},this),this.values=a,this},getValue:function(){var a={},b=this.items.items,c=b.length,d,e;for(e=0;e<c;e++)d=b[e],a[d.name]=d.getValue();return a}}),Ext.regModel("x-textvalue",{fields:["text","value"]}),Ext.Picker.Slot=Ext.extend(Ext.DataView,{isSlot:!0,flex:1,name:null,displayField:"text",valueField:"value",align:"center",itemSelector:"div.x-picker-item",componentCls:"x-picker-slot",renderTpl:['<div class="x-picker-mask">','<div class="x-picker-bar"></div>',"</div>"],selectedIndex:0,getElConfig:function(){return{tag:"div",id:this.id,cls:"x-picker-"+this.align}},initComponent:function(){if(!this.name)throw new Error("Each picker slot is required to have a name.");Ext.apply(this.renderSelectors,{mask:".x-picker-mask",bar:".x-picker-bar"}),this.scroll={direction:"vertical",useIndicators:!1,friction:.7,acceleration:25,snapDuration:200,animationDuration:200},this.tpl=new Ext.XTemplate(['<tpl for=".">','<div class="x-picker-item {cls} <tpl if="extra">x-picker-invalid</tpl>">{'+this.displayField+"}</div>","</tpl>"]);var a=this.data,b=[],c=a&&a.length,d,e,f;if(a&&Ext.isArray(a)&&c){for(d=0;d<c;d++)e=a[d],f={},Ext.isArray(e)?(f[this.valueField]=e[0],f[this.displayField]=e[1]):Ext.isString(e)?(f[this.valueField]=e,f[this.displayField]=e):Ext.isObject(e)&&(f=e),b.push(f);this.store=new Ext.data.Store({model:"x-textvalue",data:b}),this.tempStore=!0}else this.store&&(this.store=Ext.StoreMgr.lookup(this.store));this.enableBubble("slotpick"),this.title&&(this.title=new Ext.Component({dock:"top",componentCls:"x-picker-slot-title",html:this.title}),this.dockedItems=this.title),Ext.Picker.Slot.superclass.initComponent.call(this),this.value!==undefined&&this.setValue(this.value,!1)},setupBar:function(){this.el.setStyle({padding:""});var a=this.bar.getY()-this.el.getY();this.barHeight=this.bar.getHeight(),this.el.setStyle({padding:a+"px 0"}),this.slotPadding=a,this.scroller.updateBoundary(),this.scroller.setSnap(this.barHeight),this.setSelectedNode(this.selectedIndex,!1)},afterComponentLayout:function(){Ext.defer(this.setupBar,200,this)},initEvents:function(){this.mon(this.scroller,{scrollend:this.onScrollEnd,scope:this})},onScrollEnd:function(a,b){this.selectedNode=this.getNode(Math.round(b.y/this.barHeight)),this.selectedIndex=this.indexOf(this.selectedNode),this.fireEvent("slotpick",this,this.getValue(),this.selectedNode)},scrollToNode:function(a,b){var c=Ext.fly(a).getOffsetsTo(this.scrollEl)[1];this.scroller.scrollTo({y:c},b!==!1?!0:!1)},onItemTap:function(a){Ext.Picker.Slot.superclass.onItemTap.apply(this,arguments),this.setSelectedNode(a),this.selectedNode=a,this.selectedIndex=this.indexOf(a),this.fireEvent("slotpick",this,this.getValue(),this.selectedNode)},getSelectedNode:function(){return this.selectedNode},setSelectedNode:function(a,b){Ext.isNumber(a)?a=this.getNode(a):a.isModel&&(a=this.getNode(this.store.indexOf(a))),a&&(this.selectedNode=a,this.selectedIndex=this.indexOf(a),this.scrollToNode(a,b))},getValue:function(){var a=this.store.getAt(this.selectedIndex);return a?a.get(this.valueField):null},setValue:function(a,b){var c=this.store.find(this.valueField,a);if(c!=-1){if(!this.rendered){this.selectedIndex=c;return}this.setSelectedNode(c,b)}},onDestroy:function(){this.tempStore&&(this.store.destroyStore(),this.store=null),Ext.Picker.Slot.superclass.onDestroy.call(this)}}),Ext.reg("pickerslot",Ext.Picker.Slot),Ext.DatePicker=Ext.extend(Ext.Picker,{yearFrom:1980,yearTo:(new Date).getFullYear(),monthText:"Month",dayText:"Day",yearText:"Year",slotOrder:["month","day","year"],initComponent:function(){var a=this.yearFrom,b=this.yearTo,c=[],d=[],e=[],f,g,h,i;a>b&&(g=a,a=b,b=g);for(h=a;h<=b;h++)c.push({text:h,value:h});i=this.getDaysInMonth(1,(new Date).getFullYear());for(h=0;h<i;h++)d.push({text:h+1,value:h+1});for(h=0,f=Date.monthNames.length;h<f;h++)e.push({text:Date.monthNames[h],value:h+1});this.slots=[],this.slotOrder.forEach(function(a){this.slots.push(this.createSlot(a,d,e,c))},this),Ext.DatePicker.superclass.initComponent.call(this)},afterRender:function(){Ext.DatePicker.superclass.afterRender.apply(this,arguments),this.setValue(this.value)},createSlot:function(a,b,c,d){switch(a){case"year":return{name:"year",align:"center",data:d,title:this.useTitles?this.yearText:!1,flex:3};case"month":return{name:a,align:"right",data:c,title:this.useTitles?this.monthText:!1,flex:4};case"day":return{name:"day",align:"center",data:b,title:this.useTitles?this.dayText:!1,flex:2}}},onSlotPick:function(a,b){var c=a.name,d,e,f;if(c==="month"||c==="year")f=this.child("[name=day]"),d=this.getValue(),e=this.getDaysInMonth(d.getMonth()+1,d.getFullYear()),f.store.clearFilter(),f.store.filter({fn:function(a){return a.get("extra")===!0||a.get("value")<=e}}),f.scroller.updateBoundary(!0);Ext.DatePicker.superclass.onSlotPick.apply(this,arguments)},getValue:function(){var a=Ext.DatePicker.superclass.getValue.call(this),b=this.getDaysInMonth(a.month,a.year),c=Math.min(a.day,b);return new Date(a.year,a.month-1,c)},setValue:function(a,b){return!Ext.isDate(a)&&!Ext.isObject(a)&&(a=null),Ext.isDate(a)?this.value={day:a.getDate(),year:a.getFullYear(),month:a.getMonth()+1}:this.value=a,Ext.DatePicker.superclass.setValue.call(this,this.value,b)},getDaysInMonth:function(a,b){var c=[31,28,31,30,31,30,31,31,30,31,30,31];return a==2&&this.isLeapYear(b)?29:c[a-1]},isLeapYear:function(a){return(a&3)===0&&!!(a%100||a%400===0&&a)}}),Ext.reg("datepicker",Ext.DatePicker),Ext.Media=Ext.extend(Ext.Component,{url:"",enableControls:!0,autoResume:!1,autoPause:!0,preload:!0,playing:!1,afterRender:function(){var a=this.getConfiguration();Ext.apply(a,{src:this.url,preload:this.preload?"auto":"none"}),this.enableControls&&(a.controls="controls"),this.loop&&(a.loop="loop"),this.media=this.el.createChild(a),Ext.Media.superclass.afterRender.call(this),this.on({scope:this,activate:this.onActivate,beforedeactivate:this.onDeactivate})},onActivate:function(){this.autoResume&&!this.playing&&this.play()},onDeactivate:function(){this.autoPause&&this.playing&&this.pause()},play:function(){this.media.dom.play(),this.playing=!0},pause:function(){this.media.dom.pause(),this.playing=!1},toggle:function(){this.playing?this.pause():this.play()}}),Ext.reg("media",Ext.Media),Ext.Video=Ext.extend(Ext.Media,{posterUrl:"",componentCls:"x-video",afterRender:function(){Ext.Video.superclass.afterRender.call(this),this.posterUrl&&(this.media.hide(),this.ghost=this.el.createChild({cls:"x-video-ghost",style:"width: 100%; height: 100%; background: #000 url("+this.posterUrl+") center center no-repeat; -webkit-background-size: 100% auto;"}),this.ghost.on("tap",this.onGhostTap,this,{single:!0}))},onGhostTap:function(){this.media.show(),this.ghost.hide(),this.play()},getConfiguration:function(){return{tag:"video",width:"100%",height:"100%"}}}),Ext.reg("video",Ext.Video),Ext.Audio=Ext.extend(Ext.Media,{componentCls:"x-audio",onActivate:function(){Ext.Audio.superclass.onActivate.call(this),Ext.is.Phone&&this.media.show()},onDeactivate:function(){Ext.Audio.superclass.onDeactivate.call(this),Ext.is.Phone&&this.media.hide()},getConfiguration:function(){var a=!this.enableControls;return Ext.supports.AudioTag?{tag:"audio",hidden:a}:{tag:"embed",type:"audio/mpeg",target:"myself",controls:"true",hidden:a}}}),Ext.reg("audio",Ext.Audio),Ext.MessageBox=Ext.extend(Ext.Sheet,{centered:!0,renderHidden:!0,ui:"dark",componentCls:"x-msgbox",enterAnimation:"pop",exitAnimation:"pop",autoHeight:!0,defaultTextHeight:75,constructor:function(a){a=a||{};var b=a.ui||this.ui||"",c=a.componentCls||this.componentCls;delete a.html,this.titleBar=Ext.create({xtype:"toolbar",ui:b,dock:"top",cls:c+"-title",title:"&#160;"}),this.buttonBar=Ext.create({xtype:"toolbar",ui:b,dock:"bottom",layout:{pack:"center"},cls:c+"-buttons"}),a=Ext.apply({ui:b,dockedItems:[this.titleBar,this.buttonBar],renderSelectors:{body:"."+c+"-body",iconEl:"."+c+"-icon",msgContentEl:"."+c+"-content",msgEl:"."+c+"-text",inputsEl:"."+c+"-inputs",inputEl:"."+c+"-input-single",multiLineEl:"."+c+"-input-textarea"}},a||{}),Ext.MessageBox.superclass.constructor.call(this,a)},renderTpl:['<div class="{componentCls}-body"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>','<div class="{componentCls}-icon x-hidden-display"></div>','<div class="{componentCls}-content">','<div class="{componentCls}-text"></div>','<div class="{componentCls}-inputs x-hidden-display">','<input type="text" class="{componentCls}-input {componentCls}-input-single" />','<textarea class="{componentCls}-input {componentCls}-input-textarea"></textarea>',"</div>","</div>","</div>"],onClick:function(a){if(a){var b=a.config||{};typeof b.fn=="function"&&b.fn.call(b.scope||null,a.itemId||a.text,b.input?b.input.dom.value:null,b),b.cls&&this.el.removeCls(b.cls),b.input&&b.input.dom.blur()}this.hide()},show:function(a){var b,c,d={autocomplete:"off",autocapitalize:"off",autocorrect:"off",maxlength:0,autofocus:!0,placeholder:"",type:"text"},e=/true|on/i;this.rendered||this.render(document.body),a=Ext.applyIf(a||{},{multiLine:!1,prompt:!1,value:"",modal:!0}),a.title?(this.titleBar.setTitle(a.title),this.titleBar.show()):this.titleBar.hide();if(this.inputsEl&&(a.multiLine||a.prompt)){this.inputsEl.show(),this.multiLineEl&&a.multiLine?(this.inputEl&&this.inputEl.hide(),this.multiLineEl.show().setHeight(Ext.isNumber(a.multiLine)?parseFloat(a.multiLine):this.defaultTextHeight),a.input=this.multiLineEl):this.inputEl&&(this.inputEl.show(),this.multiLineEl&&this.multiLineEl.hide(),a.input=this.inputEl),Ext.isObject(a.prompt)&&Ext.apply(d,a.prompt);for(c in d)d.hasOwnProperty(c)&&(b=d[c],a.input.dom.setAttribute(c.toLowerCase(),/^auto/i.test(c)?e.test(b+"")?"on":"off":b))}else this.inputsEl&&this.inputsEl.hide();this.setIcon(a.icon||"",!1),this.updateText(a.msg,!1),a.cls&&this.el.addCls(a.cls),this.modal=!!a.modal;var f=this.buttonBar,g=[];return f.removeAll(),Ext.each([].concat(a.buttons||Ext.MessageBox.OK),function(b){b&&g.push(Ext.applyIf({config:a,scope:this,handler:this.onClick},b))},this),f.add(g),f.rendered&&f.doLayout(),Ext.MessageBox.superclass.show.call(this,a.animate),a.input&&(a.input.dom.value=a.value||"",e.test(d.autofocus+"")&&!("autofocus"in a.input.dom)&&a.input.dom.focus()),this},onOrientationChange:function(){this.doComponentLayout(),Ext.MessageBox.superclass.onOrientationChange.apply(this,arguments)},adjustScale:function(){Ext.apply(this,{maxWidth:window.innerWidth,maxHeight:window.innerHeight,minWidth:window.innerWidth*.5,minHeight:window.innerHeight*.5})},doComponentLayout:function(){return this.adjustScale(),Ext.MessageBox.superclass.doComponentLayout.apply(this,arguments)},alert:function(a,b,c,d){return this.show({title:a,msg:b,buttons:Ext.MessageBox.OK,fn:c,scope:d,icon:Ext.MessageBox.INFO})},confirm:function(a,b,c,d){return this.show({title:a,msg:b,buttons:Ext.MessageBox.YESNO,fn:function(a){c.call(d,a)},scope:d,icon:Ext.MessageBox.QUESTION})},prompt:function(a,b,c,d,e,f,g){return this.show({title:a,msg:b,buttons:Ext.MessageBox.OKCANCEL,fn:function(a,b){c.call(d,a,b)},scope:d,icon:Ext.MessageBox.QUESTION,prompt:g||!0,multiLine:e,value:f})},updateText:function(a,b){return this.msgEl&&(this.msgEl.update(a?String(a):"&#160;"),b!==!1&&this.doComponentLayout()),this},setIcon:function(a,b){return a?(this.iconEl.show(),this.iconEl.replaceCls(this.iconCls,a)):this.iconEl.replaceCls(this.iconCls,"x-hidden-display"),b!==!1&&this.doComponentLayout(),this.iconCls=a,this}}),function(){var a=Ext.MessageBox;Ext.apply(a,{OK:{text:"OK",itemId:"ok",ui:"action"},CANCEL:{text:"Cancel",itemId:"cancel"},YES:{text:"Yes",itemId:"yes",ui:"action"},NO:{text:"No",itemId:"no"},INFO:"x-msgbox-info",WARNING:"x-msgbox-warning",QUESTION:"x-msgbox-question",ERROR:"x-msgbox-error"}),Ext.apply(a,{OKCANCEL:[a.CANCEL,a.OK],YESNOCANCEL:[a.CANCEL,a.NO,a.YES],YESNO:[a.NO,a.YES]})}(),Ext.reg("messagebox",Ext.MessageBox),Ext.reg("msgbox",Ext.MessageBox),Ext.Msg=new Ext.MessageBox,Ext.form.FormPanel=Ext.extend(Ext.Panel,{standardSubmit:!1,componentCls:"x-form",url:undefined,baseParams:undefined,waitTpl:new Ext.XTemplate('<div class="{cls}">{message}&hellip;</div>'),submitOnAction:!0,getElConfig:function(){return Ext.apply(Ext.form.FormPanel.superclass.getElConfig.call(this),{tag:"form"})},initComponent:function(){this.addEvents("submit","beforesubmit","exception"),Ext.form.FormPanel.superclass.initComponent.call(this),this.on("action",this.onFieldAction,this)},afterRender:function(){Ext.form.FormPanel.superclass.afterRender.call(this),this.el.on("submit",this.onSubmit,this)},onSubmit:function(a,b){(!this.standardSubmit||this.fireEvent("beforesubmit",this,this.getValues(!0))===!1)&&a&&a.stopEvent()},onFieldAction:function(a){this.submitOnAction&&(a.blur(),this.submit())},submit:function(a){var b=this.el.dom||{},c;a=Ext.apply({url:this.url||b.action,submitDisabled:!1,method:b.method||"post",autoAbort:!1,params:null,waitMsg:null,headers:null,success:null,failure:null},a||{}),c=this.getValues(this.standardSubmit||!a.submitDisabled);if(this.standardSubmit)return b&&(a.url&&Ext.isEmpty(b.action)&&(b.action=a.url),b.method=(a.method||b.method).toLowerCase(),this.fireEvent("beforesubmit",this,c,a)!==!1&&b.submit()),null;if(this.fireEvent("beforesubmit",this,c,a)!==!1)return a.waitMsg&&this.showMask(a.waitMsg),Ext.Ajax.request({url:a.url,method:a.method,rawData:Ext.urlEncode(Ext.apply(Ext.apply({},this.baseParams||{}),a.params||{},c)),autoAbort:a.autoAbort,headers:Ext.apply({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},a.headers||{}),scope:this,callback:function(b,c,d){var e=d.responseText;this.hideMask();if(c){d=Ext.decode(e),c=!!d.success;if(c){Ext.isFunction(a.success)&&a.success.call(a.scope||this,this,d,e),this.fireEvent("submit",this,d);return}}Ext.isFunction(a.failure)&&a.failure.call(a.scope||this,this,d,e),this.fireEvent("exception",this,d)}})},loadRecord:function(a){return a&&a.data&&(this.setValues(a.data),this.record=a),this},loadModel:function(){return this.loadRecord.apply(this,arguments)},getRecord:function(){return this.record},updateRecord:function(a,b){var c,d,e;if(a&&(c=a.fields)){d=this.getValues(b);for(e in d)d.hasOwnProperty(e)&&c.containsKey(e)&&a.set(e,d[e])}return this},setValues:function(a){var b=this.getFields(),c,d,e;a=a||{};for(c in a)a.hasOwnProperty(c)&&(d=b[c],e=a[c],d&&(Ext.isArray(d)?d.forEach(function(b){Ext.isArray(a[c])?b.setChecked(e.indexOf(b.getValue())!=-1):b.setChecked(e==b.getValue())}):d.setChecked?d.setChecked(e):d.setValue(e)));return this},getValues:function(a){var b=this.getFields(),c,d={},e;for(e in b)if(b.hasOwnProperty(e))if(Ext.isArray(b[e]))d[e]=[],b[e].forEach(function(b){b.isChecked()&&(!a||!b.disabled)&&(b instanceof Ext.form.Radio?d[e]=b.getValue():d[e].push(b.getValue()))});else{c=b[e];if(!a||!c.disabled)c instanceof Ext.form.Checkbox?d[e]=c.isChecked()?c.getValue():null:d[e]=c.getValue()}return d},reset:function(){return this.getFieldsAsArray().forEach(function(a){a.reset()}),this},enable:function(){return this.getFieldsAsArray().forEach(function(a){a.enable()}),this},disable:function(){return this.getFieldsAsArray().forEach(function(a){a.disable()}),this},getFieldsAsArray:function(){var a=[],b=function(c){c.isField&&a.push(c),c.isContainer&&c.items.each(b)};return this.items.each(b),a},getFields:function(a){var b={},c,d=function(e){if(e.isField){c=e.getName();if(a&&c==a||typeof a=="undefined")b.hasOwnProperty(c)?(Ext.isArray(b[c])||(b[c]=[b[c]]),b[c].push(e)):b[c]=e}e.isContainer&&e.items.each(d)};return this.items.each(d),a?b[a]||[]:b},getFieldsFromItem:function(){},showMask:function(a,b){return a=Ext.isString(a)?{message:a}:a,a&&this.waitTpl&&(this.maskTarget=b=Ext.get(b||a.target)||this.el,b&&b.mask(this.waitTpl.apply(a))),this},hideMask:function(){return this.maskTarget&&(this.maskTarget.unmask(),delete this.maskTarget),this}}),Ext.form.FormPanel.prototype.load=Ext.form.FormPanel.prototype.loadModel,Ext.reg("formpanel",Ext.form.FormPanel),Ext.reg("form",Ext.form.FormPanel),Ext.form.FieldSet=Ext.extend(Ext.Panel,{componentCls:"x-form-fieldset",initComponent:function(){this.componentLayout=this.getLayout(),Ext.form.FieldSet.superclass.initComponent.call(this)},afterLayout:function(a){Ext.form.FieldSet.superclass.afterLayout.call(this,a),this.title&&!this.titleEl?this.setTitle(this.title):this.titleEl&&this.el.insertFirst(this.titleEl),this.instructions&&!this.instructionsEl?this.setInstructions(this.instructions):this.instructionsEl&&this.el.appendChild(this.instructionsEl)},setTitle:function(a){return this.rendered?(this.titleEl||(this.titleEl=this.el.insertFirst({cls:this.componentCls+"-title"})),this.titleEl.setHTML(a)):this.title=a,this},setInstructions:function(a){return this.rendered?(this.instructionsEl||(this.instructionsEl=this.el.createChild({cls:this.componentCls+"-instructions"})),this.instructionsEl.setHTML(a)):this.instructions=a,this}}),Ext.reg("fieldset",Ext.form.FieldSet),Ext.form.Field=Ext.extend(Ext.Component,{isField:!0,fieldCls:"x-form-field",baseCls:"x-field",inputCls:undefined,disabled:!1,renderTpl:['<tpl if="label">','<div class="x-form-label"><span>{label}</span></div>',"</tpl>",'<tpl if="fieldEl">','<div class="x-form-field-container"><input id="{inputId}" type="{inputType}" name="{name}" class="{fieldCls}"','<tpl if="tabIndex">tabIndex="{tabIndex}" </tpl>','<tpl if="placeHolder">placeholder="{placeHolder}" </tpl>','<tpl if="style">style="{style}" </tpl>','<tpl if="maxlength">maxlength="{maxlength}" </tpl>','<tpl if="autoComplete">autocomplete="{autoComplete}" </tpl>','<tpl if="autoCapitalize">autocapitalize="{autoCapitalize}" </tpl>','<tpl if="autoCorrect">autocorrect="{autoCorrect}" </tpl> />','<tpl if="useMask"><div class="x-field-mask"></div></tpl>',"</div>",'<tpl if="useClearIcon"><div class="x-field-clear-container"><div class="x-field-clear x-hidden-visibility">&#215;</div></div></tpl>',"</tpl>"],isFormField:!0,autoCreateField:!0,inputType:"text",label:null,labelWidth:"30%",labelAlign:"left",required:!1,useMask:!1,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this)},getName:function(){return this.name||this.id||""},applyRenderSelectors:function(){this.renderSelectors=Ext.applyIf(this.renderSelectors||{},{mask:".x-field-mask",labelEl:".x-form-label",fieldEl:"."+Ext.util.Format.trim(this.renderData.fieldCls).replace(/ /g,".")}),Ext.form.Field.superclass.applyRenderSelectors.call(this)},initRenderData:function(){return Ext.form.Field.superclass.initRenderData.apply(this,arguments),Ext.applyIf(this.renderData,{disabled:this.disabled,fieldCls:"x-input-"+this.inputType+(this.inputCls?" "+this.inputCls:""),fieldEl:!this.fieldEl&&this.autoCreateField,inputId:Ext.id(),label:this.label,labelAlign:"x-label-align-"+this.labelAlign,name:this.getName(),required:this.required,style:this.style,tabIndex:this.tabIndex,inputType:this.inputType,useMask:this.useMask}),this.renderData},initEvents:function(){Ext.form.Field.superclass.initEvents.apply(this,arguments),this.fieldEl&&this.useMask&&this.mask&&this.mon(this.mask,{click:this.onMaskTap,scope:this})},onRender:function(){Ext.form.Field.superclass.onRender.apply(this,arguments);var a=[];this.required&&a.push("x-field-required"),this.label&&a.push("x-label-align-"+this.labelAlign),this.el.addCls(a)},afterRender:function(){Ext.form.Field.superclass.afterRender.apply(this,arguments),this.label&&this.setLabelWidth(this.labelWidth),this.initValue()},isDisabled:function(){return this.disabled},onEnable:function(){this.fieldEl.dom.disabled=!1},onDisable:function(){this.fieldEl.dom.disabled=!0},initValue:function(){this.setValue(this.value||"",!0),this.originalValue=this.getValue()},isDirty:function(){return this.disabled||!this.rendered?!1:String(this.getValue())!==String(this.originalValue)},onMaskTap:function(a){return this.disabled?!1:!0},showMask:function(a){this.mask&&this.mask.setStyle("display","block")},hideMask:function(a){this.mask&&this.mask.setStyle("display","none")},reset:function(){this.setValue(this.originalValue)},getValue:function(){return!this.rendered||!this.fieldEl?this.value:this.fieldEl.getValue()},setValue:function(a){return this.value=a,this.rendered&&this.fieldEl&&(this.fieldEl.dom.value=Ext.isEmpty(a)?"":a),this},setLabelWidth:function(a){return this.labelEl&&this.labelEl.setWidth(a),this}}),Ext.reg("field",Ext.form.Field),Ext.form.Slider=Ext.extend(Ext.form.Field,{ui:"slider",inputCls:"x-slider",inputType:"slider",minValue:0,maxValue:100,animationDuration:200,value:0,trackWidth:null,monitorOrientation:!0,renderTpl:['<tpl if="label">','<div class="x-form-label"><span>{label}</span></div>',"</tpl>",'<tpl if="fieldEl">','<div id="{inputId}" name="{name}" class="{fieldCls}"','<tpl if="tabIndex">tabIndex="{tabIndex}"</tpl>','<tpl if="style">style="{style}" </tpl>',"/></tpl>"],increment:1,constructor:function(a){this.addEvents("beforechange","change","drag","dragend"),Ext.form.Slider.superclass.constructor.call(this,a)},initComponent:function(){this.tabIndex=-1,this.increment==0&&(this.increment=1),this.increment=Math.abs(this.increment),this.values=[this.value],Ext.form.Slider.superclass.initComponent.apply(this,arguments);if(this.thumbs==undefined){var a=[],b=this.values,c=b.length,d,e=this.getThumbClass();for(d=0;d<c;d++)a[a.length]=new e({value:b[d],slider:this,listeners:{scope:this,drag:this.onDrag,dragend:this.onThumbDragEnd}});this.thumbs=a}},initValue:function(){var a=this.getThumb();a.dragObj&&a.dragObj.updateBoundary(),Ext.form.Slider.superclass.initValue.apply(this,arguments)},onOrientationChange:function(){Ext.form.Slider.superclass.onOrientationChange.apply(this,arguments);var a=this,b=this.getThumb();b.dragObj&&setTimeout(function(){b.dragObj.updateBoundary(),a.moveThumb(b,a.getPixelValue(b.getValue(),b),0)},100)},getThumbClass:function(){return Ext.form.Slider.Thumb},setValue:function(a,b,c){typeof c=="undefined"&&(c=!0),c=!!c;var d=this.getThumb(),e=d.getValue(),f=this.constrain(a);return this.fireEvent("beforechange",this,d,f,e)!==!1&&(c&&this.moveThumb(d,this.getPixelValue(f,d),b),d.setValue(f),this.doComponentLayout(),this.fireEvent("change",this,d,f,e)),this},constrain:function(a){var b=a%this.increment;return a-=b,Math.abs(b)>=this.increment/2&&(a+=b>0?this.increment:-this.increment),a=Math.max(this.minValue,a),a=Math.min(this.maxValue,a),a},getValue:function(){return this.getThumb().getValue()},getThumb:function(){return this.thumbs[0]},getSliderValue:function(a,b){var c=b.dragObj.offsetBoundary.right,d=this.maxValue-this.minValue,e;return this.trackWidth=c>0?c:this.trackWidth,e=d/this.trackWidth,this.minValue+e*a},getPixelValue:function(a,b){var c=b.dragObj.offsetBoundary.right,d=this.maxValue-this.minValue,e;return this.trackWidth=c>0?c:this.trackWidth,e=this.trackWidth/d,e*(a-this.minValue)},renderThumbs:function(){var a=this.thumbs,b=a.length,c;for(c=0;c<b;c++)a[c].render(this.fieldEl)},onThumbDragEnd:function(a){var b=this.getThumbValue(a);this.setValue(b),this.fireEvent("dragend",this,a.thumb,this.constrain(b))},getThumbValue:function(a){var b=a.thumb;return this.getSliderValue(-a.getOffset().x,b)},onDrag:function(a){var b=this.getThumbValue(a);this.fireEvent("drag",this,a.thumb,this.constrain(b))},onTap:function(a){if(!this.disabled){var b=this.fieldEl.getPageBox(),c=a.pageX-b.left,d=this.getNearest(c),e=d.dragObj.size.width/2;this.setValue(this.getSliderValue(c-e,d),this.animationDuration,!0)}},moveThumb:function(a,b,c){a.dragObj.setOffset(new Ext.util.Offset(b,0),c)},afterRender:function(a){var b=this;b.renderThumbs(),Ext.form.Slider.superclass.afterRender.apply(b,arguments),b.fieldEl.on({scope:b,tap:b.onTap})},getNearest:function(a){return this.thumbs[0]},setThumbsDisabled:function(a){var b=this.thumbs,c=b.length,d=0;for(;d<c;d++)b[d].dragObj[a?"disable":"enable"]()},disable:function(){Ext.form.Slider.superclass.disable.call(this),this.setThumbsDisabled(!0)},enable:function(){Ext.form.Slider.superclass.enable.call(this),this.setThumbsDisabled(!1)}}),Ext.reg("sliderfield",Ext.form.Slider),Ext.form.Slider.Thumb=Ext.extend(Ext.form.Field,{isField:!1,baseCls:"x-thumb",autoCreateField:!1,draggable:!0,value:0,onRender:function(){this.draggable={direction:"horizontal",constrain:this.slider.fieldEl,revert:!1,thumb:this},Ext.form.Slider.Thumb.superclass.onRender.apply(this,arguments)},setValue:function(a){return this.value=a,this},getValue:function(){return this.value}}),Ext.reg("sliderthumb",Ext.form.Slider.Thumb),Ext.form.Toggle=Ext.extend(Ext.form.Slider,{minValue:0,maxValue:1,ui:"toggle",inputType:"toggle",minValueCls:"x-toggle-off",maxValueCls:"x-toggle-on",animationDuration:70,toggle:function(){var a=this.thumbs[0],b=a.getValue();this.setValue(b==this.minValue?this.maxValue:this.minValue,this.animationDuration)},setValue:function(a){Ext.form.Toggle.superclass.setValue.call(this,a,this.animationDuration);var b=this.fieldEl;this.constrain(a)===this.minValue?(b.addCls(this.minValueCls),b.removeCls(this.maxValueCls)):(b.addCls(this.maxValueCls),b.removeCls(this.minValueCls))},onTap:function(){this.disabled||this.toggle()},getThumbClass:function(){return Ext.form.Toggle.Thumb}}),Ext.reg("togglefield",Ext.form.Toggle),Ext.form.Toggle.Thumb=Ext.extend(Ext.form.Slider.Thumb,{onRender:function(){Ext.form.Toggle.Thumb.superclass.onRender.apply(this,arguments),Ext.DomHelper.append(this.el,[{cls:"x-toggle-thumb-off",html:"<span>OFF</span>"},{cls:"x-toggle-thumb-on",html:"<span>ON</span>"},{cls:"x-toggle-thumb-thumb"}])}}),Ext.form.Text=Ext.extend(Ext.form.Field,{ui:"text",focusCls:"x-field-focus",maxLength:0,placeHolder:undefined,autoComplete:undefined,autoCapitalize:undefined,autoCorrect:undefined,isFocused:!1,isClearIconVisible:!1,useMask:Ext.is.iOS,initComponent:function(){this.addEvents("focus","blur","keyup","change","action"),this.enableBubble("action"),Ext.form.Text.superclass.initComponent.apply(this,arguments)},applyRenderSelectors:function(){this.renderSelectors=Ext.applyIf(this.renderSelectors||{},{clearIconEl:".x-field-clear",clearIconContainerEl:".x-field-clear-container"}),Ext.form.Text.superclass.applyRenderSelectors.call(this)},initRenderData:function(){var a=Ext.form.Text.superclass.initRenderData.call(this),b=this.autoComplete,c=this.autoCapitalize,d=this.autoCorrect;Ext.applyIf(a,{placeHolder
:this.placeHolder,maxlength:this.maxLength,useClearIcon:this.useClearIcon});var e=[!0,"on"];return b!==undefined&&(a.autoComplete=e.indexOf(b)!==-1?"on":"off"),c!==undefined&&(a.autoCapitalize=e.indexOf(c)!==-1?"on":"off"),d!==undefined&&(a.autoCorrect=e.indexOf(d)!==-1?"on":"off"),this.renderData=a,a},initEvents:function(){Ext.form.Text.superclass.initEvents.call(this),this.fieldEl&&(this.mon(this.fieldEl,{focus:this.onFocus,blur:this.onBlur,keyup:this.onKeyUp,paste:this.updateClearIconVisibility,mousedown:this.onBeforeFocus,scope:this}),this.clearIconEl&&this.mon(this.clearIconContainerEl,{scope:this,tap:this.onClearIconTap}))},onEnable:function(){Ext.form.Text.superclass.onEnable.apply(this,arguments),this.disabled=!1,this.updateClearIconVisibility()},onDisable:function(){Ext.form.Text.superclass.onDisable.apply(this,arguments),this.blur(),this.hideClearIcon()},onClearIconTap:function(){this.disabled||this.setValue("")},updateClearIconVisibility:function(){var a=this.getValue();return a||(a=""),a.length<1?this.hideClearIcon():this.showClearIcon(),this},showClearIcon:function(){return!this.disabled&&this.fieldEl&&this.clearIconEl&&!this.isClearIconVisible&&(this.isClearIconVisible=!0,this.fieldEl.addCls("x-field-clearable"),this.clearIconEl.removeCls("x-hidden-visibility")),this},hideClearIcon:function(){return this.fieldEl&&this.clearIconEl&&this.isClearIconVisible&&(this.isClearIconVisible=!1,this.fieldEl.removeCls("x-field-clearable"),this.clearIconEl.addCls("x-hidden-visibility")),this},afterRender:function(){Ext.form.Text.superclass.afterRender.call(this),this.updateClearIconVisibility()},onBeforeFocus:function(a){this.fireEvent("beforefocus",a)},beforeFocus:Ext.emptyFn,onMaskTap:function(a){if(Ext.form.Text.superclass.onMaskTap.apply(this,arguments)!==!0)return!1;this.maskCorrectionTimer=Ext.defer(this.showMask,1e3,this),this.hideMask()},onFocus:function(a){this.mask&&(this.maskCorrectionTimer&&clearTimeout(this.maskCorrectionTimer),this.hideMask()),this.beforeFocus(),this.focusCls&&this.el.addCls(this.focusCls),this.isFocused||(this.isFocused=!0,this.startValue=this.getValue(),this.fireEvent("focus",this,a)),Ext.currentlyFocusedField=this},beforeBlur:Ext.emptyFn,onBlur:function(a){this.beforeBlur(),this.focusCls&&this.el.removeCls(this.focusCls),this.isFocused=!1;var b=this.getValue();String(b)!=String(this.startValue)&&this.fireEvent("change",this,b,this.startValue),this.fireEvent("blur",this,a),this.updateClearIconVisibility(),this.showMask(),this.afterBlur(),Ext.currentlyFocusedField=null},afterBlur:Ext.emptyFn,focus:function(){return this.rendered&&this.fieldEl&&this.fieldEl.dom.focus&&this.fieldEl.dom.focus(),this},blur:function(){return this.rendered&&this.fieldEl&&this.fieldEl.dom.blur&&this.fieldEl.dom.blur(),this},setValue:function(){Ext.form.Text.superclass.setValue.apply(this,arguments),this.updateClearIconVisibility()},onKeyUp:function(a){this.updateClearIconVisibility(),this.fireEvent("keyup",this,a),a.browserEvent.keyCode===13&&(this.blur(),this.fireEvent("action",this,a))}}),Ext.reg("textfield",Ext.form.Text),Ext.form.TextField=Ext.extend(Ext.form.Text,{constructor:function(){console.warn("Ext.form.TextField has been deprecated and will be removed in Sencha Touch 1.0. Please use Ext.form.Text instead"),Ext.form.TextField.superclass.constructor.apply(this,arguments)}}),Ext.form.Password=Ext.extend(Ext.form.Text,{inputType:"password",autoCapitalize:!1}),Ext.reg("passwordfield",Ext.form.Password),Ext.form.Email=Ext.extend(Ext.form.Text,{inputType:"email",autoCapitalize:!1}),Ext.reg("emailfield",Ext.form.Email),Ext.form.Url=Ext.extend(Ext.form.Text,{inputType:"url",autoCapitalize:!1}),Ext.reg("urlfield",Ext.form.Url),Ext.form.Search=Ext.extend(Ext.form.Text,{inputType:"search"}),Ext.reg("searchfield",Ext.form.Search),Ext.form.Number=Ext.extend(Ext.form.Text,{ui:"number",inputType:"number",minValue:undefined,maxValue:undefined,stepValue:undefined,renderTpl:['<tpl if="label"><div class="x-form-label"><span>{label}</span></div></tpl>','<tpl if="fieldEl"><div class="x-form-field-container">','<input id="{inputId}" type="{inputType}" name="{name}" class="{fieldCls}"','<tpl if="tabIndex">tabIndex="{tabIndex}" </tpl>','<tpl if="placeHolder">placeholder="{placeHolder}" </tpl>','<tpl if="style">style="{style}" </tpl>','<tpl if="minValue != undefined">min="{minValue}" </tpl>','<tpl if="maxValue != undefined">max="{maxValue}" </tpl>','<tpl if="stepValue != undefined">step="{stepValue}" </tpl>','<tpl if="autoComplete">autocomplete="{autoComplete}" </tpl>','<tpl if="autoCapitalize">autocapitalize="{autoCapitalize}" </tpl>','<tpl if="autoFocus">autofocus="{autoFocus}" </tpl>',"/>",'<tpl if="useMask"><div class="x-field-mask"></div></tpl>',"</div></tpl>",'<tpl if="useClearIcon"><div class="x-field-clear-container"><div class="x-field-clear x-hidden-visibility">&#215;</div><div></tpl>'],onRender:function(){Ext.apply(this.renderData,{maxValue:this.maxValue,minValue:this.minValue,stepValue:this.stepValue}),Ext.form.Number.superclass.onRender.apply(this,arguments)}}),Ext.reg("numberfield",Ext.form.Number),Ext.form.Spinner=Ext.extend(Ext.form.Number,{componentCls:"x-spinner",minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,incrementValue:1,accelerateOnTapHold:!0,defaultValue:0,cycle:!1,disableInput:!1,useClearIcon:!1,autoCapitalize:!1,renderTpl:['<tpl if="label"><div class="x-form-label"><span>{label}</span></div></tpl>','<tpl if="fieldEl">','<div class="{componentCls}-body">','<div class="{componentCls}-down"><span>-</span></div>','<div class="x-form-field-container">','<input id="{inputId}" type="{type}" name="{name}" class="{fieldCls}"','<tpl if="tabIndex">tabIndex="{tabIndex}" </tpl>','<tpl if="placeHolder">placeholder="{placeHolder}" </tpl>','<tpl if="style">style="{style}" </tpl>','<tpl if="minValue != undefined">min="{minValue}" </tpl>','<tpl if="maxValue != undefined">max="{maxValue}" </tpl>','<tpl if="stepValue != undefined">step="{stepValue}" </tpl>','<tpl if="autoComplete">autocomplete="{autoComplete}" </tpl>','<tpl if="autoFocus">autofocus="{autoFocus}" </tpl>',"/>",'<tpl if="useMask"><div class="x-field-mask"></div></tpl>',"</div>",'<div class="{componentCls}-up"><span>+</span></div>',"</div>","</tpl>"],initComponent:function(){this.addEvents("spin","spindown","spinup"),Ext.form.Spinner.superclass.initComponent.call(this)},onRender:function(){this.renderData.disableInput=this.disableInput,Ext.applyIf(this.renderSelectors,{spinUpEl:".x-spinner-up",spinDownEl:".x-spinner-down"}),Ext.form.Spinner.superclass.onRender.apply(this,arguments),this.downRepeater=this.createRepeater(this.spinDownEl,this.onSpinDown),this.upRepeater=this.createRepeater(this.spinUpEl,this.onSpinUp)},initValue:function(){isNaN(this.defaultValue)&&(this.defaultValue=0),this.value||(this.value=this.defaultValue),Ext.form.Spinner.superclass.initValue.apply(this,arguments)},createRepeater:function(a,b){var c=new Ext.util.TapRepeater(a,{accelerate:this.accelerateOnTapHold});return this.mon(c,{tap:b,touchstart:this.onTouchStart,touchend:this.onTouchEnd,preventDefault:!0,scope:this}),c},onSpinDown:function(){this.disabled||this.spin(!0)},onSpinUp:function(){this.disabled||this.spin(!1)},onKeyUp:function(a){Ext.form.Spinner.superclass.onKeyUp.apply(this,arguments)},onTouchStart:function(a){this.disabled||a.el.addCls("x-button-pressed")},onTouchEnd:function(a){a.el.removeCls("x-button-pressed")},setValue:function(a){a=parseFloat(a),isNaN(a)&&(a=this.defaultValue),Ext.form.Spinner.superclass.setValue.call(this,a)},spin:function(a){var b=parseFloat(this.getValue()),c=this.incrementValue,d=this.cycle,e=this.minValue,f=this.maxValue,g=a?"down":"up";a?b-=c:b+=c,b=isNaN(b)?this.defaultValue:b,b<e?b=d?f:e:b>f&&(b=d?e:f),this.setValue(b),this.fireEvent("spin"+g,this,b),this.fireEvent("spin",this,b,g)},destroy:function(){Ext.destroy(this.downRepeater,this.upRepeater),Ext.form.Spinner.superclass.destroy.call(this,arguments)}}),Ext.reg("spinnerfield",Ext.form.Spinner),Ext.form.Hidden=Ext.extend(Ext.form.Field,{ui:"hidden",inputType:"hidden",tabIndex:-1}),Ext.reg("hiddenfield",Ext.form.Hidden),Ext.form.HiddenField=Ext.extend(Ext.form.Hidden,{constructor:function(){console.warn("Ext.form.HiddenField has been deprecated and will be removed in Sencha Touch 1.0. Please use Ext.form.Hidden instead"),Ext.form.HiddenField.superclass.constructor.apply(this,arguments)}}),Ext.form.Checkbox=Ext.extend(Ext.form.Field,{ui:"checkbox",inputType:"checkbox",checked:!1,value:"",constructor:function(a){this.addEvents("check","uncheck"),Ext.form.Checkbox.superclass.constructor.call(this,a)},renderTpl:['<tpl if="label"><div class="x-form-label"><span>{label}</span></div></tpl>','<tpl if="fieldEl"><input id="{inputId}" type="{inputType}" name="{name}" class="{fieldCls}" tabIndex="-1" ','<tpl if="checked"> checked </tpl>','<tpl if="style">style="{style}" </tpl> value="{inputValue}" />',"</tpl>"],onRender:function(){var a=this.getBooleanIsChecked(this.checked);Ext.apply(this.renderData,{inputValue:String(this.value),checked:a}),Ext.form.Checkbox.superclass.onRender.apply(this,arguments),this.fieldEl&&(this.mon(this.fieldEl,{click:this.onChange,scope:this}),this.setChecked(a),this.originalState=this.isChecked())},onChange:function(a){if(a){a.browserEvent&&(a=a.browserEvent);if(Ext.supports.Touch&&!a.isSimulated){a.preventDefault(),a.stopPropagation();return}}this.isChecked()?this.fireEvent("check",this):this.fireEvent("uncheck",this)},isChecked:function(){return this.rendered?this.fieldEl.dom.checked||!1:!!this.checked},setChecked:function(a){var b=this.getBooleanIsChecked(a),c=this.rendered,d,e;return c?(e=this.fieldEl.dom,d=e.checked):d=!!this.checked,d!=b&&(c?e.checked=b:this.checked=b,this.onChange()),this},check:function(){return this.setChecked(!0)},uncheck:function(){return this.setChecked(!1)},reset:function(){return Ext.form.Checkbox.superclass.reset.apply(this,arguments),this.setChecked(this.originalState),this},getBooleanIsChecked:function(a){return/^(true|1|on)/i.test(String(a))},getSameGroupFields:function(){var a=this.el.up("form"),b=Ext.getCmp(a.id),c=[];return b&&(c=b.getFields(this.getName())),c},getGroupValues:function(){var a=[];return this.getSameGroupFields().forEach(function(b){b.isChecked()&&a.push(b.getValue())}),a},setGroupValues:function(a){return this.getSameGroupFields().forEach(function(b){b.setChecked(a.indexOf(b.getValue())!==-1)}),this},setValue:function(a){a=String(a),Ext.form.Checkbox.superclass.setValue.call(this,a)}}),Ext.reg("checkboxfield",Ext.form.Checkbox),Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",ui:"radio",getGroupValue:function(){var a,b=this.getSameGroupFields();for(var c=0;c<b.length;c++){a=b[c];if(a.isChecked())return a.getValue()}return null},setGroupValue:function(a){var b,c=this.getSameGroupFields(),d=0,e=c.length;for(;d<e;d++){b=c[d];if(b.getValue()==a){b.check();return}}}}),Ext.reg("radiofield",Ext.form.Radio),Ext.form.Select=Ext.extend(Ext.form.Text,{ui:"select",valueField:"value",displayField:"text",tabIndex:-1,useMask:!0,monitorOrientation:!0,initComponent:function(){var a=this.options;this.store?this.store=Ext.StoreMgr.lookup(this.store):(this.store=new Ext.data.Store({fields:[this.valueField,this.displayField]}),a&&Ext.isArray(a)&&a.length>0&&this.setOptions(this.options)),Ext.form.Select.superclass.initComponent.call(this),this.addEvents("change")},onRender:function(){Ext.form.Select.superclass.onRender.apply(this,arguments);var a=this.hiddenName;a&&(this.hiddenField=this.el.insertSibling({name:a,tag:"input",type:"hidden"},"after"))},getPicker:function(){return this.picker||(this.picker=new Ext.Picker({slots:[{align:"center",name:this.name,valueField:this.valueField,displayField:this.displayField,value:this.getValue(),store:this.store}],listeners:{change:this.onPickerChange,scope:this}})),this.picker},getListPanel:function(){return this.listPanel||(this.listPanel=new Ext.Panel({floating:!0,stopMaskTapEvent:!1,hideOnMaskTap:!0,cls:"x-select-overlay",scroll:"vertical",items:{xtype:"list",store:this.store,itemId:"list",scroll:!1,itemTpl:['<span class="x-list-label">{'+this.displayField+"}</span>",'<span class="x-list-selected"></span>'],listeners:{select:this.onListSelect,scope:this}}})),this.listPanel},onOrientationChange:function(){this.listPanel&&!this.listPanel.hidden&&!Ext.is.Phone&&this.listPanel.showBy(this.el,!1,!1)},onMaskTap:function(){if(this.disabled)return;this.showComponent()},showComponent:function(){if(Ext.is.Phone){var a=this.getPicker(),b=this.name,c={};c[b]=this.getValue(),a.show(),a.setValue(c)}else{var d=this.getListPanel(),e=this.store.findExact(this.valueField,this.value);d.showBy(this.el,"fade",!1),d.down("#list").getSelectionModel().select(e!=-1?e:0,!1,!0)}},onListSelect:function(a,b){b&&(this.setValue(b.get(this.valueField)),this.fireEvent("change",this,this.getValue())),this.listPanel.hide({type:"fade",out:!0,scope:this})},onPickerChange:function(a,b){var c=this.getValue(),d=b[this.name];d!=c&&(this.setValue(d),this.fireEvent("change",this,d))},setValue:function(a){var b=0,c=this.hiddenField,d;a&&(b=this.store.findExact(this.valueField,a)),d=this.store.getAt(b),d&&this.rendered?(this.fieldEl.dom.value=d.get(this.displayField),this.value=d.get(this.valueField),c&&(c.dom.value=this.value)):(this.rendered&&(this.fieldEl.dom.value=a),this.value=a);if(this.picker){var e={};e[this.name]=this.value,this.picker.setValue(e)}return this},getValue:function(){return this.value},setOptions:function(a,b){a?this.store.loadData(a,b):(this.store.clearData(),this.setValue(null))},destroy:function(){Ext.form.Select.superclass.destroy.apply(this,arguments),Ext.destroy(this.listPanel,this.picker,this.hiddenField)}}),Ext.reg("selectfield",Ext.form.Select),Ext.form.TextArea=Ext.extend(Ext.form.Text,{ui:"textarea",maxRows:undefined,autoCapitalize:!1,renderTpl:['<tpl if="label"><div class="x-form-label"><span>{label}</span></div></tpl>','<tpl if="fieldEl"><div class="x-form-field-container">','<textarea id="{inputId}" type="{type}" name="{name}" class="{fieldCls}"','<tpl if="tabIndex">tabIndex="{tabIndex}" </tpl>','<tpl if="placeHolder">placeholder="{placeHolder}" </tpl>','<tpl if="style">style="{style}" </tpl>','<tpl if="maxRows != undefined">rows="{maxRows}" </tpl>','<tpl if="maxlength">maxlength="{maxlength}" </tpl>','<tpl if="autoComplete">autocomplete="{autoComplete}" </tpl>','<tpl if="autoCapitalize">autocapitalize="{autoCapitalize}" </tpl>','<tpl if="autoFocus">autofocus="{autoFocus}" </tpl>',"></textarea>",'<tpl if="useMask"><div class="x-field-mask"></div></tpl>',"</div></tpl>"],onRender:function(){this.renderData.maxRows=this.maxRows,Ext.form.TextArea.superclass.onRender.apply(this,arguments)},onKeyUp:function(a){this.fireEvent("keyup",this,a)}}),Ext.reg("textareafield",Ext.form.TextArea),Ext.form.DatePicker=Ext.extend(Ext.form.Field,{ui:"select",picker:null,destroyPickerOnHide:!1,initComponent:function(){this.addEvents("change"),this.tabIndex=-1,this.useMask=!0,Ext.form.Text.superclass.initComponent.apply(this,arguments)},getDatePicker:function(){return this.datePicker||(this.picker instanceof Ext.DatePicker?this.datePicker=this.picker:this.datePicker=new Ext.DatePicker(Ext.apply(this.picker||{})),this.datePicker.setValue(this.value||null),this.datePicker.on({scope:this,change:this.onPickerChange,hide:this.onPickerHide})),this.datePicker},onMaskTap:function(){if(Ext.form.DatePicker.superclass.onMaskTap.apply(this,arguments)!==!0)return!1;this.getDatePicker().show()},onPickerChange:function(a,b){this.setValue(b),this.fireEvent("change",this,this.getValue())},onPickerHide:function(){this.destroyPickerOnHide&&this.datePicker&&this.datePicker.destroy()},setValue:function(a,b){return this.datePicker?(this.datePicker.setValue(a,b),this.value=a!=null?this.datePicker.getValue():null):(!Ext.isDate(a)&&!Ext.isObject(a)&&(a=null),Ext.isObject(a)?this.value=new Date(a.year,a.month-1,a.day):this.value=a),this.rendered&&(this.fieldEl.dom.value=this.getValue(!0)),this},getValue:function(a){var b=this.value||null;return a&&Ext.isDate(b)?b.format(Ext.util.Format.defaultDateFormat):b},onDestroy:function(){this.datePicker&&this.datePicker.destroy(),Ext.form.DatePicker.superclass.onDestroy.call(this)}}),Ext.reg("datepickerfield",Ext.form.DatePicker),Ext.layout.LayoutManager=new Ext.AbstractManager({create:function(a,b){a||(a=b);if(Ext.isString(a))return new this.types[a||b];if(Ext.isObject(a))return a.isLayout?a:new this.types[a.type||b](a)}}),Ext.regLayout=function(){return Ext.layout.LayoutManager.registerType.apply(Ext.layout.LayoutManager,arguments)},Ext.layout.Layout=Ext.extend(Object,{isLayout:!0,initialized:!1,constructor:function(a){this.id=Ext.id(null,"ext-layout-"+this.type+"-"),Ext.apply(this,a)},layout:function(){var a=this;a.layoutBusy=!0,a.initLayout(),a.beforeLayout.apply(a,arguments)!==!1&&(a.onLayout.apply(a,arguments),a.afterLayout(),a.owner.needsLayout=!1,a.layoutBusy=!1)},beforeLayout:function(){return this.renderItems(this.getLayoutItems(),this.getTarget()),!0},renderItems:function(a,b){var c=a.length,d=0,e;for(;d<c;d++)e=a[d],e&&!e.rendered?this.renderItem(e,d,b):this.isValidParent(e,b)||this.moveItem(e,d,b)},renderItem:function(a,b,c){a.rendered||(a.render(c,b),this.configureItem(a,b),this.childrenChanged=!0)},moveItem:function(a,b,c){typeof b=="number"&&(b=c.dom.childNodes[b]),c=c.dom||c,c.insertBefore(a.el.dom,b||null),a.container=c,this.configureItem(a,b),this.childrenChanged=!0},initLayout:function(){!this.initialized&&!Ext.isEmpty(this.targetCls)&&this.getTarget().addCls(this.targetCls),this.initialized=!0},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},isValidParent:function(a,b){var c=a.el?a.el.dom:Ext.getDom(a);return b&&c.parentNode==(b.dom||b)},configureItem:function(a,b){this.itemCls&&a.el.addCls(this.itemCls)},onLayout:Ext.emptyFn,afterLayout:Ext.emptyFn,onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(a){this.itemCls&&a.rendered&&a.el.removeCls(this.itemCls)},destroy:function(){if(!Ext.isEmpty(this.targetCls)){var a=this.getTarget();a&&a.removeCls(this.targetCls)}this.onDestroy()}}),Ext.layout.ComponentLayout=Ext.extend(Ext.layout.Layout,{type:"component",monitorChildren:!0,beforeLayout:function(a,b){Ext.layout.ComponentLayout.superclass.beforeLayout.call(this);var c=this.owner,d=c.isVisible(),e;return!d&&c.hiddenOwnerCt&&(e=c.hiddenOwnerCt.layoutOnShow,e.remove(c),e.add(c),c.needsLayout={width:a,height:b,isSetSize:!1}),d&&this.needsLayout(a,b)},needsLayout:function(a,b){this.lastComponentSize=this.lastComponentSize||{width:-Infinity,height:-Infinity};var c=this.childrenChanged;return this.childrenChanged=!1,c||this.lastComponentSize.width!==a||this.lastComponentSize.height!==b},setElementSize:function(a,b,c){b!==undefined&&c!==undefined?a.setSize(b,c):c!==undefined?a.setHeight(c):b!==undefined&&a.setWidth(b)},getTarget:function(){return this.owner.el},setTargetSize:function(a,b){this.setElementSize(this.owner.el,a,b),this.lastComponentSize={width:a,height:b}},afterLayout:function(){var a=this.owner,b=a.layout,c=a.ownerCt,d,e,f,g,h;a.afterComponentLayout(this),b&&b.isLayout&&b.layout(),c&&c.componentLayout&&c.componentLayout.monitorChildren&&!c.componentLayout.layoutBusy&&(c.componentLayout.childrenChanged=!0,c.layout&&!c.layout.layoutBusy&&(c.layout.type=="autocontainer"?c.doComponentLayout(g,h):c.layout.layout()))}}),Ext.layout.AutoComponentLayout=Ext.extend(Ext.layout.ComponentLayout,{type:"autocomponent",onLayout:function(a,b){this.setTargetSize(a,b)}}),Ext.regLayout("autocomponent",Ext.layout.AutoComponentLayout),Ext.layout.DockLayout=Ext.extend(Ext.layout.ComponentLayout,{type:"dock",itemCls:"x-docked",onLayout:function(a,b){var c=this,d=c.owner,e=d.body,f=d.ownerCt,g=d.layout,h=d.collapsed,i=d.contracted,j=d.expanded,k=c.headerItem,l=c.getTarget(),m=!1,n=!1,o,p=c.info={boxes:[],size:{width:a,height:b},padding:{top:l.getPadding("t"),right:l.getPadding("r"),bottom:l.getPadding("b"),left:l.getPadding("l")},border:{top:l.getBorderWidth("t"),right:l.getBorderWidth("r"),bottom:l.getBorderWidth("b"),left:l.getBorderWidth("l")},bodyMargin:{top:e.getMargin("t"),right:e.getMargin("r"),bottom:e.getMargin("b"),left:e.getMargin("l")},bodyBox:{}};b===undefined||b===null||a===undefined||a===null||i?(b!==undefined&&b!==null||a!==undefined&&a!==null?b===undefined||b===null?(n=!0,(!d.animCollapse||!j&&!i)&&c.setTargetSize(a,null),c.setBodyBox({width:a,height:null})):(m=!0,(!d.animCollapse||!j&&!i)&&c.setTargetSize(null,b),c.setBodyBox({width:null,height:b})):(n=!0,m=!0,(!d.animCollapse||!j&&!i)&&c.setTargetSize(null,null),c.setBodyBox({width:null,height:null})),!h&&g&&g.isLayout&&g.layout(),c.dockItems(m,n),h&&(k?k.dock=="top"||k.dock=="bottom"?p.size.height=k.getHeight():p.size.width=k.getWidths():p.size.height=0),j||i?d.animCollapse?Ext.createDelegate(d.animCollapseFn,d,[p.size.width,p.size.height])():(Ext.createDelegate(d["after"+(j?"Expand":"Collapse")],d)(),c.setTargetSize(p.size.width,p.size.height)):c.setTargetSize(p.size.width,p.size.height)):j||i?d.animCollapse?Ext.createDelegate(d.animCollapseFn,d,[a,b])():(Ext.createDelegate(d["after"+(j?"Expand":"Collapse")],d)(),c.setTargetSize(a,b)):(c.setTargetSize(a,b),c.dockItems()),Ext.layout.DockLayout.superclass.onLayout.call(c,a,b)},afterLayout:function(){Ext.layout.DockLayout.superclass.afterLayout.call(this)},dockItems:function(a,b){this.calculateDockBoxes(a,b);var c=this.info,d=this.owner.collapsed,e=c.boxes,f=e.length,g,h;for(h=0;h<f;h++){g=e[h];if(d===!0&&!g.isHeader)continue;g.item.setPosition(g.x,g.y)}a&&(c.bodyBox.width=null),b&&(c.bodyBox.height=null),this.setBodyBox(c.bodyBox)},calculateDockBoxes:function(a,b){var c=this,d=c.getTarget(),e=c.getLayoutItems(),f=c.owner,g=f.contracted,h=f.expanded,i=f.body,j=c.info,k=j.size,l=e.length,m=j.padding,n=j.border,o,p,q,r,s,t,u;b?k.height=i.getHeight()+m.top+n.top+m.bottom+n.bottom:k.height=d.getHeight()-d.getMargin("tb"),a?k.width=i.getWidth()+m.left+n.left+m.right+n.right:k.width=d.getWidth()-d.getMargin("lr"),j.bodyBox={x:n.left+m.left,y:n.top+m.top,width:k.width-m.left-n.left-m.right-n.right,height:k.height-n.top-m.top-n.bottom-m.bottom};for(p=0;p<l;p++)o=e[p],o.isHeader&&(c.headerItem=o),q=c.initBox(o),b===!0?q=c.adjustAutoBox(q,p):q=c.adjustSizedBox(q,p),j.boxes.push(q)},adjustSizedBox:function(a,b){var c=this.info.bodyBox;switch(a.type){case"top":a.y=c.y;break;case"left":a.x=c.x;break;case"bottom":a.y=c.y+c.height-a.height;break;case"right":a.x=c.x+c.width-a.width}if(!a.overlay)switch(a.type){case"top":c.y+=a.height,c.height-=a.height;break;case"left":c.x+=a.width,c.width-=a.width;break;case"bottom":c.height-=a.height;break;case"right":c.width-=a.width}return a},adjustAutoBox:function(a,b){var c=this.info,d=c.bodyBox,e=c.size,f=c.boxes,g=a.type,h,i;if(g=="top"||g=="bottom")for(h=0;h<b;h++)i=f[h],i.stretched&&i.type=="left"||i.type=="right"?i.height+=a.height:i.type=="bottom"&&(i.y+=a.height);switch(g){case"top":a.y=d.y,a.overlay||(d.y+=a.height),e.height+=a.height;break;case"bottom":a.y=d.y+d.height,e.height+=a.height;break;case"left":a.x=d.x,a.overlay||(d.x+=a.width,d.width-=a.width);break;case"right":a.overlay||(d.width-=a.width),a.x=d.x+d.width}return a},initBox:function(a){var b=this.info.bodyBox,c=a.dock=="top"||a.dock=="bottom",d={item:a,overlay:a.overlay,type:a.dock};return a.stretch!==!1?(d.stretched=!0,c?(d.x=b.x,d.width=b.width,a.doComponentLayout(d.width-a.el.getMargin("lr"))):(d.y=b.y,d.height=b.height,a.doComponentLayout(undefined,d.height-a.el.getMargin("tb")))):(a.doComponentLayout(),d.width=a.getWidth(),d.height=a.getHeight(),c&&(d.x=a.align=="right"?b.width-d.width:b.x)),d.width==undefined&&(d.width=a.getWidth()+a.el.getMargin("lr")),d.height==undefined&&(d.height=a.getHeight()+a.el.getMargin("tb")),d},getLayoutItems:function(){return this.owner.getDockedItems()},setBodyBox:function(a){var b=this,c=b.owner,d=c.body,e=c.contracted,f=c.expanded,g=b.info,h=g.bodyMargin,i=g.padding,j=g.border;Ext.isNumber(a.width)&&(a.width-=h.left+h.right),Ext.isNumber(a.height)&&(a.height-=h.top+h.bottom),b.setElementSize(d,a.width,a.height),d.setLeft(a.x-i.left-j.left),d.setTop(a.y-i.top-j.top)},configureItem:function(a,b){Ext.layout.DockLayout.superclass.configureItem.call(this,a,b);var c=a.el||Ext.get(a);this.itemCls&&c.addCls(this.itemCls+"-"+a.dock)},afterRemove:function(a){Ext.layout.DockLayout.superclass.afterRemove.call(this,a),this.itemCls&&a.el.removeCls(this.itemCls+"-"+a.dock);var b=a.el.dom;b&&b.parentNode.removeChild(b),this.childrenChanged=!0}}),Ext.regLayout("dock",Ext.layout.DockLayout),Ext.layout.FieldLayout=Ext.extend(Ext.layout.ComponentLayout,{type:"field",onLayout:function(a,b){Ext.layout.FieldLayout.superclass.onLayout.call(this,owner,target),this.setTargetSize(a,b)},handleLabel:function(){this.owner.labelEl.setWidth(this.owner.labelWidth)}}),Ext.regLayout("field",Ext.layout.FieldLayout),Ext.layout.ContainerLayout=Ext.extend(Ext.layout.Layout,{type:"container",getLayoutItems:function(){return this.owner&&this.owner.items&&this.owner.items.items||[]},afterLayout:function(){this.owner.afterLayout(this)},getTarget:function(){return this.owner.getTargetEl()}}),Ext.layout.AutoContainerLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"autocontainer",onLayout:function(a,b){var c=this.getLayoutItems(),d=c.length,e;for(e=0;e<d;e++)c[e].doComponentLayout()}}),Ext.regLayout("auto",Ext.layout.AutoContainerLayout),Ext.regLayout("autocontainer",Ext.layout.AutoContainerLayout),Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{itemCls:"x-fit-item",targetCls:"x-layout-fit",type:"fit",onLayout:function(){Ext.layout.FitLayout.superclass.onLayout.call(this);if(this.owner.items.length){var a=this.getTargetBox(),b=this.owner.items.get(0);this.setItemBox(b,a),b.cancelAutoSize=!0}},getTargetBox:function(){var a=this.getTarget(),b=a.getSize(),c={left:a.getPadding("l"),right:a.getPadding("r"),top:a.getPadding("t"),bottom:a.getPadding("b")},d={left:a.getBorderWidth("l"),right:a.getBorderWidth("r"),top:a.getBorderWidth("t"),bottom:a.getBorderWidth("b")};return{width:b.width-c.left-c.right-d.left-d.right,height:b.height-c.top-c.bottom-d.top-d.bottom,x:c.left+d.left,y:c.top+d.top}},setItemBox:function(a,b){a&&b.height>0&&(b=Ext.apply({},b),b.width-=a.el.getMargin("lr"),b.height-=a.el.getMargin("tb"),a.setCalculatedSize(b),a.setPosition(b))}}),Ext.regLayout("fit",Ext.layout.FitLayout),Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{type:"card",sizeAllCards:!1,hideInactive:!0,beforeLayout:function(){return this.activeItem=this.getActiveItem(),Ext.layout.CardLayout.superclass.beforeLayout.apply(this,arguments)},onLayout:function(){Ext.layout.FitLayout.superclass.onLayout.apply(this,arguments);var a=this.activeItem,b=this.getLayoutItems(),c=b.length,d=this.getTargetBox(),e,f;for(e=0;e<c;e++)f=b[e],this.setItemBox(f,d);!this.firstActivated&&a&&(a.fireEvent("beforeactivate",a)!==!1&&a.fireEvent("activate",a),this.firstActivated=!0)},getActiveItem:function(){return!this.activeItem&&this.owner&&(this.activeItem=this.parseActiveItem(this.owner.activeItem)),this.activeItem&&this.owner.items.items.indexOf(this.activeItem)!=-1?this.activeItem:null},parseActiveItem:function(a){return a&&a.isComponent?a:typeof a=="number"||a==undefined?this.getLayoutItems()[a||0]:this.owner.getComponent(a)},configureItem:function(a,b){Ext.layout.FitLayout.superclass.configureItem.call(this,a,b),this.hideInactive&&this.activeItem!==a?a.hide():a.show()},onRemove:function(a){a===this.activeItem&&(this.activeItem=null,this.owner.items.getCount()==0&&(this.firstActivated=!1))},getAnimation:function(a,b){var c=(a||{}).cardSwitchAnimation;return c===!1?!1:c||b.cardSwitchAnimation},setActiveItem:function(a,b){var c=this,d=c.owner,e=Ext.getDoc(),f=c.activeItem,g;return b=b==undefined?this.getAnimation(a,d):b,a=c.parseActiveItem(a),g=d.items.indexOf(a),g==-1&&d.add(a),a&&f!=a&&d.onBeforeCardSwitch(a,f,g,!!b)!==!1?(a.rendered||this.layout(),a.fireEvent("beforeactivate",a,f)===!1?!1:f&&f.fireEvent("beforedeactivate",f,a)===!1?!1:(a.hidden&&a.show(),c.activeItem=a,b?(e.on("click",Ext.emptyFn,c,{single:!0,preventDefault:!0}),Ext.Anim.run(a,b,{out:!1,autoClear:!0,scope:c,after:function(){Ext.defer(function(){e.un("click",Ext.emptyFn,c)},50,c),a.fireEvent("activate",a,f),f||d.onCardSwitch(a,f,g,!0)}}),f&&Ext.Anim.run(f,b,{out:!0,autoClear:!0,after:function(){f.fireEvent("deactivate",f,a),c.hideInactive&&c.activeItem!=f&&f.hide(),d.onCardSwitch(a,f,g,!0)}})):(a.fireEvent("activate",a,f),f&&(f.fireEvent("deactivate",f,a),c.hideInactive&&f.hide()),d.onCardSwitch(a,f,g,!1)),a)):!1},getNext:function(a){var b=this.getLayoutItems(),c=b.indexOf(this.activeItem);return b[c+1]||(a?b[0]:!1)},next:function(a,b){return this.setActiveItem(this.getNext(b),a)},getPrev:function(a){var b=this.getLayoutItems(),c=b.indexOf(this.activeItem);return b[c-1]||(a?b[b.length-1]:!1)},prev:function(a,b){return this.setActiveItem(this.getPrev(b),a)}}),Ext.regLayout("card",Ext.layout.CardLayout),Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"box",targetCls:"x-layout-box",innerCls:"x-layout-box-inner",pack:"start",align:"center",notifyOwnerCtContainer:!0,fixedLayout:!1,direction:"normal",onLayout:function(){Ext.layout.BoxLayout.superclass.onLayout.call(this);if(this.pack==="left"||this.pack==="top")this.pack="start";else if(this.pack==="right"||this.pack==="bottom")this.pack="end";var a=this.getTarget(),b=a.parent(),c=b.getWidth()-b.getPadding("lr")-b.getBorderWidth("lr")+"px",d=b.getHeight()-b.getPadding("tb")-b.getBorderWidth("tb")+"px";a.setStyle({"-webkit-box-orient":this.orientation,"-webkit-box-direction":this.direction,"-webkit-box-pack":this.pack,"-webkit-box-align":this.align}),this.orientation=="horizontal"?a.setStyle({"min-width":c,height:d}):a.setStyle({"min-height":d,width:c}),this.prepareFlexedItems(),this.setFlexedItems()},prepareFlexedItems:function(){var a=this.getLayoutItems(),b=a.length,c,d;for(d=0;d<b;d++)c=a[d],c.flex!=undefined?(c.el.setStyle("position","absolute"),c.boxEl=this.createBoxEl(c)):c.doComponentLayout()},setFlexedItems:function(){var a=this.getLayoutItems(),b=a.length,c,d;for(d=0;d<b;d++)c=a[d],c.flex!=undefined&&(c.boxSize=c.boxEl.getSize());for(d=0;d<b;d++)c=a[d],c.flex!=undefined&&(c.el.setStyle("position",""),this.align=="stretch"?c.setSize(c.boxSize):this.orientation=="horizontal"?c.setWidth(c.boxSize.width):c.setHeight(c.boxSize.height),c.boxEl.remove(),delete c.boxEl,delete c.boxSize)},getTarget:function(){var a=this.owner,b=this.innerCt;return b||(a.scrollEl?b=a.scrollEl.addCls(this.innerCls):b=a.getTargetEl().createChild({cls:this.innerCls}),this.innerCt=b),b},createBoxEl:function(a){var b=a.el;return b.insertSibling({style:"margin-top: "+b.getMargin("tb")+"px; margin-left: "+b.getMargin("lr")+"px; -webkit-box-flex: "+a.flex})}}),Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{orientation:"horizontal"}),Ext.regLayout("hbox",Ext.layout.HBoxLayout),Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{orientation:"vertical"}),Ext.regLayout("vbox",Ext.layout.VBoxLayout),Ext.plugins.ListPagingPlugin=Ext.extend(Ext.util.Observable,{autoPaging:!1,loadMoreText:"Load More...",init:function(a){this.list=a,a.onBeforeLoad=Ext.util.Functions.createInterceptor(a.onBeforeLoad,this.onBeforeLoad,this),this.mon(a,"update",this.onListUpdate,this)},onListUpdate:function(){this.rendered||this.render(),this.el.appendTo(this.list.getTargetEl()),this.autoPaging||this.el.removeCls("x-loading"),this.loading=!1},render:function(){var a=this.list,b=a.getTargetEl(),c="";this.autoPaging||(c+='<div class="x-list-paging-msg">'+this.loadMoreText+"</div>"),this.el=b.createChild({cls:"x-list-paging"+(this.autoPaging?" x-loading":""),html:c+Ext.LoadingSpinner}),this.autoPaging?this.mon(b.getScrollParent(),"scrollend",this.onScrollEnd,this):this.mon(this.el,"tap",this.onPagingTap,this),this.rendered=!0},onBeforeLoad:function(){if(this.loading&&this.list.store.getCount()>0)return this.list.loadMask.disable(),!1},onPagingTap:function(a){this.loading||(this.loading=!0,this.list.store.nextPage(),this.el.addCls("x-loading"))},onScrollEnd:function(a,b){b.y>=Math.abs(a.offsetBoundary.top)&&(this.loading=!0,this.list.store.nextPage())}}),Ext.preg("listpaging",Ext.plugins.ListPagingPlugin),Ext.plugins.PullRefreshPlugin=Ext.extend(Ext.util.Observable,{pullRefreshText:"Pull down to refresh...",releaseRefreshText:"Release to refresh...",loadingText:"Loading...",snappingAnimationDuration:150,refreshFn:null,pullTpl:new Ext.XTemplate('<div class="x-list-pullrefresh">','<div class="x-list-pullrefresh-arrow"></div>',Ext.LoadingSpinner,'<div class="x-list-pullrefresh-wrap">','<h3 class="x-list-pullrefresh-message">{message}</h3>','<div class="x-list-pullrefresh-updated">Last Updated: <span>{lastUpdated:date("m/d/Y h:iA")}</span></div>'
,"</div>","</div>"),isRefreshing:!1,isLoading:!1,currentViewState:"",init:function(a){this.list=a,this.lastUpdated=new Date,a.on("update",this.onListUpdate,this),a.onBeforeLoad=Ext.util.Functions.createInterceptor(a.onBeforeLoad,this.onBeforeLoad,this)},onListUpdate:function(){this.rendered||this.render(),this.list.getTargetEl().insertFirst(this.el),this.refreshFn||this.onLoadComplete.call(this)},render:function(){var a=this.list,b=a.getTargetEl(),c=b.getScrollParent();this.pullTpl.isTemplate||(this.pullTpl=new Ext.XTemplate(this.pullTpl)),this.el=this.pullTpl.insertFirst(b,{message:this.pullRefreshText,lastUpdated:this.lastUpdated},!0),this.messageEl=this.el.down(".x-list-pullrefresh-message"),this.updatedEl=this.el.down(".x-list-pullrefresh-updated > span"),this.pullHeight=this.el.getHeight(),this.scroller=c,c.on("bouncestart",this.onBounceStart,this),c.on("offsetchange",this.onOffsetChange,this),c.on("bounceend",this.onBounceEnd,this),c.on("offsetboundaryupdate",this.onOffsetBoundaryUpdate,this),this.rendered=!0},onOffsetBoundaryUpdate:function(a,b){this.isRefreshing&&(b.bottom+=this.pullHeight)},onBounceStart:function(a,b){b.axis==="y"&&!this.isRefreshing&&a.offset.y>this.pullHeight&&(this.isRefreshing=!0,this.onOffsetBoundaryUpdate(a,a.offsetBoundary))},onBounceEnd:function(a,b){b.axis==="y"&&this.isRefreshing&&(this.isRefreshing=!1,this.setViewState("loading"),this.isLoading=!0,this.refreshFn?this.refreshFn.call(this,this.onLoadComplete,this):this.list.getStore().load())},onOffsetChange:function(a,b){b.y>0&&!this.isRefreshing&&!this.isLoading&&(b.y>this.pullHeight?this.setViewState("release"):this.setViewState("pull"))},setViewState:function(a){if(a===this.currentViewState)return this;this.currentViewState=a;switch(a){case"pull":this.messageEl.setHTML(this.pullRefreshText),this.el.removeCls(["x-list-pullrefresh-release","x-list-pullrefresh-loading"]);break;case"release":this.messageEl.setHTML(this.releaseRefreshText),this.el.addCls("x-list-pullrefresh-release");break;case"loading":this.messageEl.setHTML(this.loadingText),this.el.addCls("x-list-pullrefresh-loading")}return this},onBeforeLoad:function(){if(this.isLoading&&this.list.store.getCount()>0)return this.list.loadMask.disable(),!1},onLoadComplete:function(){var a=this;this.isLoading&&(this.isLoading=!1,this.lastUpdated=new Date,this.setViewState("pull"),this.updatedEl.setHTML(Ext.util.Format.date(this.lastUpdated,"m/d/Y h:iA")),setTimeout(function(){a.scroller.updateBoundary(a.snappingAnimationDuration)},100))}}),Ext.preg("pullrefresh",Ext.plugins.PullRefreshPlugin),function(){Ext.Router.draw(function(a){return a.connect("dashboard",{controller:"dashboard",action:"index"}),a.connect("login",{controller:"userSession",action:"new"}),a.connect("logout",{controller:"userSession",action:"destroy"})})}.call(this),function(){new Ext.Application({name:"App",defaultUrl:"dashboard",launch:function(){return this.views.viewport=new this.views.Viewport}})}.call(this),function(){Ext.Ajax.on("beforerequest",function(a,b){var c,d;d=Ext.select('meta[name="csrf-token"]');if(d.first()!=null)return c=d.first().dom.content,b.headers||(b.headers={}),b.headers["X-CSRF-Token"]=c},this)}.call(this),function(){Ext.regModel("CurrentUser",{fields:[{name:"active",type:"boolean"},{name:"username",type:"string"}]})}.call(this),function(){App.models.Tag=Ext.regModel("Tag",{fields:[{name:"id",type:"number"},{name:"name",type:"string"}]})}.call(this),function(){App.models.Task=Ext.regModel("Task",{proxy:{type:"rest",url:"/tasks",format:"json"},fields:[{name:"id",type:"number"},{name:"name",type:"string"},{name:"bucket",type:"string"},{name:"done_at",type:"date",dateFormat:"timestamp"}],hasMany:{model:"Tag",name:"tags"},isTaggedAs:function(a){var b,c,d,e,f;b=!1,f=this.tags().data.items;for(d=0,e=f.length;d<e;d++){c=f[d];if(c.data.name===a)return!0}return b},isDone:function(){return this.data.done_at!==null}})}.call(this),function(){App.models.TaskBucket=Ext.regModel("TaskBucket",{fields:[{name:"text",type:"string"},{name:"value",type:"string"}]})}.call(this),App.models.User=Ext.regModel("User",{fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"email",type:"string"},{name:"phone",type:"string"}],validations:[{type:"presence",name:"name"},{type:"format",name:"email",matcher:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,message:"must be a valid email"}],proxy:{type:"rest",url:"/users",format:"json"}}),function(){App.stores.currentUser=new Ext.data.Store({model:"CurrentUser",autoLoad:!0,proxy:{type:"ajax",url:"users/current.json",reader:{type:"json",root:"current_users"}}})}.call(this),function(){App.stores.tags=new Ext.data.Store({model:"Tag",autoLoad:!0,proxy:{type:"ajax",url:"tags.json",reader:{type:"json",root:"tags"}}})}.call(this),function(){App.stores.taskbuckets=new Ext.data.Store({model:"TaskBucket",autoLoad:!0,proxy:{type:"ajax",url:"/config.json",reader:{type:"json",root:"taskbuckets"}}})}.call(this),function(){App.stores.tasks=new Ext.data.Store({model:"Task",autoLoad:!0,proxy:{type:"rest",url:"/tasks.json",reader:{type:"json",root:"tasks"}}})}.call(this),App.stores.users=new Ext.data.Store({model:"User",autoLoad:!1}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};App.views.Dashboard=Ext.extend(Ext.Panel,{initComponent:function(){var b,c;return b={text:"Log out",handler:a(function(){return Ext.dispatch({controller:"userSession",action:"destroy"})},this)},c={id:"dashboardTitlebar",xtype:"toolbar",title:"Dashboard",items:[{xtype:"spacer"},b]},Ext.apply(this,{scroll:"vertical",tpl:"Welcome, {username}!",styleHtmlContent:!0,dockedItems:[c],listeners:{beforeactivate:function(){return this.displayWelcomeMessage()}}}),App.views.Dashboard.superclass.initComponent.call(this)},displayWelcomeMessage:function(){var a;if(a=App.stores.currentUser.first())return this.update(a.data)}}),Ext.reg("App.views.Dashboard",App.views.Dashboard)}.call(this),App.views.ErrorField=Ext.extend(Ext.Component,{initComponent:function(){config={xtype:"component",id:this.fieldname+"ErrorField",cls:"errorfield",tpl:['<tpl if="values.length &gt; 0">',"    <ul>",'        <tpl for=".">',"            <li>{field} {message}</li>","        </tpl>","    </ul>","</tpl>"],hidden:!0},Ext.apply(this,config),App.views.ErrorField.superclass.initComponent.call(this)}}),Ext.reg("App.views.ErrorField",App.views.ErrorField),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};App.views.LoginCard=Ext.extend(Ext.Panel,{layout:"card",initComponent:function(){var b,c;return c={id:"loginCardToggleButton",handler:a(function(){return this.onFormToggle()},this)},b={id:"loginCardTitlebar",xtype:"toolbar",items:[{xtype:"spacer"},c]},Ext.apply(this,{dockedItems:[b],items:[{xtype:"App.views.LoginForm",id:"loginForm"},{xtype:"App.views.SignupForm",id:"signupForm"}],listeners:{show:function(){return this.drawToolbar()},cardswitch:function(){return this.drawToolbar()},deactivate:function(){return this.down("#loginForm").resetForm(),this.down("#signupForm").resetForm()}}}),App.views.LoginCard.superclass.initComponent.apply(this,arguments)},onFormToggle:function(){return this.getActiveItem().id==="loginForm"?this.setActiveItem("signupForm",{type:"slide",direction:"right"}):this.setActiveItem("loginForm",{type:"slide",direction:"left"})},drawToolbar:function(){var a,b;return a=this.down("#loginCardToggleButton"),b=this.down("#loginCardTitlebar"),this.getActiveItem().id==="loginForm"?(a.setText("Sign up"),b.setTitle("Log in")):(a.setText("Log in"),b.setTitle("Sign up"))}}),Ext.reg("App.views.LoginCard",App.views.LoginCard)}.call(this),function(){App.views.MenuCard=Ext.extend(Ext.TabPanel,{initComponent:function(){return Ext.apply(this,{tabBar:{dock:"bottom",layout:{pack:"center"}},items:[{xtype:"App.views.Dashboard",id:"dashboardPanel",iconCls:"home",title:"home"},{xtype:"App.views.TasksPacket",id:"tasksPacket",title:"tasks",iconCls:"tasks"},{xtype:"App.views.TagsPacket",id:"tagsPacket",title:"tags",iconCls:"tags"},{xtype:"panel",iconCls:"profile",title:"profile"}]}),App.views.MenuCard.superclass.initComponent.call(this)},reveal:function(a){return this.setActiveItem(a,{type:"slide",duration:500})}}),Ext.reg("App.views.MenuCard",App.views.MenuCard)}.call(this),function(){App.views.Viewport=Ext.extend(Ext.Panel,{fullscreen:!0,layout:"card",initComponent:function(){return Ext.apply(this,{items:[{xtype:"App.views.MenuCard",id:"menuCardPanel"},{xtype:"App.views.LoginCard",id:"loginCardPanel"}]}),App.views.Viewport.superclass.initComponent.apply(this,arguments)},reveal:function(a){var b,c;return b=(c=a==="loginCardPanel")!=null?c:{up:"down"},this.setActiveItem(a,{type:"slide",direction:b,duration:500})}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};App.views.CommonForm=Ext.extend(Ext.form.FormPanel,{defaultInstructions:"Enter your username (or email address) and password to log in",initComponent:function(){var b,c,d;return c=this,b={xtype:"fieldset",id:c.slug+"FormFieldset",title:c.fieldsetTitle,instructions:c.defaultInstructions,defaults:{xtype:"textfield",required:!1,autoCapitalize:!1},items:c.formFields},d={xtype:"button",text:c.buttonText,handler:a(function(){return this.onSaveAction()},this),scope:this},Ext.apply(this,{scroll:"vertical",items:[b,d]}),App.views.CommonForm.superclass.initComponent.call(this)},onSaveAction:function(){return Ext.dispatch({controller:"userSession",action:"create",form:this})},showErrors:function(a){var b;return b=this.down("#"+this.slug+"FormFieldset"),b.setInstructions(a.message)},resetForm:function(){var a;return a=this.down("#"+this.slug+"FormFieldset"),a.setInstructions(this.defaultInstructions),this.setLoading(!1),this.reset()}}),Ext.reg("App.views.CommonForm",App.views.CommonForm)}.call(this),function(){App.views.LoginForm=Ext.extend(App.views.CommonForm,{initComponent:function(){return Ext.apply(this,{slug:"login",url:"/sessions.json",fieldsetTitle:"Log in",buttonText:"Log in",formFields:[{name:"username",label:"username"},{name:"password",label:"password",xtype:"passwordfield"}],defaultInstructions:"Enter your username (or email address) and password to log in"}),App.views.LoginForm.superclass.initComponent.call(this)}}),Ext.reg("App.views.LoginForm",App.views.LoginForm)}.call(this),function(){App.views.SignupForm=Ext.extend(App.views.CommonForm,{initComponent:function(){return Ext.apply(this,{slug:"signup",url:"/users.json",fieldsetTitle:"Sign up",buttonText:"Create your new account",formFields:[{name:"user[username]",label:"username"},{name:"user[email]",label:"email"},{name:"user[password]",label:"password",xtype:"passwordfield"}],defaultInstructions:"To sign up, simply choose your username and password, and provide your email address."}),App.views.SignupForm.superclass.initComponent.call(this)}}),Ext.reg("App.views.SignupForm",App.views.SignupForm)}.call(this),function(){App.views.TagsForm=Ext.extend(Ext.form.FormPanel,{initComponent:function(){var a,b,c,d,e,f;return b={text:"cancel",ui:"back",handler:this.onCancelAction,scope:this},f={id:"tagFormTitlebar",xtype:"toolbar",title:"Create tag",items:[b]},d={xtype:"fieldset",title:"Tag",items:[{xtype:"textfield",name:"tag[name]",label:"name"}]},e={id:"tagFormSaveButton",xtype:"button",ui:"confirm",text:"save",handler:this.onSaveAction,scope:this},c={id:"tagFormDeleteButton",text:"delete",ui:"decline",handler:this.onDeleteAction,scope:this},a={xtype:"toolbar",dock:"bottom",items:[c,{xtype:"spacer"},e]},Ext.apply(this,{scroll:"vertical",url:"/tags.json",dockedItems:[f,a],items:[d],listeners:{beforesubmit:function(a,b,c){return a.setValues({tag:b}),window.form=a,console.log("#beforesubmit form: ",a)},beforeactivate:function(){var a;return c=this.down("#tagFormDeleteButton"),e=this.down("#tagFormSaveButton"),f=this.down("#tagFormTitlebar"),a=this.getRecord(),a.phantom?(f.setTitle("Create tag"),e.setText("create"),c.hide()):(f.setTitle("Update tag"),e.setText("update"),c.show())},deactivate:function(){return this.resetForm()}}}),App.views.TagsForm.superclass.initComponent.call(this)},loadRecord:function(a){var b,c;App.views.TagsForm.superclass.loadRecord.call(this,a);if(a&&a.data){c={};for(b in a.data)c["tag["+b+"]"]=a.data[b];this.setValues(c),this.record=a}return this},onSaveAction:function(){var a;return a=this.down("#tagFormSaveButton"),Ext.dispatch({controller:"Tags",action:a.getText(),form:this})},onCancelAction:function(){return Ext.dispatch({controller:"Tags",action:"index"})},onDeleteAction:function(){return Ext.dispatch({controller:"Tags",action:"destroy",form:this})},resetForm:function(){return this.reset()}}),Ext.reg("App.views.TagsForm",App.views.TagsForm)}.call(this),function(){App.views.TagsList=Ext.extend(Ext.Panel,{initComponent:function(){var a,b,c;return a={iconCls:"add",iconMask:!0,ui:"plain",handler:this.onAddAction,scope:this},c={xtype:"toolbar",title:"Tags",items:[{xtype:"spacer"},a]},b={xtype:"list",itemTpl:"{name}",store:App.stores.tags,listeners:{scope:this,itemtap:this.onItemtapAction}},Ext.apply(this,{layout:"fit",dockedItems:[c],items:[b]}),App.views.TagsList.superclass.initComponent.call(this)},onAddAction:function(){return Ext.dispatch({controller:"Tags",action:"newForm"})},onItemtapAction:function(a,b,c,d){return Ext.dispatch({controller:"Tags",action:"editForm",index:b})}}),Ext.reg("App.views.TagsList",App.views.TagsList)}.call(this),function(){App.views.TagsPacket=Ext.extend(Ext.Panel,{initComponent:function(){return Ext.apply(this,{layout:"card",items:[{xtype:"App.views.TagsList",id:"tagsList"},{xtype:"App.views.TagsForm",id:"tagsForm"}]}),App.views.TagsPacket.superclass.initComponent.call(this)}}),Ext.reg("App.views.TagsPacket",App.views.TagsPacket)}.call(this),function(){App.views.TasksForm=Ext.extend(Ext.form.FormPanel,{initComponent:function(){var a,b,c,d,e,f,g;return b={text:"cancel",ui:"back",handler:this.onCancelAction,scope:this},g={id:"taskFormTitlebar",xtype:"toolbar",title:"Create task",items:[b]},f={xtype:"fieldset",title:"Task",items:[{xtype:"textfield",name:"task[name]",label:"name"},{xtype:"selectfield",id:"tasksFormBucketSelect",name:"task[bucket]",label:"due",store:App.stores.taskbuckets}]},e={xtype:"fieldset",id:"taskFormTagfields",title:"Tag it",defaults:{xtype:"checkboxfield",name:"task[tag_ids][]"}},d={id:"taskFormSaveButton",xtype:"button",ui:"confirm",text:"save",handler:this.onSaveAction,scope:this},c={id:"taskFormDeleteButton",text:"delete",ui:"decline",handler:this.onDeleteAction,scope:this},a={xtype:"toolbar",dock:"bottom",items:[c,{xtype:"spacer"},d]},Ext.apply(this,{scroll:"vertical",url:"/tasks.json",dockedItems:[g,a],items:[f,e],listeners:{beforeactivate:function(){var a;return c=this.down("#taskFormDeleteButton"),d=this.down("#taskFormSaveButton"),g=this.down("#taskFormTitlebar"),a=this.getRecord(),this.buildTagCheckboxes(),a.phantom?(g.setTitle("Create task"),d.setText("create"),c.hide()):(g.setTitle("Update task"),d.setText("update"),c.show())},deactivate:function(){return this.resetForm()}}}),App.views.TasksForm.superclass.initComponent.call(this)},loadRecord:function(a){var b,c;App.views.TasksForm.superclass.loadRecord.call(this,a);if(a&&a.data){c={};for(b in a.data)c["task["+b+"]"]=a.data[b];this.setValues(c),this.record=a}return this},onSaveAction:function(){var a;return a=this.down("#taskFormSaveButton"),Ext.dispatch({controller:"Tasks",action:a.getText(),form:this})},onCancelAction:function(){return Ext.dispatch({controller:"Tasks",action:"index"})},onDeleteAction:function(){return Ext.dispatch({controller:"Tasks",action:"destroy",form:this})},resetForm:function(){return this.reset()},buildTagCheckboxes:function(){var a,b,c,d,e,f;c=this.getRecord(),a=App.views.viewport.down("#taskFormTagfields"),d=App.stores.tags.data.items;if(d.length===0)return a.hide();a.removeAll();for(e=0,f=d.length;e<f;e++)b=d[e],a.add({value:b.data.id,label:b.data.name,checked:c.isTaggedAs(b.data.name)});return a.show(),a.doLayout()}}),Ext.reg("App.views.TasksForm",App.views.TasksForm)}.call(this),function(){App.views.TasksList=Ext.extend(Ext.Panel,{initComponent:function(){var a,b,c;return a={iconCls:"add",iconMask:!0,ui:"plain",handler:this.onAddAction,scope:this},c={xtype:"toolbar",title:"Tasks",items:[{xtype:"spacer"},a]},b={xtype:"list",itemTpl:["{name}",'<div class="checkitem {[values.done_at ? "done" : ""]}">&nbsp;</div>'],store:App.stores.tasks,listeners:{scope:this,itemtap:this.onItemtapAction}},Ext.apply(this,{layout:"fit",dockedItems:[c],items:[b]}),App.views.TasksList.superclass.initComponent.call(this)},onAddAction:function(){return Ext.dispatch({controller:"Tasks",action:"newForm"})},onItemtapAction:function(a,b,c,d){return d.getTarget(".checkitem")?Ext.dispatch({controller:"Tasks",action:"toggleDone",index:b}):Ext.dispatch({controller:"Tasks",action:"editForm",index:b})}}),Ext.reg("App.views.TasksList",App.views.TasksList)}.call(this),function(){App.views.TasksPacket=Ext.extend(Ext.Panel,{initComponent:function(){return Ext.apply(this,{layout:"card",items:[{xtype:"App.views.TasksList",id:"tasksList"},{xtype:"App.views.TasksForm",id:"tasksForm"}]}),App.views.TasksPacket.superclass.initComponent.call(this)}}),Ext.reg("App.views.TasksPacket",App.views.TasksPacket)}.call(this),App.views.UsersForm=Ext.extend(Ext.form.FormPanel,{defaultInstructions:"Please enter the information above.",initComponent:function(){var a,b,c,d,e,f;b={text:"cancel",ui:"back",handler:this.onCancelAction,scope:this},a={id:"userFormTitlebar",xtype:"toolbar",title:"Create user",items:[b]},d={id:"userFormSaveButton",text:"save",ui:"confirm",handler:this.onSaveAction,scope:this},e={id:"userFormDeleteButton",text:"delete",ui:"decline",handler:this.onDeleteAction,scope:this},c={xtype:"toolbar",dock:"bottom",items:[e,{xtype:"spacer"},d]},f={xtype:"fieldset",id:"userFormFieldset",title:"User details",instructions:this.defaultInstructions,defaults:{xtype:"textfield",labelAlign:"left",labelWidth:"40%",required:!1,useClearIcon:!0,autoCapitalize:!1},items:[{name:"name",label:"name",autoCapitalize:!0},{xtype:"App.views.ErrorField",fieldname:"name"},{name:"email",label:"email",xtype:"emailfield"},{xtype:"App.views.ErrorField",fieldname:"email"},{name:"phone",label:"phone",xtype:"numberfield"},{xtype:"App.views.ErrorField",fieldname:"phone"}]},Ext.apply(this,{scroll:"vertical",dockedItems:[a,c],items:[f],listeners:{beforeactivate:function(){var a=this.down("#userFormDeleteButton"),b=this.down("#userFormSaveButton"),c=this.down("#userFormTitlebar"),d=this.getRecord();d.phantom?(c.setTitle("Create user"),b.setText("create"),a.hide()):(c.setTitle("Update user"),b.setText("update"),a.show())},deactivate:function(){this.resetForm()}}}),App.views.UsersForm.superclass.initComponent.call(this)},onCancelAction:function(){Ext.dispatch({controller:"Users",action:"index"})},onSaveAction:function(){var a=this.getRecord();Ext.dispatch({controller:"Users",action:a.phantom?"save":"update",data:this.getValues(),record:a,form:this})},onDeleteAction:function(){Ext.Msg.confirm("Delete this user?","",function(a){a==="yes"&&Ext.dispatch({controller:"Users",action:"remove",record:this.getRecord()})},this)},showErrors:function(a){var b=this.down("#userFormFieldset");this.fields.each(function(b){var c=a.getByField(b.name);if(c.length>0){var d=this.down("#"+b.name+"ErrorField");b.addCls("invalid-field"),d.update(c),d.show()}else this.resetField(b)},this),b.setInstructions("Please amend the flagged fields")},resetForm:function(){var a=this.down("#userFormFieldset");this.fields.each(function(a){this.resetField(a)},this),a.setInstructions(this.defaultInstructions),this.reset()},resetField:function(a){var b=this.down("#"+a.name+"ErrorField");return b.hide(),a.removeCls("invalid-field"),b}}),Ext.reg("App.views.UsersForm",App.views.UsersForm),App.views.UsersList=Ext.extend(Ext.Panel,{initComponent:function(){var a,b,c;a={itemId:"addButton",iconCls:"add",iconMask:!0,ui:"plain",handler:this.onAddAction,scope:this},b={dock:"top",xtype:"toolbar",title:"Users",items:[{xtype:"spacer"},a]},c={xtype:"list",itemTpl:"{name}",store:App.stores.users,listeners:{scope:this,itemtap:this.onItemtapAction}},Ext.apply(this,{html:"placeholder",layout:"fit",dockedItems:[b],items:[c]}),App.views.UsersList.superclass.initComponent.call(this)},onAddAction:function(){Ext.dispatch({controller:"Users",action:"newForm"})},onItemtapAction:function(a,b,c,d){Ext.dispatch({controller:"Users",action:"editForm",index:b})}}),Ext.reg("App.views.UsersList",App.views.UsersList),function(){Ext.regController("dashboard",{index:function(){var a,b;return a=App.stores.currentUser.first(),a.data.active?(App.views.viewport.reveal("menuCardPanel"),b=App.views.viewport.down("#dashboardPanel"),b.displayWelcomeMessage()):Ext.dispatch({controller:"userSession",action:"new",historyUrl:"login"})}})}.call(this),function(){Ext.regController("userSession",{"new":function(){return App.views.viewport.reveal("loginCardPanel")},create:function(a){return a.form.setLoading(!0),a.form.submit({success:function(a,b){return App.stores.currentUser.removeAll(),App.stores.currentUser.add(b.current_users[0]),App.stores.tags.load(),App.stores.tasks.load(),Ext.dispatch({controller:"dashboard",action:"index",historyUrl:"dashboard"})},failure:function(b,c){return a.form.setLoading(!1),a.form.showErrors(c)}})},destroy:function(){return Ext.Ajax.request({url:"/logout.json",success:function(a,b){var c;return c=JSON.parse(a.responseText),App.stores.currentUser.removeAll(),App.stores.currentUser.add(c.current_users[0]),Ext.dispatch({controller:"userSession",action:"new",historyUrl:"login"})}})}})}.call(this),function(){Ext.regController("Tags",{store:App.stores.tags,index:function(){var a,b,c;return b=App.views.viewport.getComponent("menuCardPanel"),c=b.getComponent("tagsPacket"),a=c.getComponent("tagsForm"),c.setActiveItem("tagsList")},newForm:function(){var a,b,c,d;return b=App.views.viewport.getComponent("menuCardPanel"),d=b.getComponent("tagsPacket"),a=d.getComponent("tagsForm"),c=new App.models.Tag,a.load(c),d.setActiveItem("tagsForm")},editForm:function(a){var b,c,d,e,f;return c=App.views.viewport.getComponent("menuCardPanel"),e=c.getComponent("tagsPacket"),b=e.getComponent("tagsForm"),f=App.views.viewport.down("#tagsForm"),d=this.store.getAt(a.index),b.load(d),e.setActiveItem("tagsForm")},create:function(a){var b;return b=this,a.form.submit({success:function(){return console.log("tag created successfully"),b.store.load(),b.index()},failure:function(a,b){return console.log("tag creation failed"),console.log("result: ",b)}})},update:function(a){var b,c;return b=this,c=a.form.getRecord(),a.form.submit({url:"/tags/"+c.data.id+".json",method:"PUT",success:function(){return console.log("tag created successfully"),b.store.load(),b.index()},failure:function(a,b){return console.log("tag creation failed"),console.log("result: ",b)}})},destroy:function(a){var b,c;return b=this,c=a.form.getRecord(),a.form.submit({url:"/tags/"+c.data.id+".json",method:"DELETE",success:function(){return console.log("tag was successfully destroyed"),b.store.load(),b.index()},failure:function(a,b){return console.log("tag destruction failed")}})}})}.call(this),function(){Ext.regController("Tasks",{store:App.stores.tasks,index:function(){var a,b,c;return b=App.views.viewport.getComponent("menuCardPanel"),c=b.getComponent("tasksPacket"),a=c.getComponent("tasksForm"),c.setActiveItem("tasksList")},newForm:function(){var a,b,c,d;return console.log("tasks#new"),b=App.views.viewport.getComponent("menuCardPanel"),d=b.getComponent("tasksPacket"),a=d.getComponent("tasksForm"),c=new App.models.Task,a.load(c),d.setActiveItem("tasksForm")},editForm:function(a){var b,c,d,e,f;return c=App.views.viewport.getComponent("menuCardPanel"),e=c.getComponent("tasksPacket"),b=e.getComponent("tasksForm"),f=App.views.viewport.down("#tasksForm"),d=this.store.getAt(a.index),b.load(d),e.setActiveItem("tasksForm")},create:function(a){var b;return b=this,a.form.submit({success:function(){return console.log("task created successfully"),b.store.load(),b.index()},failure:function(a,b){return console.log("task creation failed"),console.log("result: ",b)}})},update:function(a){var b,c;return b=this,c=a.form.getRecord(),a.form.submit({url:"/tasks/"+c.data.id+".json",method:"PUT",success:function(){return console.log("task updated successfully"),b.store.load(),b.index()},failure:function(a,b){return console.log("task update failed"),console.log("result: ",b)}})},destroy:function(a){var b,c;return b=this,c=a.form.getRecord(),a.form.submit({url:"/tasks/"+c.data.id+".json",method:"DELETE",success:function(){return console.log("task was successfully destroyed"),b.store.load(),b.index()},failure:function(a,b){return console.log("task destruction failed")}})},toggleDone:function(a){var b,c;return b=this,c=this.store.getAt(a.index),c.isDone()?c.set("done_at",void 0):c.set("done_at",new Date),Ext.Ajax.request({url:"/tasks/"+c.data.id+"/toggle.json",method:"POST",success:function(a,c){return console.log("#toggleDone posted successfully"),b.store.load()}})}})}.call(this),Ext.regController("Users",{store:App.stores.users,index:function(){App.views.viewport.reveal("usersList")},newForm:function(){var a=new App.models.User;App.views.usersForm.load(a),App.views.viewport.reveal("usersForm")},editForm:function(a){var b=this.store.getAt(a.index);App.views.usersForm.load(b),App.views.viewport.reveal("usersForm")},save:function(a){a.record.set(a.data);var b=a.record.validate();b.isValid()?(this.store.create(a.data),this.index()):a.form.showErrors(b)},update:function(a){var b=new App.models.User(a.data),c=b.validate();c.isValid()?(a.record.set(a.data),a.record.save(),this.index()):a.form.showErrors(c)},remove:function(a){this.store.remove(a.record),this.store.sync(),this.index()}})